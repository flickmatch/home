import{a as i,E as a,G as _,j as e}from"./index.a525f6e3.js";import{r as de,i as ue,a as me,bd as pe,bc as he,F as o,D as fe,B as r,T as c,bh as ye,b as Te}from"./App.8eefa033.js";import{d as _e}from"./AccountBalance.d89652ec.js";import{l,C as ge,d as Ne,m as Se}from"./map.270693b0.js";import{d as Ie}from"./CrisisAlertOutlined.c8d66298.js";import{u as ve,M as Ce,H as Pe,F as ke}from"./Header.4fb079ca.js";import{q as xe}from"./constants.70367cb1.js";import{Z as De,M as k,A as x,a as D}from"./Zoom.1da668d6.js";import{d as b,S as A,T as g}from"./TextField.683b535b.js";import{I as be}from"./InputAdornment.63898c4a.js";import"./index.a1233077.js";import"./index.module.325f48be.js";var S={},Ae=ue.exports;Object.defineProperty(S,"__esModule",{value:!0});var N=S.default=void 0,Ee=Ae(de()),E=me,Me=(0,Ee.default)([(0,E.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,E.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");N=S.default=Me;const we="_container_1uyn2_1",Fe="_portraitContainer_1uyn2_2",$e="_adminModeTag_1uyn2_18",je="_title_1uyn2_25",qe="_divider_1uyn2_32",Le="_fieldTitle_1uyn2_40",Oe="_fieldTitleIcon_1uyn2_46",Be="_sectionFirst_1uyn2_53",Ve="_sectionSecond_1uyn2_54",Ge="_sectionThird_1uyn2_55",He="_portraitSectionThird_1uyn2_63",We="_formSection_1uyn2_69",Re="_selectInput_1uyn2_75",ze="_sectionFourth_1uyn2_79",Je="_createButton_1uyn2_86",Ue="_dateTimePicker_1uyn2_104",Ze="_portaitDateTimePicker_1uyn2_108",Qe="_startTimePicker_1uyn2_113",Ke="_startEndPicker_1uyn2_114",Xe="_selectStartTimeInput_1uyn2_119",t={container:we,portraitContainer:Fe,adminModeTag:$e,title:je,divider:qe,fieldTitle:Le,fieldTitleIcon:Oe,sectionFirst:Be,sectionSecond:Ve,sectionThird:Ge,portraitSectionThird:He,formSection:We,selectInput:Re,sectionFourth:ze,createButton:Je,dateTimePicker:Ue,portaitDateTimePicker:Ze,startTimePicker:Qe,startEndPicker:Ke,selectStartTimeInput:Xe},Ye="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",M="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function mt(){const y=ve(),w=pe(),[,I]=he(),[F,$]=i.exports.useState(!1),[j,q]=i.exports.useState(!1),[m,L]=i.exports.useState(""),[p,O]=i.exports.useState(""),[B,T]=i.exports.useState(""),[h,V]=i.exports.useState(""),[v,G]=i.exports.useState(""),[d,H]=i.exports.useState(""),[W,R]=i.exports.useState([]),[z,J]=i.exports.useState([]),[C,U]=i.exports.useState(""),[P,Z]=i.exports.useState("");i.exports.useEffect(()=>{const s=localStorage.getItem("userData");s&&(JSON.parse(s).email==="admin@flickmatch.in"&&q(!0),$(!0))},[]),i.exports.useEffect(()=>{const s=new AbortController,n=s.signal;return(async()=>{try{const le=await(await fetch(M,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:xe})).json();R(le.data.cities)}catch(u){u instanceof Error&&u.name==="TypeError"&&console.log(u.message)}})(),()=>{s.abort()}},[]);const Q=s=>{(async()=>{try{const u=await(await fetch(M,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${s}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();J(u.data.city.sportsVenues)}catch(f){f instanceof Error&&f.name==="TypeError"&&console.log(f.message)}})()},K=s=>{L(s.target.value),T(""),Se.forEach(n=>{n.cityId===l.exports.parseInt(s.target.value)&&G(n.currency)}),Q(s.target.value)},X=s=>{O(s.target.value)};function Y(){I.push({options:{content:e(x,{severity:"error",children:a(D,{className:t.alertTitle,children:[m===""?"City name":p===""?"Turf name":h===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function ee(){I.push({options:{content:e(x,{severity:"success",children:e(D,{className:t.alertTitle,children:"Turf Added Successfully"})})}})}const te={input:{cityId:m,charges:l.exports.parseInt(h),sportsVenueId:p,startTime:C,endTime:P,reservedPlayersCount:l.exports.parseInt(d),waitListPlayersCount:l.exports.parseInt(d)/2}},se=()=>{m===""||p===""||h===""||d===""?Y():fetch(Ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${m}"
                      charges: ${l.exports.parseInt(h)},
                      sportsVenueId: "${p}",
                      startTime: "${C+"+0530"}",
                      endTime: "${P+"+0530"}",
                      reservedPlayersCount: ${l.exports.parseInt(d)},
                      waitListPlayersCount: ${l.exports.parseInt(d)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:te.input})}).then(s=>s.json()).then(s=>{if(s.errors)throw new Error(s.errors[0].message);ee(),w("/match-queues"),console.log(s.data)}).catch(s=>{console.log(s)})},ae=()=>a(r,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(_e,{className:t.fieldTitleIcon}),e(b,{className:t.selectInput,children:e(A,{id:"demo-simple-select-autowidth",value:m,onChange:K,style:{width:"100%"},children:W.map((s,n)=>e(k,{value:s.cityId,style:{width:"100%"},children:s.cityName},n))})})]}),ie=()=>a(r,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(ye,{className:t.fieldTitleIcon}),e(b,{className:t.selectInput,children:e(A,{id:"demo-simple-select-autowidth",value:p,onChange:X,style:{width:"100%"},children:z.map((s,n)=>e(k,{value:s.sportsVenueId,style:{width:"100%"},onClick:()=>T(s.googleMapsLink),children:s.displayName},n))})})]}),re=()=>a(r,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(Ie,{className:t.fieldTitleIcon}),e(g,{fullWidth:!0,value:B,onChange:s=>T(s.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),ne=()=>a(o,{className:y?t.portraitSectionThird:t.sectionThird,children:[e(r,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[a(r,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(N,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>U(s.target.value)})]})}),e(r,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[a(r,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(N,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>Z(s.target.value)})]})})]}),oe=()=>a(o,{className:t.sectionThird,children:[e(r,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(g,{InputProps:{startAdornment:e(be,{position:"start",children:v==="INR"?e(ge,{}):v==="USD"?e(Ne,{}):null})},fullWidth:!0,value:h,onChange:s=>V(s.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(r,{className:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(g,{fullWidth:!0,value:d,onChange:s=>H(s.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),ce=()=>e(r,{className:t.sectionFourth,children:e(Te,{variant:"contained",color:"success",className:t.createButton,onClick:se,children:"Add Game"})});return a(_,{children:[e(Ce,{title:"Add Game"}),e("div",{children:e(Pe,{loggedIn:F})}),j?a(_,{children:[e(De,{in:!0,style:{transitionDelay:"300ms"},children:a(o,{className:y?t.portraitContainer:t.container,children:[e(fe,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),a(r,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(r,{className:t.divider})]}),a(o,{className:t.formSection,children:[ae(),ie(),re(),ne(),oe(),ce()]})]})}),e(ke,{})]}):e(_,{})]})}export{mt as default};

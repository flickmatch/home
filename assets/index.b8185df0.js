import{a as y,j as a,M as j,K as l,W as G}from"./loginSlice.25a195ef.js";import{l as K}from"./lodash.730ce810.js";import{M as Q}from"./Meta.a5992fb3.js";import{r as U,i as $,a as F,bt as X,ap as Z,B as u,T as g,N as z,b as Y,u as O,F as J}from"./App.e7425b6e.js";import{s as t,V as E,J as ee,E as ae,d as se,P as te,C as re}from"./Cities.dddf75a5.js";import{T as R}from"./TextField.79d30c57.js";import{A as ie,a as oe}from"./MenuItem.fb11c5b9.js";import{b as le,d as ne,c as de}from"./DialogActions.3d6ab221.js";import{G as T}from"./Grid.8a90c528.js";import{a as me,q as ce}from"./constants.70367cb1.js";import{Z as ue}from"./Zoom.6cbb87ca.js";import{b as ye,S as D}from"./Stack.c74f341e.js";import"./index.module.51bb9f99.js";import"./index.d3135f16.js";import"./map.839e9770.js";import"./CurrencyRupeeSharp.19df0c67.js";import"./Input.4a8f793e.js";var B={},he=$.exports;Object.defineProperty(B,"__esModule",{value:!0});var V=B.default=void 0,pe=he(U()),Ne=F,ve=(0,pe.default)((0,Ne.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");V=B.default=ve;var H={},Pe=$.exports;Object.defineProperty(H,"__esModule",{value:!0});var W=H.default=void 0,fe=Pe(U()),Se=F,_e=(0,fe.default)((0,Se.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");W=H.default=_e;const be="_playerName_18ti2_1",Le="_addButton_18ti2_5",Ie="_adminModePanel_18ti2_10",xe="_adminModeTag_18ti2_14",C={playerName:be,addButton:Le,adminModePanel:Ie,adminModeTag:xe},ke={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Ce=({onToggle:P,isOpen:f,uniqueEventId:S,cityId:I,handlePassName:_})=>{const x=()=>P(),[n,b]=y.exports.useState(""),[d,h]=y.exports.useState(""),[,k]=X();function m(){k.push({options:{content:a(ie,{severity:"success",children:a(oe,{className:C.alertTitle,children:"Player Added Successfully"})})}})}const r=()=>{!n||!d?alert("All input fields are required."):fetch("https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
          joinEvent(input: {
                uniqueEventId: "${S}"
                cityId: "${I}"
                player: {
                  waNumber: "${d}"
                  name: "${n}"
              }
          }) {
            isSuccessful
          }
      }`})}).then(o=>o.json()).then(o=>{o.errors?alert(o.errors[0].message):(_(n),m(),b(""),h(""))}).catch(o=>{alert(o.message)})};return a(j,{children:a(Z,{open:f,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:l(u,{sx:ke,children:[l(u,{className:C.adminModePanel,children:[a(g,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Add Player"}),a(z,{label:"admin mode",color:"primary",variant:"outlined",className:C.adminModeTag})]}),a(u,{className:C.playerName,children:a(R,{fullWidth:!0,label:"Player Name",id:"fullWidth",value:n,onChange:o=>b(o.target.value)})}),a(u,{children:a(R,{type:"number",fullWidth:!0,label:"Phone No.",id:"fullWidth",value:d,onChange:o=>h(o.target.value)})}),a(Y,{variant:"contained",endIcon:a(W,{}),className:C.addButton,onClick:r,children:"Add Player"})]})})})},Ae=({gameEvent:P,cityName:f,cityNameId:S,addPlayerInQueue:I})=>{const _=O(),[x,n]=y.exports.useState(!1),[b,d]=y.exports.useState(!1),[h,k]=y.exports.useState(null),m=e=>{const i=document.getElementById(e);if(i){i.scrollIntoView({behavior:"smooth",block:"start"});const s=i.querySelector("[aria-expanded]");s&&s.click(),d(!0),setTimeout(()=>{d(!1)},2e3)}},r=G(e=>e),o=e=>{history.replaceState(null,"",`#${e}`),k(e),n(i=>!i)},L=()=>{h&&o(h)},A=e=>{I(e)};y.exports.useEffect(()=>{const e=window.location.hash.substring(1);e&&m(e)},[]);const p=(e,i)=>a(te,{displayName:e?e.displayName:"(Empty)",index:i},i),M=e=>l(u,{className:t.teamDivision,children:[a("span",{className:t.colorTeamA,style:{background:e}}),e||"White"," (Team A)"]}),N=e=>l(u,{className:t.teamDivisionSecond,children:[a("span",{className:t.colorTeamB,style:{background:e}}),e||"Blue"," (Team B)"]});return a(j,{children:(()=>P.map(e=>l(le,{className:_?t.mobileAccordion:t.accordion,id:e.uniqueEventId,sx:{"&:before":{display:"none"}},children:[a(ne,{expandIcon:a(V,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:l(J,{className:t.flexbox,children:[l(J,{className:t.venue,children:[a(E,{venueName:e.venueName,date:e.date,dummyData:e.dummyData?e.dummyData:!1}),_?null:a(ee,{stripePaymentUrl:e.stripePaymentUrl,charges:0,date:"",uniqueEventId:e.uniqueEventId,eventId:e.eventId,reservedPlayersCount:e.reservedPlayersCount,reservedPlayersList:e.reservedPlayersList,time:"",venueLocationLink:"",venueName:e.venueName,waitListPlayers:e.waitListPlayers,waitListPlayersCount:e.waitListPlayersCount,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1,handlePassName:A,cityId:S})]}),a(ae,{uniqueEventId:e.uniqueEventId,charges:e.charges,date:e.date,time:e.time,venueLocationLink:e.venueLocationLink,reservedPlayersCount:e.reservedPlayersCount,waitListPlayersCount:e.waitListPlayersCount,eventId:f,reservedPlayersList:e.reservedPlayersList,venueName:e.venueName,waitListPlayers:e.waitListPlayers,stripePaymentUrl:e.stripePaymentUrl,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1,handlePassName:A})]})}),a(de,{className:b&&window.location.hash.substring(1)===e.uniqueEventId?t.blink:"",children:l(u,{className:t.box,sx:{flexGrow:1},children:[l(u,{className:t.reservedPlayersContainer,children:[a(g,{className:t.reservedPlayers,children:"Reserved Players"}),r.login.isAdmin&&r.login.isLoggedIn?a(se,{className:t.editIcon,onClick:()=>o(e.uniqueEventId)}):null]}),r.login.isAdmin&&r.login.isLoggedIn&&h===e.uniqueEventId?a(Ce,{isOpen:x,onToggle:L,uniqueEventId:h,cityId:S,handlePassName:A}):null,e.team_division?l(u,{children:[M(e.team1_color),a(T,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(i,s)=>{const c=s<e.reservedPlayersList.length?e.reservedPlayersList[s]:null;return p(c,s)})}),a(g,{className:t.versus,children:"v/s"}),N(e.team2_color),a(T,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(i,s)=>{const c=s<e.reservedPlayersList.length?e.reservedPlayersList[s+e.reservedPlayersCount/2]:null;return p(c,s+e.reservedPlayersCount/2)})})]}):a(u,{children:a(T,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount},(i,s)=>{const c=s<e.reservedPlayersList.length?e.reservedPlayersList[s]:null;return p(c,s)})})})]})})]},e.uniqueEventId)))()})},q={data:{cities:[{cityId:"2",cityName:"Hyderabad",countryCode:"IN",dummyData:!1,currency:"INR",events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-1",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:12,waitListPlayersCount:6,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!0,team1_color:"White",team2_color:"Blue",charges:200,reservedPlayersList:[{displayName:"Abhimanyu"},{displayName:"Sourabh"},{displayName:"Kamal"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Jasprit"},{displayName:"Naresh Kumar"},{displayName:"Kaushal"},{displayName:"Nakul"},{displayName:"Parth"},{displayName:"Himanshu"}],waitListPlayers:[{displayName:"Nitin"},{displayName:"Haridev"},{displayName:"Kiyaan"},{displayName:"Monya Amo"},{displayName:"Rolly"},{displayName:"Jhumkar"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-2",date:"Sun, Jan 01",time:"9:00PM-10:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:10,waitListPlayersCount:5,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!1,team1_color:"",team2_color:"",charges:250,reservedPlayersList:[{displayName:"Aryan"},{displayName:"Sarvesh"},{displayName:"Saarthak"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Mayank"},{displayName:"Yash"},{displayName:"Ankur"},{displayName:"Rithik"}],waitListPlayers:[{displayName:"Harsh"},{displayName:"Lovepreet"},{displayName:"Himanshu"},{displayName:"Mohit"},{displayName:"Piyush"}],stripePaymentUrl:""}]},{cityId:"1",cityName:"Gurgaon",countryCode:"IN",currency:"INR",dummyData:!1,events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sumesh"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Saksham"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Anubhav"},{displayName:"Saarthak"},{displayName:"Harshvardhan"},{displayName:"Astitva"},{displayName:"Rishi"},{displayName:"Rijvaan"}],waitListPlayers:[{displayName:"Mukhtaar"},{displayName:"Shubham"},{displayName:"Burhan"},{displayName:"Arif"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Nilesh"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-4",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Harshdeep"},{displayName:"Sarvesh"},{displayName:"Akhilesh"},{displayName:"Sanju"},{displayName:"Prahlad"},{displayName:"Kishore"},{displayName:"Jasprit"},{displayName:"Sooraj"},{displayName:"Bunty Singh"},{displayName:"Rijwaan"},{displayName:"Ravinder"},{displayName:"Vinod"},{displayName:"Himesh"},{displayName:"Sandeep"}],waitListPlayers:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sukhwinder"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Margo"},{displayName:"Saksham"}],stripePaymentUrl:""}]},{cityId:"4",cityName:"San Jose",countryCode:"US",currency:"USD",dummyData:!1,events:[{uniqueEventId:"10-26-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Vista Montana Park",reservedPlayersCount:18,waitListPlayersCount:9,venueLocationLink:"https://goo.gl/maps/ivkhHaXWM3RBTJ5r9",team_division:!1,team1_color:"",team2_color:"",charges:8.99,reservedPlayersList:[{displayName:"Chen"},{displayName:"Pablo"},{displayName:"Feng"},{displayName:"Leo"},{displayName:"Himesh"},{displayName:"Arturito"},{displayName:"Diego"},{displayName:"Mateo"},{displayName:"Rafael"},{displayName:"Shahin"},{displayName:"Eva"},{displayName:"Astva"},{displayName:"Rishi"},{displayName:"Frank"},{displayName:"Ahmad"},{displayName:"Luca"},{displayName:"Dario"},{displayName:"Bianca"}],waitListPlayers:[{displayName:"Jiang"},{displayName:"Santiago"},{displayName:"Burhan"},{displayName:"Felipe"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Alvaro"},{displayName:"Elise"},{displayName:"Louis"}],stripePaymentUrl:""}]}]}};function Ge(){const[P,f]=y.exports.useState([]),[S,I]=y.exports.useState(!0),[_,x]=y.exports.useState([]),n=O(),b=m=>{x(r=>[...r,m])},d=m=>new Date(m.date);y.exports.useEffect(()=>{f([]);const m=new AbortController,r=m.signal;return(async()=>{try{const p=await(await fetch(me,{method:"POST",signal:r,headers:{"Content-Type":"application/json"},body:ce})).json(),M=["San Francisco","San Jose","Mountain View"],N=[];p.data.cities.forEach((v,e)=>{if(K.exports.some(q.data.cities,{cityId:v.cityId}))if(v.events.length>0){const s=p.data.cities[e];s.events.sort((c,w)=>d(w).getTime()-d(c).getTime()),N.push(s)}else q.data.cities.forEach((s,c)=>{s.cityName==v.cityName&&N.push(q.data.cities[c])});else if(v.events.length>0){const s=p.data.cities[e];s.events.sort((c,w)=>d(w).getTime()-d(c).getTime()),N.push(s)}I(!1)}),N.sort((v,e)=>{const i=M.indexOf(v.cityName),s=M.indexOf(e.cityName);return i===-1&&s===-1?0:i===-1?-1:s===-1?1:i-s}),f(N)}catch(L){L instanceof Error&&L.name==="TypeError"&&console.log(L)}})(),()=>{m.abort()}},[_]);const h=()=>(P.sort(r=>r.dummyData===!1?1:-1),P.map(r=>a(ue,{in:!0,style:{transitionDelay:"300ms"},children:l("div",{className:n?t.mobileContainer:t.container,children:[a(re,{cityName:r.cityName,cityId:r.cityId,events:r.events,dummyData:r.dummyData,countryCode:r.countryCode}),a(Ae,{gameEvent:r.events,cityName:r.cityName,cityNameId:r.cityId,addPlayerInQueue:b})]})},r.cityId))),k=()=>S?l(ye,{spacing:1,className:t.skeletonContainer,children:[a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton}),a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton}),a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton}),a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton})]}):null;return l(j,{children:[a(Q,{title:"Match Queues"}),a(g,{className:t.title,children:"Flickmatch Soccer"}),h(),k()]})}export{Ge as default};

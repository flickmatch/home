import{a as r,W as Se,K as a,M as P,j as e}from"./loginSlice.f61746a0.js";import{r as ve,i as Ce,a as Ie,u as Pe,e as ke,bu as xe,F as o,S as we,B as i,T as n,bB as be,bw as Me,b as De}from"./App.353cf322.js";import{d as Ae}from"./AccountBalance.2c18795a.js";import{d as Ee}from"./CrisisAlertOutlined.2e463901.js";import{l as h}from"./lodash.dcf1d9ce.js";import{S as Ge,q as $e}from"./sweetalert2.all.19aee0ea.js";import{M as Fe}from"./Meta.0634dcc3.js";import{Z as je}from"./Zoom.d20b0e48.js";import{T as u,F}from"./TextField.3f276378.js";import{S as j}from"./Select.6766f763.js";import{M as q}from"./MenuItem.90a3401d.js";import{I as qe,a as Be}from"./Switch.f325e36e.js";import{C as We}from"./CurrencyRupeeSharp.adc46bd0.js";import{A as k,a as x}from"./AlertTitle.76cb3f5c.js";import"./index.eed4a0d8.js";import"./index.module.002e5337.js";import"./Input.53bcfb30.js";var b={},Oe=Ce.exports;Object.defineProperty(b,"__esModule",{value:!0});var w=b.default=void 0,Le=Oe(ve()),B=Ie,Ve=(0,Le.default)([(0,B.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,B.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");w=b.default=Ve;const ze="_container_1s8oy_1",Re="_portraitContainer_1s8oy_2",Ue="_adminModeTag_1s8oy_23",He="_title_1s8oy_30",Je="_divider_1s8oy_39",Ze="_fieldTitle_1s8oy_47",Ke="_fieldTitleIcon_1s8oy_53",Qe="_sectionFirst_1s8oy_60",Ye="_sectionSecond_1s8oy_61",Xe="_sectionThird_1s8oy_62",et="_portraitSectionThird_1s8oy_70",tt="_formSection_1s8oy_76",st="_selectInput_1s8oy_82",at="_sectionFourth_1s8oy_86",it="_createButton_1s8oy_93",rt="_dateTimePicker_1s8oy_112",ot="_portaitDateTimePicker_1s8oy_116",nt="_startTimePicker_1s8oy_121",ct="_startEndPicker_1s8oy_122",lt="_selectStartTimeInput_1s8oy_127",dt="_switchBtn_1s8oy_134",t={container:ze,portraitContainer:Re,adminModeTag:Ue,title:He,divider:Je,fieldTitle:Ze,fieldTitleIcon:Ke,sectionFirst:Qe,sectionSecond:Ye,sectionThird:Xe,portraitSectionThird:et,formSection:tt,selectInput:st,sectionFourth:at,createButton:it,dateTimePicker:rt,portaitDateTimePicker:ot,startTimePicker:nt,startEndPicker:ct,selectStartTimeInput:lt,switchBtn:dt},W="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",O="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function wt(){const y=Pe(),_=ke(),[,g]=xe(),[p,L]=r.exports.useState(""),[f,V]=r.exports.useState(""),[z,S]=r.exports.useState(""),[T,R]=r.exports.useState(""),[M,U]=r.exports.useState(""),[d,H]=r.exports.useState(""),[J,Z]=r.exports.useState([]),[K,Q]=r.exports.useState([]),[D,Y]=r.exports.useState(""),[A,X]=r.exports.useState(""),[v,E]=r.exports.useState(""),[C,ee]=r.exports.useState(!1),[I,te]=r.exports.useState(!1),[se,ae]=r.exports.useState(""),[ie,re]=r.exports.useState(""),N=Se(s=>s);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(N.login.isAdmin||Ge.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{_("/match-queues")}))},[N.login.isAdmin,_]),r.exports.useEffect(()=>{const s=new AbortController,l=s.signal;return(async()=>{try{const ge=await(await fetch(O,{method:"POST",signal:l,headers:{"Content-Type":"application/json"},body:$e})).json();Z(ge.data.cities)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})(),()=>{s.abort()}},[]);const oe=s=>{(async()=>{try{const m=await(await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${s}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();Q(m.data.city.sportsVenues)}catch(c){c instanceof Error&&c.name==="TypeError"&&console.log(c.message)}})()},ne=async s=>{L(s.target.value),S("");const c=await(await fetch(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${s.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();c.data.city.cityId===s.target.value&&U(c.data.city.countryCode),oe(s.target.value)},ce=s=>{V(s.target.value)};function le(){g.push({options:{content:e(k,{severity:"info",children:a(x,{className:t.alertTitle,children:[p===""?"City name":f===""?"Turf name":T===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function de(){g.push({options:{content:e(k,{severity:"success",children:e(x,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function G(s){g.push({options:{content:e(k,{severity:"error",children:e(x,{className:t.alertTitle,children:s})})}})}const me={input:{cityId:p,charges:h.exports.parseInt(T),sportsVenueId:f,startTime:D,endTime:A,reservedPlayersCount:h.exports.parseInt(d),waitListPlayersCount:h.exports.parseInt(d)/2}},he=()=>{p===""||f===""||T===""||d===""?le():fetch(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${p}"
                      charges: ${h.exports.parseInt(T)}
                      sportsVenueId: "${f}"
                      startTime: "${D+"+0530"}"
                      endTime: "${A+"+0530"}"
                      reservedPlayersCount: ${h.exports.parseInt(d)}
                      waitListPlayersCount: ${h.exports.parseInt(d)/2}
                      credits: ${Number(v)}
                      testGame: ${C}
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:me.input})}).then(s=>s.json()).then(s=>{s.data.createEvent.isSuccessful===!1?G(s.data.createEvent.errorMessage):(de(),_("/match-queues"))}).catch(s=>{G(s.message),console.log(s)})},ue=()=>a(i,{className:t.sectionFirst,children:[e(n,{className:t.fieldTitle,children:"City Name"}),e(Ae,{className:t.fieldTitleIcon}),e(F,{className:t.selectInput,children:e(j,{id:"demo-simple-select-autowidth",value:p,onChange:ne,style:{width:"100%"},children:J.map((s,l)=>e(q,{value:s.cityId,style:{width:"100%"},children:s.cityName},l))})})]}),pe=()=>a(i,{className:t.sectionSecond,children:[e(n,{className:t.fieldTitle,children:"Turf Name"}),e(be,{className:t.fieldTitleIcon}),e(F,{className:t.selectInput,children:e(j,{id:"demo-simple-select-autowidth",value:f,onChange:ce,style:{width:"100%"},children:K.map((s,l)=>e(q,{value:s.sportsVenueId,style:{width:"100%"},onClick:()=>S(s.googleMapsLink),children:s.displayName},l))})})]}),fe=()=>a(i,{className:t.sectionThird,children:[e(n,{className:t.fieldTitle,children:"Google Map Link"}),e(Ee,{className:t.fieldTitleIcon}),e(u,{fullWidth:!0,value:z,onChange:s=>S(s.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),Te=()=>a(o,{className:y?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[a(i,{children:[e(n,{className:t.fieldTitle,children:"Start Time"}),e(w,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>Y(s.target.value)})]})}),e(i,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[a(i,{children:[e(n,{className:t.fieldTitle,children:"End Time"}),e(w,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>X(s.target.value)})]})})]}),ye=()=>a(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Event Charges"})}),e(u,{InputProps:{startAdornment:e(qe,{position:"start",children:M==="INR"?e(We,{}):M==="USD"?e(Me,{}):null})},fullWidth:!0,value:T,onChange:s=>{R(s.target.value),v||E(s.target.value)},placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Total Players"})}),e(u,{fullWidth:!0,value:d,onChange:s=>H(s.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),$=s=>e(i,{children:a(o,{className:t.startEndPicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:s==="testGame"?"Test Game":"Team Division"})}),e(Be,{className:t.switchBtn,checked:s==="testGame"?C:I,onChange:()=>{s==="testGame"?ee(!C):te(!I)},color:"default",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4ce95a"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4ce95a"}}})]})}),Ne=()=>a(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Team 1"})}),e(u,{fullWidth:!0,value:se,onChange:s=>ae(s.target.value),placeholder:"Team 1",id:"fullWidth",type:"text"})]})}),e(i,{className:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Team 2"})}),e(u,{fullWidth:!0,value:ie,onChange:s=>re(s.target.value),placeholder:"Team 2",id:"fullWidth",type:"text"})]})})]}),_e=()=>e(i,{className:t.sectionFourth,children:e(De,{variant:"contained",color:"success",className:t.createButton,onClick:he,children:"Add Game"})});return a(P,{children:[e(Fe,{title:"Add Game"}),N.login.isAdmin&&N.login.isLoggedIn?e(P,{children:e(je,{in:!0,style:{transitionDelay:"300ms"},children:a(o,{className:y?t.portraitContainer:t.container,children:[e(we,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),a(i,{children:[e(n,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),a(o,{className:t.formSection,children:[ue(),pe(),fe(),Te(),ye(),a(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Game Credits"})}),e(u,{fullWidth:!0,value:v,onChange:s=>E(s.target.value),placeholder:"Credits",id:"fullWidth",type:"number"})]})}),$("testGame"),$("teamDivision")]}),I&&Ne(),e("br",{}),_e()]})]})})}):e(P,{})]})}export{wt as default};

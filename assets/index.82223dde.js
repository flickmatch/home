import{j as a,K as i,a as d,M as S}from"./loginSlice.25a195ef.js";import{C as D,V as A,J as T,E as q,a as F,P as U}from"./Cities.c68852d5.js";import{bs as B,C as j,T as u,ag as J,bC as M,u as O,bD as $,bE as G,F as g,B as f}from"./App.3a5a0596.js";import{m as V}from"./map.839e9770.js";import{g as R,m as z}from"./index.4054521f.js";import{C as K}from"./Container.4bddcfa1.js";import{b as H,d as Q,c as W}from"./DialogActions.222dfd83.js";import{G as X}from"./Grid.0d3b809e.js";import"./constants.70367cb1.js";import"./TextField.13b2c64e.js";import"./Input.9e7a1bbb.js";import"./MenuItem.f7c23404.js";import"./CurrencyRupeeSharp.7ec2a33a.js";const Y="_frames_1lgq2_1",Z={frames:Y};function ee(){return a(K,{sx:{height:"100%"},children:i(B,{flexDirection:"column",children:[a("iframe",{src:R,width:"100%",height:"50%",className:Z.frames,frameBorder:"0",allowFullScreen:!0}),i(j,{flexDirection:"column",children:[a(u,{sx:{mt:2},variant:"h4",color:"error",children:"404 Not Found"}),a(J,{variant:"middle"}),a(u,{variant:"h4",sx:{color:o=>o.palette.info.main},children:z[404]})]})]})})}const re="_title_1fkn3_14",ae="_loading_1fkn3_22",se="_parentContainer_1fkn3_28",te="_portraitContainer_1fkn3_33",ne="_parent_1fkn3_28",oe="_portraitParent_1fkn3_41",ie="_accordion_1fkn3_50",ce="_mobileAccordion_1fkn3_56",le="_linkTag_1fkn3_60",de="_flexbox_1fkn3_64",me="_venue_1fkn3_69",ue="_sportsIcon_1fkn3_82",ye="_box_1fkn3_87",fe="_reservedPlayersContainer_1fkn3_92",pe="_editIcon_1fkn3_96",_e="_reservedPlayers_1fkn3_92",Pe="_waitListPlayers_1fkn3_115",he="_blink_1fkn3_122",t={title:re,loading:ae,parentContainer:se,portraitContainer:te,parent:ne,portraitParent:oe,accordion:ie,mobileAccordion:ce,linkTag:le,flexbox:de,venue:me,sportsIcon:ue,box:ye,reservedPlayersContainer:fe,editIcon:pe,reservedPlayers:_e,waitListPlayers:Pe,blink:he},ge=`${{}.VITE_API_URL}`;function xe(o){return/^[0-9]-\d{4}-\d{2}-\d{2}-[0-9]$/.test(o)}const Ie=async o=>{if(!xe(o))throw new Error("Invalid uniqueEventId");try{const m=await(await fetch(ge,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query event {
          event(uniqueEventId: "${o}") {
            currency
            startTime
            endTime
            eventId
            uniqueEventId
            displayTitle
            venueLocationLink
            charges
            date
            time
            venueName
            reservedPlayersCount
            waitListPlayersCount
            stripePaymentUrl
            reservedPlayersList {
              displayName
            }
            waitListPlayers{
                displayName
            }
          }
        }
      `})})).json();if(m.errors)throw new Error(m.errors[0].message);return m.data.event}catch(c){throw c}},Ce=()=>{const{id:o}=M(),c=O();$();const[m,x]=d.exports.useState(!1),[e,I]=d.exports.useState(null),[C,y]=d.exports.useState(!0),[p,_]=d.exports.useState(null);d.exports.useEffect(()=>{if(!o){_("Event ID is missing."),y(!1);return}(async()=>{try{y(!0);const s=await Ie(o);I(s)}catch(s){_(s.message)}finally{y(!1)}})()},[o]),d.exports.useEffect(()=>{const r=localStorage.getItem("adminIds"),s=localStorage.getItem("userData");if(s){const n=JSON.parse(s);if(r){const b=JSON.parse(r).data.map(v=>v.EmailId).includes(n.email);x(b)}}},[]);function N(r){return(r==null?void 0:r.eventId)!==void 0&&(r==null?void 0:r.eventId)!==null?String(r.eventId):"undefined"}function k(r){return(r==null?void 0:r.reservedPlayersCount)||0}const L=!0;function P(r){const s=(r==null?void 0:r.uniqueEventId)||"",n=s!=""?s.split("-"):"";let l="99999";return l=n.length>0?n[0]:"3",l}function h(r){const s=P(r),n=V.find(l=>l.cityId.toString()===s);return n==null?void 0:n.city}const E=(r,s)=>a(U,{displayName:r?r.displayName:"(Empty)",index:s},s);if(C)return a("div",{className:t.loading,children:a(G,{})});if(p)return i("div",{children:["Error: ",p]});if(!e)return a("div",{className:c?t.portraitContainer:t.parentContainer,children:a("div",{className:t.parent,children:a(ee,{})})});const w=()=>{var r;return i(S,{children:[a(u,{className:t.title,children:"Flickmatch Soccer"}),a(D,{cityId:P(e),cityName:h(e)||"",countryCode:"IN",dummyData:!1,events:[]}),i(H,{className:c?t.mobileAccordion:t.accordion,sx:{"&:before":{display:"none"}},expanded:L,children:[a(Q,{"aria-controls":"panel1a-content",id:"panel1a-header",children:i(g,{className:t.flexbox,children:[i(g,{className:t.venue,children:[a(A,{venueName:e==null?void 0:e.venueName,dummyData:!1,date:e==null?void 0:e.date}),c?null:a(T,{stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",eventId:N(e),reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],time:(e==null?void 0:e.endTime)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,team_division:!1,team1_color:"",team2_color:"",dummyData:!1,singleEvent:!0})]}),a(q,{uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",time:(e==null?void 0:e.time)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,eventId:(r=h(e))!=null?r:"",reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",team_division:!1,team1_color:"",team2_color:"",dummyData:!1})]})}),a(W,{className:"",children:i(f,{className:t.box,sx:{flexGrow:1},children:[i(f,{className:t.reservedPlayersContainer,children:[a(u,{className:t.reservedPlayers,children:"Reserved Players"}),m?a(F,{className:t.editIcon}):null]}),a(f,{children:a(X,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:(e==null?void 0:e.reservedPlayersCount)||0},(s,n)=>{const l=n<k(e)?e==null?void 0:e.reservedPlayersList[n]:null;return E(l,n)})})})]})})]})]})};return a("div",{className:c?t.portraitParent:t.parent,children:w()})},Ue=Ce;export{Ue as default};

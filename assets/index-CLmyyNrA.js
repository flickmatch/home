import{H as O,K as E,r as y,X as F,j as e}from"./loginSlice-BAcLY-Z0.js";import{a as U}from"./index-CjiP5WWF.js";import{r as B,u as $,b as J,B as g,T as p,S as v,a as D,d as G}from"./App-7awkNFdL.js";import{M as H}from"./Meta-JlvrsDey.js";import{a as R}from"./constants-DOxjhjLx.js";import{m as L}from"./map-Q7HwO6dx.js";import{Z as M}from"./Zoom-DFqeUW4D.js";import"./index.module-BrxHfbsF.js";var _={},w;function A(){if(w)return _;w=1;var s=O();Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var o=s(B()),m=E();return _.default=(0,o.default)((0,m.jsx)("path",{d:"M13.66 7c-.56-1.18-1.76-2-3.16-2H6V3h12v2h-3.26c.48.58.84 1.26 1.05 2H18v2h-2.02c-.25 2.8-2.61 5-5.48 5h-.73l6.73 7h-2.77L7 14v-2h3.5c1.76 0 3.22-1.3 3.46-3H6V7z"}),"CurrencyRupee"),_}var W=A();const T=U(W),X="_logo_zh0ju_19",K="_heading_zh0ju_24",V="_pageContainer_zh0ju_31",Z="_container_zh0ju_36",Q="_passCard_zh0ju_46",Y="_portraitPassCard_zh0ju_47",ee="_ribbon_zh0ju_67",ae="_title_zh0ju_116",te="_subtitle_zh0ju_125",se="_price_zh0ju_130",re="_currency_zh0ju_138",ie="_status_zh0ju_144",oe="_portraitDetails_zh0ju_160",ne="_details_zh0ju_168",ce="_buyNow_zh0ju_210",le="_footballIcon_zh0ju_235",ue="_cityNameContainer_zh0ju_241",pe="_citiesName_zh0ju_248",de="_citiesImg_zh0ju_258",me="_testingPurposeTag_zh0ju_262",a={logo:X,heading:K,pageContainer:V,container:Z,passCard:Q,portraitPassCard:Y,ribbon:ee,title:ae,subtitle:te,price:se,currency:re,status:ie,portraitDetails:oe,details:ne,buyNow:ce,footballIcon:le,cityNameContainer:ue,citiesName:pe,citiesImg:de,testingPurposeTag:me},r={data:{pass:[{passId:"pass5",cityId:"5",passType:"LimitedDays",totalGames:1e3,totalDays:30,price:1e3,title:"30 days pass",status:"Active",features:["No Waitlist","Join game in single click","Exclusive member events"],description:"Pay for 28 days, play 30 games"}]}},ye=void 0,he=(s,o,m,h,d)=>fetch(ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${s}"
                    email: "${o}",
                    currency: "${d}",
                    location: "${h}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(n=>n.json()).then(n=>{if(n.errors)throw new Error(n.errors[0].message);return m(n.data.initiatePassPayment.amount),n.data.initiatePassPayment.orderId}).catch(n=>{console.log(n)});function fe(){return new Promise(s=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.onload=()=>{s(!0)},o.onerror=()=>{s(!1)},document.body.appendChild(o)})}function ge(){const s=document.querySelector('script[src="https://checkout.razorpay.com/v1/checkout.js"]');s&&document.body.removeChild(s)}const je=(s,o,m,h,d,n,N)=>{async function b(){await fe()||alert("Razorpay SDK failed to load.Please try again later.");const x={key:"rzp_live_ba3UQjRIBXdeXt",amount:s,currency:"INR",name:"Flickmatch",description:"Flickmatch transaction for football match.",image:"https://firebasestorage.googleapis.com/v0/b/flickmatch-374a2.appspot.com/o/fm_rainbow.png?alt=media&token=1b06ae27-bf10-4974-9100-6bb5f2308314",order_id:o,callback_url:void 0,redirect:!0,prefill:{name:h,email:m,contact:d},notes:{address:"Tower 8 - Flat 1501, Nirvana Country Rd, The Close South, Sector 50, Gurugram, Haryana 122018"},modal:{ondismiss:function(){N(!1),n(""),ge(),delete j.Razorpay}},theme:{color:"#4ce95a"}},j=window;new j.Razorpay(x).open()}b()},k=void 0;function Se(){const s=$(),o=J(),[m,h]=y.useState([]),[d,n]=y.useState({name:"",email:"",phoneNumber:""}),[N,b]=y.useState(!0),[P,x]=y.useState(0),[j,I]=y.useState(""),C=F(t=>t),[l,q]=y.useState(null),z=window.location.pathname.split("/").pop();y.useEffect(()=>{const t=localStorage.getItem("userData");if(t){const i=JSON.parse(t);n({name:i.name,email:i.email,phoneNumber:""})}},[]),y.useEffect(()=>{(async()=>{try{const u=(await(await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query PassesForCity {
            passesForCity(cityId: "${z}") {
                  passId
                  cityId
                  passType
                  totalGames
                  totalDays
                  price
                  title
                  status
                  features
                  description
            }
              }`})})).json()).data.passesForCity;L.forEach(c=>{Number(z)===Number(c.cityId)&&q({city:c.city,cityId:c.cityId,currency:c.currency,iconUrl:c.iconUrl})}),h(u)}catch(i){h(r.data.pass),i instanceof Error&&i.name==="TypeError"&&(alert(i),o("/match-queues"))}})()},[z]);const S=(t,i,f)=>{C.login.isLoggedIn?N?he(t,d.email,x,i,f).then(u=>{I(u)}).catch(u=>{alert(u)}):fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${t}"
                    email: "${d.email}",
                    currency: "INR",
                    location: "${i}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(c=>c.json()).then(c=>{c.errors&&alert(c.errors[0].message)}).catch(c=>{alert(c)}):(alert("Please login to proceed with the purchase."),o("/login"))};return j&&je(P,j,d.email,d.name,d.phoneNumber,I,b),e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Game Passes"}),e.jsx(M,{in:!0,style:{transitionDelay:"300ms"},children:e.jsxs(g,{className:a.pageContainer,children:[e.jsx(p,{variant:"h3",className:a.heading,children:"Flickmatch Pass"}),l!=null?e.jsxs("div",{className:a.cityNameContainer,children:[e.jsx(p,{className:a.citiesName,children:l.city},l.cityId),e.jsx("img",{className:a.citiesImg,src:l.iconUrl,alt:l.city,height:"40px"})]}):null,e.jsx(g,{className:a.container,children:e.jsxs(e.Fragment,{children:[m.length>0&&l!=null?m.map((t,i)=>e.jsxs(g,{className:s?a.portraitPassCard:a.passCard,children:[e.jsx("img",{src:R,alt:"logo",className:a.logo}),e.jsx(p,{variant:"h3",className:a.title,children:t.title?t.title:r.data.pass[0].title}),e.jsx(p,{className:a.subtitle,children:t.description?t.description:r.data.pass[0].description}),e.jsxs(p,{className:a.price,children:[e.jsx(T,{className:a.currency}),t.price?t.price:r.data.pass[0].price]}),e.jsx(p,{className:a.status,children:t.status?t.status:r.data.pass[0].status}),e.jsx("ul",{className:s?a.portraitDetails:a.details,children:t.features!==null&&t.features.length>0?t.features.map((f,u)=>e.jsxs("li",{children:[e.jsx(v,{className:a.footballIcon}),f]},u)):r.data.pass[0].features.map((f,u)=>e.jsxs("li",{children:[e.jsx(v,{className:a.footballIcon}),f]},u))}),e.jsx(g,{className:a.ribbon,children:t.title==="Unlimited game pass"?e.jsx("span",{style:{fontWeight:600},children:"Best Deal"}):e.jsxs("span",{children:["For"," ",t.totalDays?t.totalDays:r.data.pass[0].totalDays," ","Days"]})}),e.jsx(D,{className:a.buyNow,onClick:()=>S(t.passId,l.city,l.currency),children:"Buy Now"})]},i)):null,C.login.isAdmin&&C.login.isLoggedIn&&l!=null?e.jsxs(g,{className:s?a.portraitPassCard:a.passCard,children:[e.jsx(G,{label:"for testing",color:"primary",variant:"outlined",className:a.testingPurposeTag}),e.jsx("img",{src:R,alt:"logo",className:a.logo}),e.jsx(p,{variant:"h3",className:a.title,children:r.data.pass[0].title}),e.jsx(p,{className:a.subtitle,children:r.data.pass[0].description}),e.jsxs(p,{className:a.price,children:[e.jsx(T,{className:a.currency}),r.data.pass[0].price]}),e.jsx(p,{className:a.status,children:r.data.pass[0].status}),e.jsx("ul",{className:s?a.portraitDetails:a.details,children:r.data.pass[0].features?r.data.pass[0].features.map((t,i)=>e.jsxs("li",{children:[e.jsx(v,{className:a.footballIcon}),t]},i)):null}),e.jsx(g,{className:a.ribbon,children:r.data.pass[0].status==="Unlimited game pass"?e.jsx("span",{style:{fontWeight:600},children:"Best Deal"}):e.jsxs("span",{children:["For ",r.data.pass[0].totalDays," Days"]})}),e.jsx(D,{className:a.buyNow,onClick:()=>S(r.data.pass[0].passId,l.city,l.currency),children:"Buy Now"})]}):null]})})]})})]})}export{Se as default};

import{a as r,E as s,G as _,j as e}from"./index.93d5be9a.js";import"./index.fc726bb4.js";import{r as ue,i as pe,a as he,bd as fe,bc as ye,F as o,D as Te,B as i,T as c,bi as _e,bf as Ne,b as Se}from"./App.5a2afe27.js";import{S as ge,d as Ie}from"./sweetalert2.all.ec24e05c.js";import{d as ve}from"./CrisisAlertOutlined.6db97eb4.js";import{l as d,C as Ce,m as Pe}from"./map.1b1f7a85.js";import{u as ke,M as xe,H as Ee,F as Ae}from"./Header.1e0b26d5.js";import{a as De}from"./loginSlice.30540691.js";import{q as be}from"./constants.70367cb1.js";import{Z as we,M as b,A as w,a as M}from"./Zoom.cad4ff58.js";import{a as F,S as $,T as N}from"./TextField.46337ec8.js";import{I as Me}from"./InputAdornment.0d033a8e.js";import{u as Fe}from"./useDispatch.14c05b88.js";import"./index.912ef22b.js";import"./Input.1bd4081a.js";var g={},$e=pe.exports;Object.defineProperty(g,"__esModule",{value:!0});var S=g.default=void 0,je=$e(ue()),j=he,qe=(0,je.default)([(0,j.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,j.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");S=g.default=qe;const Oe="_container_1uyn2_1",Ge="_portraitContainer_1uyn2_2",Le="_adminModeTag_1uyn2_18",Ve="_title_1uyn2_25",Be="_divider_1uyn2_32",He="_fieldTitle_1uyn2_40",We="_fieldTitleIcon_1uyn2_46",ze="_sectionFirst_1uyn2_53",Re="_sectionSecond_1uyn2_54",Ue="_sectionThird_1uyn2_55",Je="_portraitSectionThird_1uyn2_63",Ze="_formSection_1uyn2_69",Qe="_selectInput_1uyn2_75",Ye="_sectionFourth_1uyn2_79",Ke="_createButton_1uyn2_86",Xe="_dateTimePicker_1uyn2_104",et="_portaitDateTimePicker_1uyn2_108",tt="_startTimePicker_1uyn2_113",at="_startEndPicker_1uyn2_114",st="_selectStartTimeInput_1uyn2_119",t={container:Oe,portraitContainer:Ge,adminModeTag:Le,title:Ve,divider:Be,fieldTitle:He,fieldTitleIcon:We,sectionFirst:ze,sectionSecond:Re,sectionThird:Ue,portraitSectionThird:Je,formSection:Ze,selectInput:Qe,sectionFourth:Ye,createButton:Ke,dateTimePicker:Xe,portaitDateTimePicker:et,startTimePicker:tt,startEndPicker:at,selectStartTimeInput:st},it="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",q="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function St(){const y=ke(),I=fe(),[,v]=ye(),[O,C]=r.exports.useState(!1),[p,G]=r.exports.useState(""),[h,L]=r.exports.useState(""),[V,T]=r.exports.useState(""),[f,B]=r.exports.useState(""),[P,H]=r.exports.useState(""),[m,W]=r.exports.useState(""),[z,R]=r.exports.useState([]),[U,J]=r.exports.useState([]),[k,Z]=r.exports.useState(""),[x,Q]=r.exports.useState(""),Y={}.VITE_GOOGLE_SHEET_API,E=Fe();r.exports.useEffect(()=>{const a=localStorage.getItem("userData");if(a){const n=JSON.parse(a);n.email==="admin@flickmatch.in"?C(!0):(async()=>{const D=(await(await fetch(`${Y}`)).json()).data.map(me=>me.EmailId).includes(n.email);C(D),D||ge.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{I("/match-queues")})})(),E(De())}},[E]),r.exports.useEffect(()=>{const a=new AbortController,n=a.signal;return(async()=>{try{const A=await(await fetch(q,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:be})).json();R(A.data.cities)}catch(l){l instanceof Error&&l.name==="TypeError"&&console.log(l.message)}})(),()=>{a.abort()}},[]);const K=a=>{(async()=>{try{const l=await(await fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();J(l.data.city.sportsVenues)}catch(u){u instanceof Error&&u.name==="TypeError"&&console.log(u.message)}})()},X=a=>{G(a.target.value),T(""),Pe.forEach(n=>{n.cityId===d.exports.parseInt(a.target.value)&&H(n.currency)}),K(a.target.value)},ee=a=>{L(a.target.value)};function te(){v.push({options:{content:e(w,{severity:"error",children:s(M,{className:t.alertTitle,children:[p===""?"City name":h===""?"Turf name":f===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function ae(){v.push({options:{content:e(w,{severity:"success",children:e(M,{className:t.alertTitle,children:"Game Added Successfully"})})}})}const se={input:{cityId:p,charges:d.exports.parseInt(f),sportsVenueId:h,startTime:k,endTime:x,reservedPlayersCount:d.exports.parseInt(m),waitListPlayersCount:d.exports.parseInt(m)/2}},ie=()=>{p===""||h===""||f===""||m===""?te():fetch(it,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${p}"
                      charges: ${d.exports.parseInt(f)},
                      sportsVenueId: "${h}",
                      startTime: "${k+"+0530"}",
                      endTime: "${x+"+0530"}",
                      reservedPlayersCount: ${d.exports.parseInt(m)},
                      waitListPlayersCount: ${d.exports.parseInt(m)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:se.input})}).then(a=>a.json()).then(a=>{if(a.errors)throw new Error(a.errors[0].message);ae(),I("/match-queues"),console.log(a.data)}).catch(a=>{console.log(a)})},re=()=>s(i,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(Ie,{className:t.fieldTitleIcon}),e(F,{className:t.selectInput,children:e($,{id:"demo-simple-select-autowidth",value:p,onChange:X,style:{width:"100%"},children:z.map((a,n)=>e(b,{value:a.cityId,style:{width:"100%"},children:a.cityName},n))})})]}),ne=()=>s(i,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(_e,{className:t.fieldTitleIcon}),e(F,{className:t.selectInput,children:e($,{id:"demo-simple-select-autowidth",value:h,onChange:ee,style:{width:"100%"},children:U.map((a,n)=>e(b,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>T(a.googleMapsLink),children:a.displayName},n))})})]}),oe=()=>s(i,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(ve,{className:t.fieldTitleIcon}),e(N,{fullWidth:!0,value:V,onChange:a=>T(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),ce=()=>s(o,{className:y?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(S,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>Z(a.target.value)})]})}),e(i,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(S,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>Q(a.target.value)})]})})]}),le=()=>s(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(N,{InputProps:{startAdornment:e(Me,{position:"start",children:P==="INR"?e(Ce,{}):P==="USD"?e(Ne,{}):null})},fullWidth:!0,value:f,onChange:a=>B(a.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(N,{fullWidth:!0,value:m,onChange:a=>W(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),de=()=>e(i,{className:t.sectionFourth,children:e(Se,{variant:"contained",color:"success",className:t.createButton,onClick:ie,children:"Add Game"})});return s(_,{children:[e(xe,{title:"Add Game"}),e("div",{children:e(Ee,{})}),O?s(_,{children:[e(we,{in:!0,style:{transitionDelay:"300ms"},children:s(o,{className:y?t.portraitContainer:t.container,children:[e(Te,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(o,{className:t.formSection,children:[re(),ne(),oe(),ce(),le(),de()]})]})}),e(Ae,{})]}):e(_,{})]})}export{St as default};

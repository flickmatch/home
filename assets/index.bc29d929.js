import{a as i,E as s,G as _,j as e}from"./index.a525f6e3.js";import{r as pe,i as he,a as fe,bd as Te,bc as ye,F as o,D as _e,B as r,T as c,bh as ge,b as Ne}from"./App.a68fbe5a.js";import{S as Se,d as Ie}from"./sweetalert2.all.2b7ebfe3.js";import{l as d,C as ve,d as Ce,m as Pe}from"./map.c8e78e03.js";import{d as ke}from"./CrisisAlertOutlined.dbed766c.js";import{u as xe,M as Ee,H as Ae,F as we}from"./Header.4aca166f.js";import{q as De}from"./constants.70367cb1.js";import{Z as be,M as w,A as D,a as b}from"./Zoom.ace7c1ce.js";import{d as M,S as F,T as g}from"./TextField.6ef757e3.js";import{I as Me}from"./InputAdornment.10a85c58.js";import"./index.67767c37.js";import"./index.module.325f48be.js";var S={},Fe=he.exports;Object.defineProperty(S,"__esModule",{value:!0});var N=S.default=void 0,$e=Fe(pe()),$=fe,je=(0,$e.default)([(0,$.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,$.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");N=S.default=je;const qe="_container_1uyn2_1",Oe="_portraitContainer_1uyn2_2",Le="_adminModeTag_1uyn2_18",Ge="_title_1uyn2_25",Ve="_divider_1uyn2_32",Be="_fieldTitle_1uyn2_40",He="_fieldTitleIcon_1uyn2_46",We="_sectionFirst_1uyn2_53",ze="_sectionSecond_1uyn2_54",Re="_sectionThird_1uyn2_55",Ue="_portraitSectionThird_1uyn2_63",Je="_formSection_1uyn2_69",Ze="_selectInput_1uyn2_75",Qe="_sectionFourth_1uyn2_79",Ye="_createButton_1uyn2_86",Ke="_dateTimePicker_1uyn2_104",Xe="_portaitDateTimePicker_1uyn2_108",et="_startTimePicker_1uyn2_113",tt="_startEndPicker_1uyn2_114",at="_selectStartTimeInput_1uyn2_119",t={container:qe,portraitContainer:Oe,adminModeTag:Le,title:Ge,divider:Ve,fieldTitle:Be,fieldTitleIcon:He,sectionFirst:We,sectionSecond:ze,sectionThird:Re,portraitSectionThird:Ue,formSection:Je,selectInput:Ze,sectionFourth:Qe,createButton:Ye,dateTimePicker:Ke,portaitDateTimePicker:Xe,startTimePicker:et,startEndPicker:tt,selectStartTimeInput:at},st="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",j="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function Tt(){const T=xe(),I=Te(),[,v]=ye(),[q,O]=i.exports.useState(!1),[L,C]=i.exports.useState(!1),[p,G]=i.exports.useState(""),[h,V]=i.exports.useState(""),[B,y]=i.exports.useState(""),[f,H]=i.exports.useState(""),[P,W]=i.exports.useState(""),[u,z]=i.exports.useState(""),[R,U]=i.exports.useState([]),[J,Z]=i.exports.useState([]),[k,Q]=i.exports.useState(""),[x,Y]=i.exports.useState(""),K={}.VITE_GOOGLE_SHEET_API;i.exports.useEffect(()=>{const a=localStorage.getItem("userData");if(a){const n=JSON.parse(a);n.email==="admin@flickmatch.in"?C(!0):(async()=>{const A=(await(await fetch(`${K}`)).json()).data.map(me=>me.EmailId).includes(n.email);C(A),A||Se.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{I("/match-queues")})})(),O(!0)}},[]),i.exports.useEffect(()=>{const a=new AbortController,n=a.signal;return(async()=>{try{const E=await(await fetch(j,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:De})).json();U(E.data.cities)}catch(l){l instanceof Error&&l.name==="TypeError"&&console.log(l.message)}})(),()=>{a.abort()}},[]);const X=a=>{(async()=>{try{const l=await(await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();Z(l.data.city.sportsVenues)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})()},ee=a=>{G(a.target.value),y(""),Pe.forEach(n=>{n.cityId===d.exports.parseInt(a.target.value)&&W(n.currency)}),X(a.target.value)},te=a=>{V(a.target.value)};function ae(){v.push({options:{content:e(D,{severity:"error",children:s(b,{className:t.alertTitle,children:[p===""?"City name":h===""?"Turf name":f===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function se(){v.push({options:{content:e(D,{severity:"success",children:e(b,{className:t.alertTitle,children:"Turf Added Successfully"})})}})}const ie={input:{cityId:p,charges:d.exports.parseInt(f),sportsVenueId:h,startTime:k,endTime:x,reservedPlayersCount:d.exports.parseInt(u),waitListPlayersCount:d.exports.parseInt(u)/2}},re=()=>{p===""||h===""||f===""||u===""?ae():fetch(st,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${p}"
                      charges: ${d.exports.parseInt(f)},
                      sportsVenueId: "${h}",
                      startTime: "${k+"+0530"}",
                      endTime: "${x+"+0530"}",
                      reservedPlayersCount: ${d.exports.parseInt(u)},
                      waitListPlayersCount: ${d.exports.parseInt(u)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:ie.input})}).then(a=>a.json()).then(a=>{if(a.errors)throw new Error(a.errors[0].message);se(),I("/match-queues"),console.log(a.data)}).catch(a=>{console.log(a)})},ne=()=>s(r,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(Ie,{className:t.fieldTitleIcon}),e(M,{className:t.selectInput,children:e(F,{id:"demo-simple-select-autowidth",value:p,onChange:ee,style:{width:"100%"},children:R.map((a,n)=>e(w,{value:a.cityId,style:{width:"100%"},children:a.cityName},n))})})]}),oe=()=>s(r,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(ge,{className:t.fieldTitleIcon}),e(M,{className:t.selectInput,children:e(F,{id:"demo-simple-select-autowidth",value:h,onChange:te,style:{width:"100%"},children:J.map((a,n)=>e(w,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>y(a.googleMapsLink),children:a.displayName},n))})})]}),ce=()=>s(r,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(ke,{className:t.fieldTitleIcon}),e(g,{fullWidth:!0,value:B,onChange:a=>y(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),le=()=>s(o,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[s(r,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(N,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>Q(a.target.value)})]})}),e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[s(r,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(N,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>Y(a.target.value)})]})})]}),de=()=>s(o,{className:t.sectionThird,children:[e(r,{className:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(g,{InputProps:{startAdornment:e(Me,{position:"start",children:P==="INR"?e(ve,{}):P==="USD"?e(Ce,{}):null})},fullWidth:!0,value:f,onChange:a=>H(a.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(r,{className:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(g,{fullWidth:!0,value:u,onChange:a=>z(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),ue=()=>e(r,{className:t.sectionFourth,children:e(Ne,{variant:"contained",color:"success",className:t.createButton,onClick:re,children:"Add Game"})});return s(_,{children:[e(Ee,{title:"Add Game"}),e("div",{children:e(Ae,{loggedIn:q})}),L?s(_,{children:[e(be,{in:!0,style:{transitionDelay:"300ms"},children:s(o,{className:T?t.portraitContainer:t.container,children:[e(_e,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(r,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(r,{className:t.divider})]}),s(o,{className:t.formSection,children:[ne(),oe(),ce(),le(),de(),ue()]})]})}),e(we,{})]}):e(_,{})]})}export{Tt as default};

import{a as y,W as $,K as i,M as j,j as t}from"./loginSlice.25a195ef.js";import{r as A,i as F,a as U,u as B,e as E,B as g,T as d,d as S,b as x,f as H}from"./App.5c504f22.js";import{M}from"./Meta.d217144f.js";import{m as G}from"./map.839e9770.js";import{Z as J}from"./Zoom.a70f2839.js";import"./index.c254ce98.js";import"./index.module.51bb9f99.js";var D={},L=F.exports;Object.defineProperty(D,"__esModule",{value:!0});var w=D.default=void 0,W=L(A()),K=U,V=(0,W.default)((0,K.jsx)("path",{d:"M13.66 7c-.56-1.18-1.76-2-3.16-2H6V3h12v2h-3.26c.48.58.84 1.26 1.05 2H18v2h-2.02c-.25 2.8-2.61 5-5.48 5h-.73l6.73 7h-2.77L7 14v-2h3.5c1.76 0 3.22-1.3 3.46-3H6V7h7.66z"}),"CurrencyRupee");w=D.default=V;const R="https://firebasestorage.googleapis.com/v0/b/flickmatch-374a2.appspot.com/o/fm_rainbow.png?alt=media&token=1b06ae27-bf10-4974-9100-6bb5f2308314",X="_logo_12zom_19",Z="_heading_12zom_24",Q="_pageContainer_12zom_29",Y="_container_12zom_34",aa="_passCard_12zom_44",ta="_portraitPassCard_12zom_45",ea="_ribbon_12zom_65",sa="_title_12zom_114",oa="_subtitle_12zom_123",ra="_price_12zom_128",ia="_currency_12zom_136",na="_status_12zom_142",ca="_pulse_12zom_1",la="_portraitDetails_12zom_158",pa="_details_12zom_166",ma="_sportsIcon_12zom_193",da="_buyNow_12zom_208",ua="_footballIcon_12zom_233",ya="_cityNameContainer_12zom_239",ha="_citiesName_12zom_246",fa="_citiesImg_12zom_256",_a="_testingPurposeTag_12zom_260",ga="_blinkAnimation_12zom_1",a={logo:X,heading:Z,pageContainer:Q,container:Y,passCard:aa,portraitPassCard:ta,ribbon:ea,title:sa,subtitle:oa,price:ra,currency:ia,status:na,pulse:ca,portraitDetails:la,details:pa,sportsIcon:ma,buyNow:da,footballIcon:ua,cityNameContainer:ya,citiesName:ha,citiesImg:fa,testingPurposeTag:_a,blinkAnimation:ga},s={data:{pass:[{passId:"pass5",cityId:"5",passType:"LimitedDays",totalGames:1e3,totalDays:30,price:1e3,title:"30 days pass",status:"Active",features:["No Waitlist","Join game in single click","Exclusive member events"],description:"Pay for 28 days, play 30 games"}]}},ba=(o,p,h,f,u)=>fetch("https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${o}"
                    email: "${p}",
                    currency: "${u}",
                    location: "${f}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(n=>n.json()).then(n=>{if(n.errors)throw new Error(n.errors[0].message);return h(n.data.initiatePassPayment.amount),n.data.initiatePassPayment.orderId}).catch(n=>{console.log(n)});function Na(){return new Promise(o=>{const p=document.createElement("script");p.src="https://checkout.razorpay.com/v1/checkout.js",p.onload=()=>{o(!0)},p.onerror=()=>{o(!1)},document.body.appendChild(p)})}function Ia(){const o=document.querySelector('script[src="https://checkout.razorpay.com/v1/checkout.js"]');o&&document.body.removeChild(o)}const Ca=(o,p,h,f,u,n,I)=>{async function C(){await Na()||alert("Razorpay SDK failed to load.Please try again later.");const z={key:"rzp_live_ba3UQjRIBXdeXt",amount:o,currency:"INR",name:"Flickmatch",description:"Flickmatch transaction for football match.",image:"https://firebasestorage.googleapis.com/v0/b/flickmatch-374a2.appspot.com/o/fm_rainbow.png?alt=media&token=1b06ae27-bf10-4974-9100-6bb5f2308314",order_id:p,callback_url:"https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/processPassPayment",redirect:!0,prefill:{name:f,email:h,contact:u},notes:{address:"Tower 8 - Flat 1501, Nirvana Country Rd, The Close South, Sector 50, Gurugram, Haryana 122018"},modal:{ondismiss:function(){I(!1),n(""),Ia(),delete b.Razorpay}},theme:{color:"#4ce95a"}},b=window;new b.Razorpay(z).open()}C()},O="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql";function ja(){const o=B(),p=E(),[h,f]=y.exports.useState([]),[u,n]=y.exports.useState({name:"",email:"",phoneNumber:""}),[I,C]=y.exports.useState(!0),[k,z]=y.exports.useState(0),[b,P]=y.exports.useState(""),N=$(e=>e),[l,q]=y.exports.useState(null),v=window.location.pathname.split("/").pop();y.exports.useEffect(()=>{const e=localStorage.getItem("userData");if(e){const r=JSON.parse(e);n({name:r.name,email:r.email,phoneNumber:""})}},[]),y.exports.useEffect(()=>{(async()=>{try{const m=(await(await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query PassesForCity {
            passesForCity(cityId: "${v}") {
                  passId
                  cityId
                  passType
                  totalGames
                  totalDays
                  price
                  title
                  status
                  features
                  description
            }
              }`})})).json()).data.passesForCity;G.forEach(c=>{Number(v)===Number(c.cityId)&&q({city:c.city,cityId:c.cityId,currency:c.currency,iconUrl:c.iconUrl})}),f(m)}catch(r){f(s.data.pass),r instanceof Error&&r.name==="TypeError"&&(alert(r),p("/match-queues"))}})()},[v]);const T=(e,r,_)=>{I?ba(e,u.email,z,r,_).then(m=>{P(m)}).catch(m=>{alert(m)}):fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${e}"
                    email: "${u.email}",
                    currency: "INR",
                    location: "${r}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(c=>c.json()).then(c=>{c.errors&&alert(c.errors[0].message)}).catch(c=>{alert(c)})};return b&&Ca(k,b,u.email,u.name,u.phoneNumber,P,C),i(j,{children:[t(M,{title:"Game Passes"}),N.login.isAdmin&&N.login.isLoggedIn?t(J,{in:!0,style:{transitionDelay:"300ms"},children:i(g,{className:a.pageContainer,children:[t(d,{variant:"h3",className:a.heading,children:"Flickmatch Pass"}),l!=null?i("div",{className:a.cityNameContainer,children:[t(d,{className:a.citiesName,children:l.city},l.cityId),t("img",{className:a.citiesImg,src:l.iconUrl,alt:l.city,height:"40px"})]}):null,t(g,{className:a.container,children:i(j,{children:[h.length>0&&l!=null?h.map((e,r)=>i(g,{className:o?a.portraitPassCard:a.passCard,children:[t("img",{src:R,alt:"logo",className:a.logo}),t(d,{variant:"h3",className:a.title,children:e.title?e.title:s.data.pass[0].title}),t(d,{className:a.subtitle,children:e.description?e.description:s.data.pass[0].description}),i(d,{className:a.price,children:[t(w,{className:a.currency}),e.price?e.price:s.data.pass[0].price]}),t(d,{className:a.status,children:e.status?e.status:s.data.pass[0].status}),t("ul",{className:o?a.portraitDetails:a.details,children:e.features?e.features.map((_,m)=>i("li",{children:[t(S,{className:a.footballIcon}),_]},m)):s.data.pass[0].features.map((_,m)=>i("li",{children:[t(S,{className:a.footballIcon}),_]},m))}),t(g,{className:a.ribbon,children:e.title==="Unlimited game pass"?t("span",{style:{fontWeight:600},children:"Best Deal"}):i("span",{children:["For"," ",e.totalDays?e.totalDays:s.data.pass[0].totalDays," ","Days"]})}),t(x,{className:a.buyNow,onClick:()=>T(e.passId,l.city,l.currency),children:"Buy Now"})]},r)):null,N.login.isAdmin&&N.login.isLoggedIn&&l!=null?i(g,{className:o?a.portraitPassCard:a.passCard,children:[t(H,{label:"for testing",color:"primary",variant:"outlined",className:a.testingPurposeTag}),t("img",{src:R,alt:"logo",className:a.logo}),t(d,{variant:"h3",className:a.title,children:s.data.pass[0].title}),t(d,{className:a.subtitle,children:s.data.pass[0].description}),i(d,{className:a.price,children:[t(w,{className:a.currency}),s.data.pass[0].price]}),t(d,{className:a.status,children:s.data.pass[0].status}),t("ul",{className:o?a.portraitDetails:a.details,children:s.data.pass[0].features?s.data.pass[0].features.map((e,r)=>i("li",{children:[t(S,{className:a.footballIcon}),e]},r)):null}),t(g,{className:a.ribbon,children:s.data.pass[0].status==="Unlimited game pass"?t("span",{style:{fontWeight:600},children:"Best Deal"}):i("span",{children:["For ",s.data.pass[0].totalDays," Days"]})}),t(x,{className:a.buyNow,onClick:()=>T(s.data.pass[0].passId,l.city,l.currency),children:"Buy Now"})]}):t("span",{children:"no pass to display"})]})})]})}):null]})}export{ja as default};

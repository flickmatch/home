import{a as m,E as c,G as U,j as t}from"./index.a525f6e3.js";import{r as q,i as R,a as W,bd as H,bc as k,B as r,d as J,T as p,b as f,bg as $}from"./App.4a72efe8.js";import{g as Z,G as z,s as V,c as X,a as Y,b as K,o as Q}from"./index-fbeda258.e6c21685.js";import"./index.esm2017.601a6ba4.js";import{u as ee,M as te,H as ie,F as ne}from"./Header.b52c7f55.js";import{T as x,d as oe,e as ae}from"./TextField.c12c6d67.js";import"./index.716f6519.js";import"./tslib.es6.5e9bfff6.js";import"./index.module.325f48be.js";var v={},se=R.exports;Object.defineProperty(v,"__esModule",{value:!0});var B=v.default=void 0;ce(m.exports);var re=se(q()),le=W;function T(i){if(typeof WeakMap!="function")return null;var u=new WeakMap,s=new WeakMap;return(T=function(l){return l?s:u})(i)}function ce(i,u){if(!u&&i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var s=T(u);if(s&&s.has(i))return s.get(i);var l={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in i)if(g!=="default"&&Object.prototype.hasOwnProperty.call(i,g)){var d=_?Object.getOwnPropertyDescriptor(i,g):null;d&&(d.get||d.set)?Object.defineProperty(l,g,d):l[g]=i[g]}return l.default=i,s&&s.set(i,l),l}var ge=(0,re.default)((0,le.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");B=v.default=ge;const ue="_container_1hwje_5",de="_leftSide_1hwje_16",pe="_portraitLeftSide_1hwje_22",me="_rightSide_1hwje_36",he="_portraitRightSide_1hwje_37",fe="_loginContainer_1hwje_51",_e="_portraitLoginContainer_1hwje_52",Se="_slideIn_1hwje_1",we="_sportsIconSection_1hwje_75",Le="_sportsIcon_1hwje_75",ve="_loginSignupText_1hwje_85",ye="_getStarted_1hwje_91",Ie="_signUpImmediately_1hwje_97",Ne="_loginSignupButton_1hwje_102",xe="_googleLoginButton_1hwje_107",Be="_emailLoginButton_1hwje_108",Te="_portraitEmailLoginButton_1hwje_109",je="_portraitGoogleLoginButton_1hwje_110",Ce="_loginDivider_1hwje_135",Oe="_loginOption_1hwje_143",Me="_emailSignup_1hwje_150",Pe="_emailField_1hwje_169",Ee="_passwordField_1hwje_170",De="_signupText_1hwje_179",e={container:ue,leftSide:de,portraitLeftSide:pe,rightSide:me,portraitRightSide:he,loginContainer:fe,portraitLoginContainer:_e,slideIn:Se,sportsIconSection:we,sportsIcon:Le,loginSignupText:ve,getStarted:ye,signUpImmediately:Ie,loginSignupButton:Ne,googleLoginButton:xe,emailLoginButton:Be,portraitEmailLoginButton:Te,portraitGoogleLoginButton:je,loginDivider:Ce,loginOption:Oe,emailSignup:Me,emailField:Pe,passwordField:Ee,signupText:De},Fe="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql";function Je(){const i=ee(),u=H(),s=Z(),l=new z,[,_]=k(),[g,d]=m.exports.useState(!1),[j,y]=m.exports.useState(!1),[C,O]=m.exports.useState(!1),[S,M]=m.exports.useState(""),[I,P]=m.exports.useState(""),[w,h]=m.exports.useState(!1),E=()=>{Q(s,n=>{if(n){const o=n.metadata.creationTime,a=n.metadata.lastSignInTime;o===a?(console.log("User is logging in for the first time"),N(n.email,n.displayName)):console.log("User has logged in before")}})},N=(n,o)=>{fetch(Fe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation createUser {
        createUser(input: {
        email: "${n}"
        name: "${o}"
        }) {
            isSuccessful
            userId
        }
        }`})}).then(a=>a.json()).then(a=>{if(a.errors)throw new Error(a.errors[0].message)}).catch(a=>{console.log(a)})},D=()=>{V(s,l).then(n=>{const o=n.user,a={email:o.email,id:o.uid,name:o.displayName,picture:o.photoURL};o.metadata.creationTime===o.metadata.lastSignInTime&&N(o.email,o.displayName),localStorage.setItem("userData",JSON.stringify(a)),d(!0),u("/match-queues")}).catch(n=>{const o=n.message;console.log(o)})},L=n=>_.push({options:{content:t(oe,{severity:"error",children:t(ae,{className:e.alertTitle,children:n})})}}),F=()=>{X(s,S,I).then(n=>{Y(n.user).then(()=>{alert("Email verification link sent successfully! Please login after email verification successful")}),h(!1),s.signOut()}).catch(n=>{const o=n.message.slice(10);o==="Error (auth/email-already-in-use)."?(L("Email id already exists! Try logging in with google"),h(!1),y(!1)):L(o)})},b=()=>{K(s,S,I).then(n=>{const o=S.split("@")[0],a=n.user;if(a.emailVerified){const A={email:a.email,id:a.uid,name:o};localStorage.setItem("userData",JSON.stringify(A)),E(),d(!0),u("/match-queues")}else alert("Please verify your email before logging in")}).catch(n=>{const o=n.message.slice(10);L(o)})},G=()=>{O(!0),y(!0)};return c(U,{children:[t(te,{title:"Login/Signup"}),t("div",{children:t(ie,{loggedIn:g})}),c(r,{className:e.container,children:[t(r,{className:i?e.portraitLeftSide:e.leftSide,children:t("img",{src:"https://images.unsplash.com/photo-1560272564-c83b66b1ad12?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Zm9vdGJhbGwlMjBwbGF5ZXJ8ZW58MHx8MHx8fDA%3D",alt:"Football Image"})}),t(r,{className:i?e.portraitRightSide:e.rightSide,children:c(r,{className:i?e.portraitLoginContainer:e.loginContainer,children:[t(r,{className:e.sportsIconSection,children:t(J,{className:e.sportsIcon})}),c(r,{className:e.loginSignupHeader,children:[w?t(p,{className:e.loginSignupText,children:"Sign up"}):C?t(p,{className:e.loginSignupText,children:"Login"}):t(p,{className:e.loginSignupText,children:"Login / Sign up"}),t(p,{className:e.getStarted,children:"Let's get Started"}),c(p,{className:e.signUpImmediately,children:["Join our community and start your ",t("br",{}),"journey right away!"]})]}),j?c(r,{className:e.emailSignup,children:[t(x,{id:"outlined-basic",label:"Email",variant:"outlined",onChange:n=>M(n.target.value),className:e.emailField}),t(x,{id:"outlined-basic",label:"Password",variant:"outlined",type:"password",onChange:n=>P(n.target.value),className:e.passwordField}),w?t(f,{variant:"outlined",className:i?e.portraitEmailLoginButton:e.emailLoginButton,onClick:()=>F(),children:"Sign up"}):t(f,{variant:"outlined",className:i?e.portraitEmailLoginButton:e.emailLoginButton,onClick:()=>b(),children:"Sign In"}),t(r,{children:w?c(p,{style:{marginTop:10},children:["Already have an account?"," ",t("span",{onClick:()=>h(!1),className:e.signupText,children:"Sign in"})]}):c(p,{style:{marginTop:10},children:["Need an account?"," ",t("span",{onClick:()=>h(!0),className:e.signupText,children:"Sign up"})]})})]}):c(r,{className:e.loginSignupButton,children:[t(f,{variant:"outlined",className:i?e.portraitGoogleLoginButton:e.googleLoginButton,onClick:()=>D(),startIcon:t(B,{}),children:"Log In / Sign up with Google"}),t(r,{className:e.loginDivider,children:t("span",{className:e.loginOption,children:"OR"})}),t(f,{variant:"outlined",className:i?e.portraitGoogleLoginButton:e.googleLoginButton,onClick:()=>G(),startIcon:t($,{}),children:"Log In / Sign Up with Email"})]})]})})]}),t(ne,{})]})}export{Je as default};

import{j as s,A as o,a6 as F,a as d,F as U}from"./loginSlice.5d27ec86.js";import{C as B,V as O,J as j,E as $,d as V,A as G,P as J}from"./Cities.58705b8c.js";import{bL as R,C as Z,T as m,av as z,bV as M,u as Q,bW as W,bX as X,F as x,B as _}from"./App.fadaceff.js";import{m as H}from"./map.839e9770.js";import{g as K,m as Y}from"./index.b9073c0f.js";import{C as ee}from"./Container.28632a20.js";import{Z as re}from"./Zoom.d8f10aa5.js";import{A as se,b as te,a as ae,G as ne}from"./Grid.f4677110.js";import"./TextField.87a4bc90.js";import"./Input.8ad0f036.js";import"./Select.783b8c5d.js";import"./AlertTitle.a35f51ff.js";import"./MenuItem.3c6774c3.js";import"./sweetalert2.esm.all.417845c3.js";import"./CurrencyRupeeSharp.de679997.js";import"./Avatar.0ce5fc7f.js";const ie="_frames_1lgq2_1",oe={frames:ie};function le(){return s(ee,{sx:{height:"100%"},children:o(R,{flexDirection:"column",children:[s("iframe",{src:K,width:"100%",height:"50%",className:oe.frames,frameBorder:"0",allowFullScreen:!0}),o(Z,{flexDirection:"column",children:[s(m,{sx:{mt:2},variant:"h4",color:"error",children:"404 Not Found"}),s(z,{variant:"middle"}),s(m,{variant:"h4",sx:{color:i=>i.palette.info.main},children:Y[404]})]})]})})}const ce="_title_16k4h_14",de="_loading_16k4h_23",ue="_parentContainer_16k4h_29",me="_portraitContainer_16k4h_34",ye="_parent_16k4h_29",pe="_portraitParent_16k4h_42",he="_accordion_16k4h_51",_e="_mobileAccordion_16k4h_57",Pe="_linkTag_16k4h_61",fe="_flexbox_16k4h_65",ge="_venue_16k4h_70",Ie="_sportsIcon_16k4h_83",xe="_box_16k4h_88",Ce="_reservedPlayersContainer_16k4h_93",Ne="_editIcon_16k4h_97",Le="_reservedPlayers_16k4h_93",ke="_waitListPlayers_16k4h_116",Ee="_blink_16k4h_123",a={title:ce,loading:de,parentContainer:ue,portraitContainer:me,parent:ye,portraitParent:pe,accordion:he,mobileAccordion:_e,linkTag:Pe,flexbox:fe,venue:ge,sportsIcon:Ie,box:xe,reservedPlayersContainer:Ce,editIcon:Ne,reservedPlayers:Le,waitListPlayers:ke,blink:Ee},be=`${{}.VITE_API_URL}`;function we(i){return/^[0-9]-\d{4}-\d{2}-\d{2}-[0-9]$/.test(i)}const ve=async i=>{if(!we(i))throw new Error("Invalid uniqueEventId");try{const c=await(await fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query event {
          event(uniqueEventId: "${i}") {
            currency
            startTime
            endTime
            eventId
            uniqueEventId
            displayTitle
            venueLocationLink
            charges
            date
            time
            venueName
            reservedPlayersCount
            waitListPlayersCount
            stripePaymentUrl
            credits
            reservedPlayersList {
              displayName
              teamColor
            }
            waitListPlayers{
                displayName
                teamColor
            }
          }
        }
      `})})).json();if(c.errors)throw new Error(c.errors[0].message);return c.data.event}catch(l){throw l}},Se=()=>{const{id:i}=M(),l=Q();W();const c=F(r=>r),[e,C]=d.exports.useState(null),[N,y]=d.exports.useState(!0),[P,f]=d.exports.useState(null),[p,L]=d.exports.useState(""),[k,E]=d.exports.useState(!1),[b,w]=d.exports.useState([]),v=r=>{w(t=>[...t,r]),h()},h=()=>{E(r=>!r)};d.exports.useEffect(()=>{if(!i){f("Event ID is missing."),y(!1);return}(async()=>{try{y(!0);const t=await ve(i);L(i.substring(0,1)),C(t)}catch(t){f(t.message)}finally{y(!1)}})()},[i,b]);function S(r){return(r==null?void 0:r.eventId)!==void 0&&(r==null?void 0:r.eventId)!==null?String(r.eventId):"undefined"}function A(r){return(r==null?void 0:r.reservedPlayersCount)||0}const q=!0;function g(r){const t=(r==null?void 0:r.uniqueEventId)||"",n=t!=""?t.split("-"):"";let u="99999";return u=n.length>0?n[0]:"3",u}function I(r){const t=g(r),n=H.find(u=>u.cityId.toString()===t);return n==null?void 0:n.city}const D=(r,t,n)=>s(J,{displayName:r?r.displayName:"Add Name",index:t,points:r==null?void 0:r.points,dummyData:n},t);if(N)return s("div",{className:a.loading,children:s(X,{})});if(P)return o("div",{children:["Error: ",P]});if(!e)return s("div",{className:l?a.portraitContainer:a.parentContainer,children:s("div",{className:a.parent,children:s(le,{})})});const T=()=>{var r;return o(U,{children:[s(m,{className:a.title,children:"Flickmatch Soccer"}),s(B,{cityId:g(e),cityName:I(e)||"",countryCode:"IN",dummyData:!1,events:[]}),s(re,{in:!0,style:{transitionDelay:"300ms"},children:o(se,{className:l?a.mobileAccordion:a.accordion,sx:{"&:before":{display:"none"}},expanded:q,children:[s(te,{"aria-controls":"panel1a-content",id:"panel1a-header",children:o(x,{className:a.flexbox,children:[o(x,{className:a.venue,children:[s(O,{venueName:e==null?void 0:e.venueName,dummyData:!1,date:e==null?void 0:e.date}),l?null:s(j,{stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",eventId:S(e),reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],time:(e==null?void 0:e.endTime)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,team_division:!1,team1_color:"",team2_color:"",dummyData:!1,singleEvent:!0,cityId:p,credits:e==null?void 0:e.credits})]}),s($,{uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",time:(e==null?void 0:e.time)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,eventId:(r=I(e))!=null?r:"",reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",team_division:!1,team1_color:"",team2_color:"",dummyData:!1,cityId:p,credits:e==null?void 0:e.credits})]})}),s(ae,{className:"",children:o(_,{className:a.box,sx:{flexGrow:1},children:[o(_,{className:a.reservedPlayersContainer,children:[s(m,{className:a.reservedPlayers,children:"Reserved Players"}),c.login.isAdmin&&c.login.isLoggedIn?s(V,{className:a.editIcon,onClick:h}):null]}),c.login.isAdmin&&c.login.isLoggedIn?s(G,{isOpen:k,onToggle:h,uniqueEventId:e.uniqueEventId,cityId:p,handlePassName:v}):null,s(_,{children:s(ne,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:(e==null?void 0:e.reservedPlayersCount)||0},(t,n)=>{const u=n<A(e)?e==null?void 0:e.reservedPlayersList[n]:null;return D(u,n,e.dummyData)})})})]})})]})},e.uniqueEventId)]})};return s("div",{className:l?a.portraitParent:a.parent,children:T()})},Me=Se;export{Me as default};

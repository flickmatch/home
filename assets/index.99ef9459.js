import{W as Ce,a as o,a6 as ve,A as s,F as D,j as e}from"./loginSlice.ea7b6bcd.js";import{r as Ie,a as Pe,u as ke,e as xe,bP as be,F as n,Y as we,B as i,T as c,bX as Ee,bR as Me,b as Ae}from"./App.e4a7d6f6.js";import{d as De}from"./AccountBalance.71fb0b6f.js";import{d as Be}from"./CrisisAlertOutlined.012a3e56.js";import{l as h}from"./lodash.8d197e71.js";import{S as v,q as $e}from"./sweetalert2.esm.all.61eeb4e4.js";import{M as Ge}from"./Meta.1789e782.js";import{Z as Fe}from"./Zoom.7ded9bf1.js";import{T as I,F as P}from"./TextField.a2e42df6.js";import{S as k}from"./Select.4cdc6e50.js";import{M as p}from"./MenuItem.3824f576.js";import{I as je,S as qe}from"./Switch.5a0d2f60.js";import{C as Le}from"./CurrencyRupeeSharp.ff67dfc2.js";import{A as B,a as $}from"./AlertTitle.189eba5b.js";import"./index.293f78f1.js";import"./index.module.86d27b7e.js";import"./Input.bbee98c2.js";import"./SwitchBase.298063c7.js";var F={},We=Ce.exports;Object.defineProperty(F,"__esModule",{value:!0});var G=F.default=void 0,Oe=We(Ie()),V=Pe;G=F.default=(0,Oe.default)([(0,V.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,V.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");const Re="_container_1s8oy_1",Ve="_portraitContainer_1s8oy_2",Ue="_adminModeTag_1s8oy_23",ze="_title_1s8oy_30",Je="_divider_1s8oy_39",Ye="_fieldTitle_1s8oy_47",Ze="_fieldTitleIcon_1s8oy_53",He="_sectionFirst_1s8oy_60",Qe="_sectionSecond_1s8oy_61",Xe="_sectionThird_1s8oy_62",Ke="_portraitSectionThird_1s8oy_70",et="_formSection_1s8oy_76",tt="_selectInput_1s8oy_82",at="_sectionFourth_1s8oy_86",st="_createButton_1s8oy_93",it="_dateTimePicker_1s8oy_112",rt="_portaitDateTimePicker_1s8oy_116",ot="_startTimePicker_1s8oy_121",nt="_startEndPicker_1s8oy_122",ct="_selectStartTimeInput_1s8oy_127",lt="_switchBtn_1s8oy_134",t={container:Re,portraitContainer:Ve,adminModeTag:Ue,title:ze,divider:Je,fieldTitle:Ye,fieldTitleIcon:Ze,sectionFirst:He,sectionSecond:Qe,sectionThird:Xe,portraitSectionThird:Ke,formSection:et,selectInput:tt,sectionFourth:at,createButton:st,dateTimePicker:it,portaitDateTimePicker:rt,startTimePicker:ot,startEndPicker:nt,selectStartTimeInput:ct,switchBtn:lt},U={}.VITE_API_URL,z={}.VITE_API_URL;function bt(){const _=ke(),x=xe(),[,b]=be(),[T,J]=o.exports.useState(""),[f,Y]=o.exports.useState(""),[Z,w]=o.exports.useState(""),[y,H]=o.exports.useState(""),[j,Q]=o.exports.useState(""),[u,X]=o.exports.useState(""),[E,K]=o.exports.useState([]),[M,ee]=o.exports.useState([]),[q,te]=o.exports.useState(""),[L,ae]=o.exports.useState(""),[W,se]=o.exports.useState(""),[A,ie]=o.exports.useState(!1),[N,re]=o.exports.useState(!0),[g,oe]=o.exports.useState("Bibs"),[S,ne]=o.exports.useState("No Bibs"),C=ve(a=>a);o.exports.useEffect(()=>{localStorage.getItem("userData")&&(C.login.isAdmin||v.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{x("/match-queues")}))},[C.login.isAdmin,x]),o.exports.useEffect(()=>{const a=new AbortController,d=a.signal;return(async()=>{try{const m=await(await fetch(z,{method:"POST",signal:d,headers:{"Content-Type":"application/json"},body:$e})).json();K(m.data.cities)}catch(r){r instanceof Error&&r.name==="TypeError"&&console.log(r.message)}})(),()=>{a.abort()}},[]);const ce=a=>{(async()=>{try{const r=await(await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                  pinCode
                }      
              }
            }`})})).json();ee(r.data.city.sportsVenues)}catch(l){l instanceof Error&&l.name==="TypeError"&&console.log(l.message)}})()},le=async a=>{J(a.target.value),w("");const l=await(await fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${a.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();l.data.city.cityId===a.target.value&&Q(l.data.city.countryCode),ce(a.target.value)},de=a=>{Y(a.target.value)};function me(){b.push({options:{content:e(B,{severity:"info",children:s($,{className:t.alertTitle,children:[T===""?"City name":f===""?"Turf name":y===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function ue(){b.push({options:{content:e(B,{severity:"success",children:e($,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function O(a){b.push({options:{content:e(B,{severity:"error",children:e($,{className:t.alertTitle,children:a})})}})}const he={input:{cityId:T,charges:h.exports.parseInt(y),sportsVenueId:f,startTime:q,endTime:L,reservedPlayersCount:h.exports.parseInt(u),waitListPlayersCount:h.exports.parseInt(u)/2}},pe=()=>{T===""||f===""||y===""||u===""?me():N&&(g===""||S==="")?v.fire({title:"Invalid Selection",text:"Please select team colors for both teams!",icon:"warning"}):fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${T}"
                      charges: ${h.exports.parseInt(y)}
                      sportsVenueId: "${f}"
                      startTime: "${q+"+0530"}"
                      endTime: "${L+"+0530"}"
                      reservedPlayersCount: ${h.exports.parseInt(u)}
                      waitListPlayersCount: ${h.exports.parseInt(u)/2}
                      credits: ${Number(W)}
                      testGame: ${A}
                      teamDivision: ${N}
                      team1Color: "${g}"
                      team2Color: "${S}"
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:he.input})}).then(a=>a.json()).then(a=>{a.data.createEvent.isSuccessful===!1?O(a.data.createEvent.errorMessage):(ue(),x("/match-queues"))}).catch(a=>{O(a.message),console.log(a)})},Te=()=>s(i,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(De,{className:t.fieldTitleIcon}),e(P,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:T,onChange:le,style:{width:"100%"},children:E==null?void 0:E.map((a,d)=>e(p,{value:a.cityId,style:{width:"100%"},children:a.cityName},d))})})]}),fe=()=>s(i,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(Ee,{className:t.fieldTitleIcon}),e(P,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:f,onChange:de,style:{width:"100%"},children:M==null?void 0:M.map((a,d)=>e(p,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>w(a.googleMapsLink),children:a.displayName},d))})})]}),ye=()=>s(i,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(Be,{className:t.fieldTitleIcon}),e(I,{fullWidth:!0,value:Z,onChange:a=>w(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),Ne=()=>s(n,{className:_?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:_?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(G,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>te(a.target.value)})]})}),e(i,{className:_?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(G,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>ae(a.target.value)})]})})]}),_e=()=>s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(I,{InputProps:{startAdornment:e(je,{position:"start",children:j==="INR"?e(Le,{}):j==="USD"?e(Me,{}):null})},fullWidth:!0,value:y,onChange:a=>{H(a.target.value),se(a.target.value)},placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(I,{fullWidth:!0,value:u,onChange:a=>X(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),R=a=>e(i,{children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:a==="testGame"?"Test Game":"Team Division"})}),e(qe,{className:t.switchBtn,checked:a==="testGame"?A:N,onChange:()=>{a==="testGame"?ie(!A):re(!N)},color:"default",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4ce95a"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4ce95a"}}})]})}),ge=()=>{const a=["Black","White","Red","Blue","Yellow","Orange","Green","Light Purple","Purple","Bibs","No Bibs"],d=r=>{const m=r.target.value;m===S?v.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):oe(m)},l=r=>{const m=r.target.value;m===g?v.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):ne(m)};return s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 1"})}),e(P,{fullWidth:!0,children:s(k,{value:g,onChange:d,displayEmpty:!0,inputProps:{"aria-label":"Team 1 Color"},children:[e(p,{value:"",disabled:!0,children:"Select Team 1 Color"}),a.map(r=>e(p,{value:r,children:r},r))]})})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 2"})}),e(P,{fullWidth:!0,children:s(k,{value:S,onChange:l,displayEmpty:!0,inputProps:{"aria-label":"Team 2 Color"},children:[e(p,{value:"",disabled:!0,children:"Select Team 2 Color"}),a.map(r=>e(p,{value:r,children:r},r))]})})]})})]})},Se=()=>e(i,{className:t.sectionFourth,children:e(Ae,{variant:"contained",color:"success",className:t.createButton,onClick:pe,children:"Add Game"})});return s(D,{children:[e(Ge,{title:"Add Game"}),C.login.isAdmin&&C.login.isLoggedIn?e(D,{children:e(Fe,{in:!0,style:{transitionDelay:"300ms"},children:s(n,{className:_?t.portraitContainer:t.container,children:[e(we,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(n,{className:t.formSection,children:[Te(),fe(),ye(),Ne(),_e(),s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Game Credits"})}),e(I,{fullWidth:!0,value:W,disabled:!0,placeholder:"Credits",id:"fullWidth",type:"number"})]})}),R("testGame"),R("teamDivision")]}),N&&ge(),e("br",{}),Se()]})]})})}):e(D,{})]})}export{bt as default};

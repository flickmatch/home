import{a as r,W as le,K as s,M as S,j as e}from"./loginSlice.25a195ef.js";import{r as de,i as me,a as ue,u as pe,bu as he,bt as fe,F as o,N as Te,B as i,T as c,bB as ye,bw as ge,b as _e}from"./App.3c90ebfd.js";import{S as Ne,d as Se}from"./sweetalert2.all.22b6e245.js";import{d as ve}from"./CrisisAlertOutlined.fd13e4ec.js";import{l as u}from"./lodash.730ce810.js";import{M as Ie}from"./Meta.32417e50.js";import{q as Ce}from"./constants.70367cb1.js";import{Z as Pe}from"./Zoom.899b1154.js";import{a as M,S as D,T as v}from"./TextField.357fde03.js";import{M as E,A as I,a as C}from"./MenuItem.9758472f.js";import{I as ke}from"./InputAdornment.fd8da71f.js";import{C as xe}from"./CurrencyRupeeSharp.e062972e.js";import"./index.988de928.js";import"./index.module.51bb9f99.js";import"./Input.a233619a.js";var k={},be=me.exports;Object.defineProperty(k,"__esModule",{value:!0});var P=k.default=void 0,Ae=be(de()),j=ue,we=(0,Ae.default)([(0,j.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,j.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");P=k.default=we;const Me="_container_116gr_1",De="_portraitContainer_116gr_2",Ee="_adminModeTag_116gr_23",je="_title_116gr_30",qe="_divider_116gr_39",Fe="_fieldTitle_116gr_47",$e="_fieldTitleIcon_116gr_53",Oe="_sectionFirst_116gr_60",Be="_sectionSecond_116gr_61",Le="_sectionThird_116gr_62",Ve="_portraitSectionThird_116gr_70",Ge="_formSection_116gr_76",We="_selectInput_116gr_82",ze="_sectionFourth_116gr_86",Re="_createButton_116gr_93",Ue="_dateTimePicker_116gr_112",He="_portaitDateTimePicker_116gr_116",Je="_startTimePicker_116gr_121",Ze="_startEndPicker_116gr_122",Ke="_selectStartTimeInput_116gr_127",t={container:Me,portraitContainer:De,adminModeTag:Ee,title:je,divider:qe,fieldTitle:Fe,fieldTitleIcon:$e,sectionFirst:Oe,sectionSecond:Be,sectionThird:Le,portraitSectionThird:Ve,formSection:Ge,selectInput:We,sectionFourth:ze,createButton:Re,dateTimePicker:Ue,portaitDateTimePicker:He,startTimePicker:Je,startEndPicker:Ze,selectStartTimeInput:Ke},q="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",F="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function ut(){const T=pe(),g=he(),[,_]=fe(),[p,$]=r.exports.useState(""),[h,O]=r.exports.useState(""),[B,N]=r.exports.useState(""),[f,L]=r.exports.useState(""),[x,V]=r.exports.useState(""),[d,G]=r.exports.useState(""),[W,z]=r.exports.useState([]),[R,U]=r.exports.useState([]),[b,H]=r.exports.useState(""),[A,J]=r.exports.useState(""),y=le(a=>a);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(y.login.isAdmin||Ne.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{g("/match-queues")}))},[y.login.isAdmin,g]),r.exports.useEffect(()=>{const a=new AbortController,l=a.signal;return(async()=>{try{const ce=await(await fetch(F,{method:"POST",signal:l,headers:{"Content-Type":"application/json"},body:Ce})).json();z(ce.data.cities)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})(),()=>{a.abort()}},[]);const Z=a=>{(async()=>{try{const m=await(await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();U(m.data.city.sportsVenues)}catch(n){n instanceof Error&&n.name==="TypeError"&&console.log(n.message)}})()},K=async a=>{$(a.target.value),N("");const n=await(await fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${a.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();n.data.city.cityId===a.target.value&&V(n.data.city.countryCode),Z(a.target.value)},Q=a=>{O(a.target.value)};function Y(){_.push({options:{content:e(I,{severity:"info",children:s(C,{className:t.alertTitle,children:[p===""?"City name":h===""?"Turf name":f===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function X(){_.push({options:{content:e(I,{severity:"success",children:e(C,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function w(a){_.push({options:{content:e(I,{severity:"error",children:e(C,{className:t.alertTitle,children:a})})}})}const ee={input:{cityId:p,charges:u.exports.parseInt(f),sportsVenueId:h,startTime:b,endTime:A,reservedPlayersCount:u.exports.parseInt(d),waitListPlayersCount:u.exports.parseInt(d)/2}},te=()=>{p===""||h===""||f===""||d===""?Y():fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${p}"
                      charges: ${u.exports.parseInt(f)},
                      sportsVenueId: "${h}",
                      startTime: "${b+"+0530"}",
                      endTime: "${A+"+0530"}",
                      reservedPlayersCount: ${u.exports.parseInt(d)},
                      waitListPlayersCount: ${u.exports.parseInt(d)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:ee.input})}).then(a=>a.json()).then(a=>{a.data.createEvent.isSuccessful===!1?w(a.data.createEvent.errorMessage):(X(),g("/match-queues"))}).catch(a=>{w(a.message),console.log(a)})},ae=()=>s(i,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(Se,{className:t.fieldTitleIcon}),e(M,{className:t.selectInput,children:e(D,{id:"demo-simple-select-autowidth",value:p,onChange:K,style:{width:"100%"},children:W.map((a,l)=>e(E,{value:a.cityId,style:{width:"100%"},children:a.cityName},l))})})]}),se=()=>s(i,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(ye,{className:t.fieldTitleIcon}),e(M,{className:t.selectInput,children:e(D,{id:"demo-simple-select-autowidth",value:h,onChange:Q,style:{width:"100%"},children:R.map((a,l)=>e(E,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>N(a.googleMapsLink),children:a.displayName},l))})})]}),ie=()=>s(i,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(ve,{className:t.fieldTitleIcon}),e(v,{fullWidth:!0,value:B,onChange:a=>N(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),re=()=>s(o,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(P,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>H(a.target.value)})]})}),e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(P,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>J(a.target.value)})]})})]}),ne=()=>s(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(v,{InputProps:{startAdornment:e(ke,{position:"start",children:x==="INR"?e(xe,{}):x==="USD"?e(ge,{}):null})},fullWidth:!0,value:f,onChange:a=>L(a.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(v,{fullWidth:!0,value:d,onChange:a=>G(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),oe=()=>e(i,{className:t.sectionFourth,children:e(_e,{variant:"contained",color:"success",className:t.createButton,onClick:te,children:"Add Game"})});return s(S,{children:[e(Ie,{title:"Add Game"}),y.login.isAdmin&&y.login.isLoggedIn?e(S,{children:e(Pe,{in:!0,style:{transitionDelay:"300ms"},children:s(o,{className:T?t.portraitContainer:t.container,children:[e(Te,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(o,{className:t.formSection,children:[ae(),se(),ie(),re(),ne(),oe()]})]})})}):e(S,{})]})}export{ut as default};

import{a as o,W as Ce,K as s,M as D,j as e}from"./loginSlice.f61746a0.js";import{r as ve,i as Ie,a as Pe,u as ke,e as xe,bu as we,F as n,S as be,B as i,T as c,bC as Me,bw as De,b as Ae}from"./App.7ce93480.js";import{d as Ee}from"./AccountBalance.ca3bc7e8.js";import{d as $e}from"./CrisisAlertOutlined.a549b282.js";import{l as u}from"./lodash.dcf1d9ce.js";import{S as v,q as Be}from"./sweetalert2.all.f3d0fd44.js";import{M as Ge}from"./Meta.f84e0ce5.js";import{Z as Fe}from"./Zoom.5328a19f.js";import{T as I,F as P}from"./TextField.b250d883.js";import{S as k}from"./Select.4091815a.js";import{M as p}from"./MenuItem.d3fef43d.js";import{I as je,a as qe}from"./Switch.645cbee0.js";import{C as Oe}from"./CurrencyRupeeSharp.10e22bdd.js";import{A,a as E}from"./AlertTitle.5c73f370.js";import"./index.c57093b9.js";import"./index.module.002e5337.js";import"./Input.0ecb0c6c.js";var B={},We=Ie.exports;Object.defineProperty(B,"__esModule",{value:!0});var $=B.default=void 0,Le=We(ve()),L=Pe,Ve=(0,Le.default)([(0,L.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,L.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");$=B.default=Ve;const Re="_container_1s8oy_1",ze="_portraitContainer_1s8oy_2",Ue="_adminModeTag_1s8oy_23",He="_title_1s8oy_30",Je="_divider_1s8oy_39",Ze="_fieldTitle_1s8oy_47",Ye="_fieldTitleIcon_1s8oy_53",Ke="_sectionFirst_1s8oy_60",Qe="_sectionSecond_1s8oy_61",Xe="_sectionThird_1s8oy_62",et="_portraitSectionThird_1s8oy_70",tt="_formSection_1s8oy_76",at="_selectInput_1s8oy_82",st="_sectionFourth_1s8oy_86",it="_createButton_1s8oy_93",rt="_dateTimePicker_1s8oy_112",ot="_portaitDateTimePicker_1s8oy_116",nt="_startTimePicker_1s8oy_121",ct="_startEndPicker_1s8oy_122",lt="_selectStartTimeInput_1s8oy_127",dt="_switchBtn_1s8oy_134",t={container:Re,portraitContainer:ze,adminModeTag:Ue,title:He,divider:Je,fieldTitle:Ze,fieldTitleIcon:Ye,sectionFirst:Ke,sectionSecond:Qe,sectionThird:Xe,portraitSectionThird:et,formSection:tt,selectInput:at,sectionFourth:st,createButton:it,dateTimePicker:rt,portaitDateTimePicker:ot,startTimePicker:nt,startEndPicker:ct,selectStartTimeInput:lt,switchBtn:dt},V="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",R="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function wt(){const g=ke(),x=xe(),[,w]=we(),[f,z]=o.exports.useState(""),[T,U]=o.exports.useState(""),[H,b]=o.exports.useState(""),[y,J]=o.exports.useState(""),[G,Z]=o.exports.useState(""),[h,Y]=o.exports.useState(""),[K,Q]=o.exports.useState([]),[X,ee]=o.exports.useState([]),[F,te]=o.exports.useState(""),[j,ae]=o.exports.useState(""),[q,se]=o.exports.useState(""),[M,ie]=o.exports.useState(!1),[N,re]=o.exports.useState(!1),[S,oe]=o.exports.useState(""),[_,ne]=o.exports.useState(""),C=Ce(a=>a);o.exports.useEffect(()=>{localStorage.getItem("userData")&&(C.login.isAdmin||v.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{x("/match-queues")}))},[C.login.isAdmin,x]),o.exports.useEffect(()=>{const a=new AbortController,d=a.signal;return(async()=>{try{const m=await(await fetch(R,{method:"POST",signal:d,headers:{"Content-Type":"application/json"},body:Be})).json();Q(m.data.cities)}catch(r){r instanceof Error&&r.name==="TypeError"&&console.log(r.message)}})(),()=>{a.abort()}},[]);const ce=a=>{(async()=>{try{const r=await(await fetch(R,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();ee(r.data.city.sportsVenues)}catch(l){l instanceof Error&&l.name==="TypeError"&&console.log(l.message)}})()},le=async a=>{z(a.target.value),b("");const l=await(await fetch(V,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${a.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();l.data.city.cityId===a.target.value&&Z(l.data.city.countryCode),ce(a.target.value)},de=a=>{U(a.target.value)};function me(){w.push({options:{content:e(A,{severity:"info",children:s(E,{className:t.alertTitle,children:[f===""?"City name":T===""?"Turf name":y===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function he(){w.push({options:{content:e(A,{severity:"success",children:e(E,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function O(a){w.push({options:{content:e(A,{severity:"error",children:e(E,{className:t.alertTitle,children:a})})}})}const ue={input:{cityId:f,charges:u.exports.parseInt(y),sportsVenueId:T,startTime:F,endTime:j,reservedPlayersCount:u.exports.parseInt(h),waitListPlayersCount:u.exports.parseInt(h)/2}},pe=()=>{f===""||T===""||y===""||h===""?me():N&&(S===""||_==="")?v.fire({title:"Invalid Selection",text:"Please select team colors for both teams!",icon:"warning"}):fetch(V,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${f}"
                      charges: ${u.exports.parseInt(y)}
                      sportsVenueId: "${T}"
                      startTime: "${F+"+0530"}"
                      endTime: "${j+"+0530"}"
                      reservedPlayersCount: ${u.exports.parseInt(h)}
                      waitListPlayersCount: ${u.exports.parseInt(h)/2}
                      credits: ${Number(q)}
                      testGame: ${M}
                      teamDivision: ${N}
                      team1Color: "${S}"
                      team2Color: "${_}"
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:ue.input})}).then(a=>a.json()).then(a=>{a.data.createEvent.isSuccessful===!1?O(a.data.createEvent.errorMessage):(he(),x("/match-queues"))}).catch(a=>{O(a.message),console.log(a)})},fe=()=>s(i,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(Ee,{className:t.fieldTitleIcon}),e(P,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:f,onChange:le,style:{width:"100%"},children:K.map((a,d)=>e(p,{value:a.cityId,style:{width:"100%"},children:a.cityName},d))})})]}),Te=()=>s(i,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(Me,{className:t.fieldTitleIcon}),e(P,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:T,onChange:de,style:{width:"100%"},children:X.map((a,d)=>e(p,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>b(a.googleMapsLink),children:a.displayName},d))})})]}),ye=()=>s(i,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e($e,{className:t.fieldTitleIcon}),e(I,{fullWidth:!0,value:H,onChange:a=>b(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),Ne=()=>s(n,{className:g?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:g?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e($,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>te(a.target.value)})]})}),e(i,{className:g?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e($,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>ae(a.target.value)})]})})]}),ge=()=>s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(I,{InputProps:{startAdornment:e(je,{position:"start",children:G==="INR"?e(Oe,{}):G==="USD"?e(De,{}):null})},fullWidth:!0,value:y,onChange:a=>{J(a.target.value),se(a.target.value)},placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(I,{fullWidth:!0,value:h,onChange:a=>Y(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),W=a=>e(i,{children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:a==="testGame"?"Test Game":"Team Division"})}),e(qe,{className:t.switchBtn,checked:a==="testGame"?M:N,onChange:()=>{a==="testGame"?ie(!M):re(!N)},color:"default",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4ce95a"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4ce95a"}}})]})}),Se=()=>{const a=["Black","White","Red","Blue","Yellow","Orange","Green","Purple","Bibs","No Bibs"],d=r=>{const m=r.target.value;m===_?v.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):oe(m)},l=r=>{const m=r.target.value;m===S?v.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):ne(m)};return s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 1"})}),e(P,{fullWidth:!0,children:s(k,{value:S,onChange:d,displayEmpty:!0,inputProps:{"aria-label":"Team 1 Color"},children:[e(p,{value:"",disabled:!0,children:"Select Team 1 Color"}),a.map(r=>e(p,{value:r,children:r},r))]})})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 2"})}),e(P,{fullWidth:!0,children:s(k,{value:_,onChange:l,displayEmpty:!0,inputProps:{"aria-label":"Team 2 Color"},children:[e(p,{value:"",disabled:!0,children:"Select Team 2 Color"}),a.map(r=>e(p,{value:r,children:r},r))]})})]})})]})},_e=()=>e(i,{className:t.sectionFourth,children:e(Ae,{variant:"contained",color:"success",className:t.createButton,onClick:pe,children:"Add Game"})});return s(D,{children:[e(Ge,{title:"Add Game"}),C.login.isAdmin&&C.login.isLoggedIn?e(D,{children:e(Fe,{in:!0,style:{transitionDelay:"300ms"},children:s(n,{className:g?t.portraitContainer:t.container,children:[e(be,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(n,{className:t.formSection,children:[fe(),Te(),ye(),Ne(),ge(),s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Game Credits"})}),e(I,{fullWidth:!0,value:q,disabled:!0,placeholder:"Credits",id:"fullWidth",type:"number"})]})}),W("testGame"),W("teamDivision")]}),N&&Se(),e("br",{}),_e()]})]})})}):e(D,{})]})}export{wt as default};

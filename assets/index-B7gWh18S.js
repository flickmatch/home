import{H as O,K as E,r as y,X as F,j as e}from"./loginSlice-DaapXPJe.js";import{a as U}from"./index-CU2RedqW.js";import{r as B,u as $,b as J,B as f,T as d,S as P,a as w,d as G}from"./App-B4DX4k5J.js";import{M as H}from"./Meta-DX_1hwEA.js";import{m as L}from"./map-Q7HwO6dx.js";import{Z as M}from"./Zoom-_CB3TxZ7.js";import"./index.module-DzsYsj7q.js";var _={},D;function A(){if(D)return _;D=1;var s=O();Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var o=s(B()),m=E();return _.default=(0,o.default)((0,m.jsx)("path",{d:"M13.66 7c-.56-1.18-1.76-2-3.16-2H6V3h12v2h-3.26c.48.58.84 1.26 1.05 2H18v2h-2.02c-.25 2.8-2.61 5-5.48 5h-.73l6.73 7h-2.77L7 14v-2h3.5c1.76 0 3.22-1.3 3.46-3H6V7z"}),"CurrencyRupee"),_}var W=A();const R=U(W),X="_logo_x7k8p_19",K="_heading_x7k8p_25",V="_pageContainer_x7k8p_32",Z="_container_x7k8p_37",Q="_passCard_x7k8p_47",Y="_portraitPassCard_x7k8p_48",ee="_ribbon_x7k8p_68",ae="_title_x7k8p_117",te="_subtitle_x7k8p_126",se="_price_x7k8p_131",re="_currency_x7k8p_139",ie="_status_x7k8p_145",oe="_portraitDetails_x7k8p_161",ne="_details_x7k8p_169",ce="_buyNow_x7k8p_211",le="_footballIcon_x7k8p_236",pe="_cityNameContainer_x7k8p_242",de="_citiesName_x7k8p_249",ue="_citiesImg_x7k8p_259",me="_testingPurposeTag_x7k8p_263",a={logo:X,heading:K,pageContainer:V,container:Z,passCard:Q,portraitPassCard:Y,ribbon:ee,title:ae,subtitle:te,price:se,currency:re,status:ie,portraitDetails:oe,details:ne,buyNow:ce,footballIcon:le,cityNameContainer:pe,citiesName:de,citiesImg:ue,testingPurposeTag:me},r={data:{pass:[{passId:"pass5",cityId:"5",passType:"LimitedDays",totalGames:1e3,totalDays:30,price:1e3,title:"30 days pass",status:"Active",features:["No Waitlist","Join game in single click","Exclusive member events"],description:"Pay for 28 days, play 30 games"}]}},ye=void 0,he=(s,o,m,h,u)=>fetch(ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${s}"
                    email: "${o}",
                    currency: "${u}",
                    location: "${h}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(n=>n.json()).then(n=>{if(n.errors)throw new Error(n.errors[0].message);return m(n.data.initiatePassPayment.amount),n.data.initiatePassPayment.orderId}).catch(n=>{console.log(n)});function ge(){return new Promise(s=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.onload=()=>{s(!0)},o.onerror=()=>{s(!1)},document.body.appendChild(o)})}function fe(){const s=document.querySelector('script[src="https://checkout.razorpay.com/v1/checkout.js"]');s&&document.body.removeChild(s)}const xe=(s,o,m,h,u,n,j)=>{async function N(){await ge()||alert("Razorpay SDK failed to load.Please try again later.");const b={key:"rzp_live_ba3UQjRIBXdeXt",amount:s,currency:"INR",name:"Flickmatch",description:"Flickmatch transaction for football match.",image:"https://firebasestorage.googleapis.com/v0/b/flickmatch-374a2.appspot.com/o/fm_rainbow.png?alt=media&token=1b06ae27-bf10-4974-9100-6bb5f2308314",order_id:o,callback_url:void 0,redirect:!0,prefill:{name:h,email:m,contact:u},notes:{address:"Tower 8 - Flat 1501, Nirvana Country Rd, The Close South, Sector 50, Gurugram, Haryana 122018"},modal:{ondismiss:function(){j(!1),n(""),fe(),delete x.Razorpay}},theme:{color:"#4ce95a"}},x=window;new x.Razorpay(b).open()}N()},T="/game-pass-logo.webp",q=void 0;function ve(){const s=$(),o=J(),[m,h]=y.useState([]),[u,n]=y.useState({name:"",email:"",phoneNumber:""}),[j,N]=y.useState(!0),[v,b]=y.useState(0),[x,I]=y.useState(""),C=F(t=>t),[l,z]=y.useState(null),k=window.location.pathname.split("/").pop();y.useEffect(()=>{const t=localStorage.getItem("userData");if(t){const i=JSON.parse(t);n({name:i.name,email:i.email,phoneNumber:""})}},[]),y.useEffect(()=>{(async()=>{try{const p=(await(await fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query PassesForCity {
            passesForCity(cityId: "${k}") {
                  passId
                  cityId
                  passType
                  totalGames
                  totalDays
                  price
                  title
                  status
                  features
                  description
            }
              }`})})).json()).data.passesForCity;L.forEach(c=>{Number(k)===Number(c.cityId)&&z({city:c.city,cityId:c.cityId,currency:c.currency,iconUrl:c.iconUrl})}),h(p)}catch(i){h(r.data.pass),i instanceof Error&&i.name==="TypeError"&&(alert(i),o("/match-queues"))}})()},[k]);const S=(t,i,g)=>{C.login.isLoggedIn?j?he(t,u.email,b,i,g).then(p=>{I(p)}).catch(p=>{alert(p)}):fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${t}"
                    email: "${u.email}",
                    currency: "INR",
                    location: "${i}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(c=>c.json()).then(c=>{c.errors&&alert(c.errors[0].message)}).catch(c=>{alert(c)}):(alert("Please login to proceed with the purchase."),o("/login"))};return x&&xe(v,x,u.email,u.name,u.phoneNumber,I,N),e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Game Passes"}),e.jsx(M,{in:!0,style:{transitionDelay:"300ms"},children:e.jsxs(f,{className:a.pageContainer,children:[e.jsx(d,{variant:"h3",className:a.heading,children:"Flickmatch Pass"}),l!=null?e.jsxs("div",{className:a.cityNameContainer,children:[e.jsx(d,{className:a.citiesName,children:l.city},l.cityId),e.jsx("img",{className:a.citiesImg,src:l.iconUrl,alt:l.city,height:"40px"})]}):null,e.jsx(f,{className:a.container,children:e.jsxs(e.Fragment,{children:[m.length>0&&l!=null?m.map((t,i)=>e.jsxs(f,{className:s?a.portraitPassCard:a.passCard,children:[e.jsx("img",{src:T,alt:"logo",className:a.logo}),e.jsx(d,{variant:"h3",className:a.title,children:t.title?t.title:r.data.pass[0].title}),e.jsx(d,{className:a.subtitle,children:t.description?t.description:r.data.pass[0].description}),e.jsxs(d,{className:a.price,children:[e.jsx(R,{className:a.currency}),t.price?t.price:r.data.pass[0].price]}),e.jsx(d,{className:a.status,children:t.status?t.status:r.data.pass[0].status}),e.jsx("ul",{className:s?a.portraitDetails:a.details,children:t.features!==null&&t.features.length>0?t.features.map((g,p)=>e.jsxs("li",{children:[e.jsx(P,{className:a.footballIcon}),g]},p)):r.data.pass[0].features.map((g,p)=>e.jsxs("li",{children:[e.jsx(P,{className:a.footballIcon}),g]},p))}),e.jsx(f,{className:a.ribbon,children:t.title==="Unlimited game pass"?e.jsx("span",{style:{fontWeight:600},children:"Best Deal"}):e.jsxs("span",{children:["For"," ",t.totalDays?t.totalDays:r.data.pass[0].totalDays," ","Days"]})}),e.jsx(w,{className:a.buyNow,onClick:()=>S(t.passId,l.city,l.currency),children:"Buy Now"})]},i)):null,C.login.isAdmin&&C.login.isLoggedIn&&l!=null?e.jsxs(f,{className:s?a.portraitPassCard:a.passCard,children:[e.jsx(G,{label:"for testing",color:"primary",variant:"outlined",className:a.testingPurposeTag}),e.jsx("img",{src:T,alt:"logo",className:a.logo}),e.jsx(d,{variant:"h3",className:a.title,children:r.data.pass[0].title}),e.jsx(d,{className:a.subtitle,children:r.data.pass[0].description}),e.jsxs(d,{className:a.price,children:[e.jsx(R,{className:a.currency}),r.data.pass[0].price]}),e.jsx(d,{className:a.status,children:r.data.pass[0].status}),e.jsx("ul",{className:s?a.portraitDetails:a.details,children:r.data.pass[0].features?r.data.pass[0].features.map((t,i)=>e.jsxs("li",{children:[e.jsx(P,{className:a.footballIcon}),t]},i)):null}),e.jsx(f,{className:a.ribbon,children:r.data.pass[0].status==="Unlimited game pass"?e.jsx("span",{style:{fontWeight:600},children:"Best Deal"}):e.jsxs("span",{children:["For ",r.data.pass[0].totalDays," Days"]})}),e.jsx(w,{className:a.buyNow,onClick:()=>S(r.data.pass[0].passId,l.city,l.currency),children:"Buy Now"})]}):null]})})]})})]})}export{ve as default};

import{a as r,W as ce,K as s,M as S,j as e}from"./loginSlice.25a195ef.js";import{r as le,i as de,a as me,u as ue,bv as pe,bt as he,F as o,H as fe,B as i,T as c,bC as Te,bx as ge,b as ye}from"./App.6d49236d.js";import{S as _e,d as Ne}from"./sweetalert2.all.3616ce63.js";import{d as Se}from"./CrisisAlertOutlined.0001feb0.js";import{l}from"./lodash.730ce810.js";import{M as ve}from"./Meta.3404d31b.js";import{q as Ie}from"./constants.70367cb1.js";import{C as Ce,m as Pe}from"./map.828d63e8.js";import{Z as ke}from"./Zoom.565bef79.js";import{a as w,S as D,T as v}from"./TextField.3137fef1.js";import{M,A as I,a as C}from"./MenuItem.c7e1eebf.js";import{I as xe}from"./InputAdornment.899e0dc3.js";import"./index.d67e9749.js";import"./index.module.51bb9f99.js";import"./Input.6887ea44.js";var k={},Ae=de.exports;Object.defineProperty(k,"__esModule",{value:!0});var P=k.default=void 0,be=Ae(le()),E=me,we=(0,be.default)([(0,E.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,E.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");P=k.default=we;const De="_container_116gr_1",Me="_portraitContainer_116gr_2",Ee="_adminModeTag_116gr_23",Fe="_title_116gr_30",$e="_divider_116gr_39",je="_fieldTitle_116gr_47",qe="_fieldTitleIcon_116gr_53",Le="_sectionFirst_116gr_60",Oe="_sectionSecond_116gr_61",Be="_sectionThird_116gr_62",Ve="_portraitSectionThird_116gr_70",Ge="_formSection_116gr_76",We="_selectInput_116gr_82",ze="_sectionFourth_116gr_86",Re="_createButton_116gr_93",He="_dateTimePicker_116gr_112",Ue="_portaitDateTimePicker_116gr_116",Je="_startTimePicker_116gr_121",Ze="_startEndPicker_116gr_122",Ke="_selectStartTimeInput_116gr_127",t={container:De,portraitContainer:Me,adminModeTag:Ee,title:Fe,divider:$e,fieldTitle:je,fieldTitleIcon:qe,sectionFirst:Le,sectionSecond:Oe,sectionThird:Be,portraitSectionThird:Ve,formSection:Ge,selectInput:We,sectionFourth:ze,createButton:Re,dateTimePicker:He,portaitDateTimePicker:Ue,startTimePicker:Je,startEndPicker:Ze,selectStartTimeInput:Ke},Qe="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",F="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function pt(){const T=ue(),y=pe(),[,_]=he(),[u,$]=r.exports.useState(""),[p,j]=r.exports.useState(""),[q,N]=r.exports.useState(""),[h,L]=r.exports.useState(""),[x,O]=r.exports.useState(""),[d,B]=r.exports.useState(""),[V,G]=r.exports.useState([]),[W,z]=r.exports.useState([]),[A,R]=r.exports.useState(""),[b,H]=r.exports.useState(""),g=ce(a=>a);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(g.login.isAdmin||_e.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{y("/match-queues")}))},[g.login.isAdmin,y]),r.exports.useEffect(()=>{const a=new AbortController,n=a.signal;return(async()=>{try{const oe=await(await fetch(F,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:Ie})).json();G(oe.data.cities)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})(),()=>{a.abort()}},[]);const U=a=>{(async()=>{try{const m=await(await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();z(m.data.city.sportsVenues)}catch(f){f instanceof Error&&f.name==="TypeError"&&console.log(f.message)}})()},J=a=>{$(a.target.value),N(""),Pe.forEach(n=>{n.cityId===l.exports.parseInt(a.target.value)&&O(n.currency)}),U(a.target.value)},Z=a=>{j(a.target.value)};function K(){_.push({options:{content:e(I,{severity:"info",children:s(C,{className:t.alertTitle,children:[u===""?"City name":p===""?"Turf name":h===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function Q(){_.push({options:{content:e(I,{severity:"success",children:e(C,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function Y(a){_.push({options:{content:e(I,{severity:"error",children:e(C,{className:t.alertTitle,children:a})})}})}const X={input:{cityId:u,charges:l.exports.parseInt(h),sportsVenueId:p,startTime:A,endTime:b,reservedPlayersCount:l.exports.parseInt(d),waitListPlayersCount:l.exports.parseInt(d)/2}},ee=()=>{u===""||p===""||h===""||d===""?K():fetch(Qe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${u}"
                      charges: ${l.exports.parseInt(h)},
                      sportsVenueId: "${p}",
                      startTime: "${A+"+0530"}",
                      endTime: "${b+"+0530"}",
                      reservedPlayersCount: ${l.exports.parseInt(d)},
                      waitListPlayersCount: ${l.exports.parseInt(d)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:X.input})}).then(a=>a.json()).then(a=>{if(a.errors)throw new Error(a.errors[0].message);Q(),y("/match-queues"),console.log(a.data)}).catch(a=>{Y(a.message),console.log(a)})},te=()=>s(i,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(Ne,{className:t.fieldTitleIcon}),e(w,{className:t.selectInput,children:e(D,{id:"demo-simple-select-autowidth",value:u,onChange:J,style:{width:"100%"},children:V.map((a,n)=>e(M,{value:a.cityId,style:{width:"100%"},children:a.cityName},n))})})]}),ae=()=>s(i,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(Te,{className:t.fieldTitleIcon}),e(w,{className:t.selectInput,children:e(D,{id:"demo-simple-select-autowidth",value:p,onChange:Z,style:{width:"100%"},children:W.map((a,n)=>e(M,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>N(a.googleMapsLink),children:a.displayName},n))})})]}),se=()=>s(i,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(Se,{className:t.fieldTitleIcon}),e(v,{fullWidth:!0,value:q,onChange:a=>N(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),ie=()=>s(o,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(P,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>R(a.target.value)})]})}),e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(P,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>H(a.target.value)})]})})]}),re=()=>s(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(v,{InputProps:{startAdornment:e(xe,{position:"start",children:x==="INR"?e(Ce,{}):x==="USD"?e(ge,{}):null})},fullWidth:!0,value:h,onChange:a=>L(a.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(v,{fullWidth:!0,value:d,onChange:a=>B(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),ne=()=>e(i,{className:t.sectionFourth,children:e(ye,{variant:"contained",color:"success",className:t.createButton,onClick:ee,children:"Add Game"})});return s(S,{children:[e(ve,{title:"Add Game"}),g.login.isAdmin&&g.login.isLoggedIn?e(S,{children:e(ke,{in:!0,style:{transitionDelay:"300ms"},children:s(o,{className:T?t.portraitContainer:t.container,children:[e(fe,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(o,{className:t.formSection,children:[te(),ae(),se(),ie(),re(),ne()]})]})})}):e(S,{})]})}export{pt as default};

import{j as a,K as n,a as l,M as A}from"./loginSlice.f61746a0.js";import{C as F,V as T,J as q,E as U,a as B,P as j}from"./Cities.c0570b94.js";import{bt as J,C as M,T as u,ao as O,bD as $,u as G,bE as V,bF as R,F as I,B as p}from"./App.2ee9e897.js";import{m as z}from"./map.839e9770.js";import{g as K,m as H}from"./index.4b04ffec.js";import{C as Q}from"./Container.be19100e.js";import{A as W,b as X,a as Y,G as Z}from"./Grid.3f06d76c.js";import"./sweetalert2.all.f3d0fd44.js";import"./TextField.f1667e48.js";import"./Input.c45abc80.js";import"./Select.acd59eb3.js";import"./MenuItem.2d12837f.js";import"./AlertTitle.9579bb50.js";import"./CurrencyRupeeSharp.102671e2.js";import"./Avatar.bd8fd537.js";const ee="_frames_1lgq2_1",re={frames:ee};function ae(){return a(Q,{sx:{height:"100%"},children:n(J,{flexDirection:"column",children:[a("iframe",{src:K,width:"100%",height:"50%",className:re.frames,frameBorder:"0",allowFullScreen:!0}),n(M,{flexDirection:"column",children:[a(u,{sx:{mt:2},variant:"h4",color:"error",children:"404 Not Found"}),a(O,{variant:"middle"}),a(u,{variant:"h4",sx:{color:o=>o.palette.info.main},children:H[404]})]})]})})}const te="_title_16k4h_14",se="_loading_16k4h_23",ie="_parentContainer_16k4h_29",oe="_portraitContainer_16k4h_34",ne="_parent_16k4h_29",ce="_portraitParent_16k4h_42",de="_accordion_16k4h_51",le="_mobileAccordion_16k4h_57",me="_linkTag_16k4h_61",ue="_flexbox_16k4h_65",ye="_venue_16k4h_70",pe="_sportsIcon_16k4h_83",he="_box_16k4h_88",_e="_reservedPlayersContainer_16k4h_93",fe="_editIcon_16k4h_97",Pe="_reservedPlayers_16k4h_93",ge="_waitListPlayers_16k4h_116",Ie="_blink_16k4h_123",s={title:te,loading:se,parentContainer:ie,portraitContainer:oe,parent:ne,portraitParent:ce,accordion:de,mobileAccordion:le,linkTag:me,flexbox:ue,venue:ye,sportsIcon:pe,box:he,reservedPlayersContainer:_e,editIcon:fe,reservedPlayers:Pe,waitListPlayers:ge,blink:Ie},xe=`${{}.VITE_API_URL}`;function Ce(o){return/^[0-9]-\d{4}-\d{2}-\d{2}-[0-9]$/.test(o)}const Ne=async o=>{if(!Ce(o))throw new Error("Invalid uniqueEventId");try{const m=await(await fetch(xe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query event {
          event(uniqueEventId: "${o}") {
            currency
            startTime
            endTime
            eventId
            uniqueEventId
            displayTitle
            venueLocationLink
            charges
            date
            time
            venueName
            reservedPlayersCount
            waitListPlayersCount
            stripePaymentUrl
            credits
            reservedPlayersList {
              displayName
              teamColor
            }
            waitListPlayers{
                displayName
                teamColor
            }
          }
        }
      `})})).json();if(m.errors)throw new Error(m.errors[0].message);return m.data.event}catch(c){throw c}},ke=()=>{const{id:o}=$(),c=G();V();const[m,x]=l.exports.useState(!1),[e,C]=l.exports.useState(null),[N,y]=l.exports.useState(!0),[h,_]=l.exports.useState(null),[f,k]=l.exports.useState("");l.exports.useEffect(()=>{if(!o){_("Event ID is missing."),y(!1);return}(async()=>{try{y(!0);const t=await Ne(o);k(o.substring(0,1)),C(t)}catch(t){_(t.message)}finally{y(!1)}})()},[o]),l.exports.useEffect(()=>{const r=localStorage.getItem("adminIds"),t=localStorage.getItem("userData");if(t){const i=JSON.parse(t);if(r){const v=JSON.parse(r).data.map(D=>D.EmailId).includes(i.email);x(v)}}},[]);function L(r){return(r==null?void 0:r.eventId)!==void 0&&(r==null?void 0:r.eventId)!==null?String(r.eventId):"undefined"}function E(r){return(r==null?void 0:r.reservedPlayersCount)||0}const b=!0;function P(r){const t=(r==null?void 0:r.uniqueEventId)||"",i=t!=""?t.split("-"):"";let d="99999";return d=i.length>0?i[0]:"3",d}function g(r){const t=P(r),i=z.find(d=>d.cityId.toString()===t);return i==null?void 0:i.city}const w=(r,t,i)=>a(j,{displayName:r?r.displayName:"Add Name",index:t,points:r==null?void 0:r.points,dummyData:i},t);if(N)return a("div",{className:s.loading,children:a(R,{})});if(h)return n("div",{children:["Error: ",h]});if(!e)return a("div",{className:c?s.portraitContainer:s.parentContainer,children:a("div",{className:s.parent,children:a(ae,{})})});const S=()=>{var r;return n(A,{children:[a(u,{className:s.title,children:"Flickmatch Soccer"}),a(F,{cityId:P(e),cityName:g(e)||"",countryCode:"IN",dummyData:!1,events:[]}),n(W,{className:c?s.mobileAccordion:s.accordion,sx:{"&:before":{display:"none"}},expanded:b,children:[a(X,{"aria-controls":"panel1a-content",id:"panel1a-header",children:n(I,{className:s.flexbox,children:[n(I,{className:s.venue,children:[a(T,{venueName:e==null?void 0:e.venueName,dummyData:!1,date:e==null?void 0:e.date}),c?null:a(q,{stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",eventId:L(e),reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],time:(e==null?void 0:e.endTime)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,team_division:!1,team1_color:"",team2_color:"",dummyData:!1,singleEvent:!0,cityId:f,credits:e==null?void 0:e.credits})]}),a(U,{uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",time:(e==null?void 0:e.time)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,eventId:(r=g(e))!=null?r:"",reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",team_division:!1,team1_color:"",team2_color:"",dummyData:!1,cityId:f,credits:e==null?void 0:e.credits})]})}),a(Y,{className:"",children:n(p,{className:s.box,sx:{flexGrow:1},children:[n(p,{className:s.reservedPlayersContainer,children:[a(u,{className:s.reservedPlayers,children:"Reserved Players"}),m?a(B,{className:s.editIcon}):null]}),a(p,{children:a(Z,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:(e==null?void 0:e.reservedPlayersCount)||0},(t,i)=>{const d=i<E(e)?e==null?void 0:e.reservedPlayersList[i]:null;return w(d,i,e.dummyData)})})})]})})]})]})};return a("div",{className:c?s.portraitParent:s.parent,children:S()})},Me=ke;export{Me as default};

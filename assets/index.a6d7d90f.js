import{a as u,j as a,M as w,K as o,W as G}from"./loginSlice.25a195ef.js";import{l as V}from"./lodash.730ce810.js";import{M as K}from"./Meta.1fb0c37c.js";import{r as R,i as J,a as U,bt as Q,am as X,B as c,T as M,H as Z,b as z,u as $,F as B}from"./App.cac24a1e.js";import{s,V as Y,J as E,E as ee,d as ae,P as se,C as te}from"./Cities.595159ea.js";import{T as H}from"./TextField.d6391b3f.js";import{A as re,a as ie}from"./MenuItem.4f4c9a8b.js";import{b as le,d as oe,c as de}from"./DialogActions.cd58ffb7.js";import{G as D}from"./Grid.b3909f27.js";import{a as ne,q as me}from"./constants.70367cb1.js";import{Z as ce}from"./Zoom.a8f8be4c.js";import{b as ue,S as A}from"./Stack.e308f25a.js";import"./index.module.51bb9f99.js";import"./index.9848b02f.js";import"./map.1ccd021c.js";import"./Input.1337d357.js";var T={},ye=J.exports;Object.defineProperty(T,"__esModule",{value:!0});var F=T.default=void 0,he=ye(R()),pe=U,Ne=(0,he.default)((0,pe.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");F=T.default=Ne;var q={},ve=J.exports;Object.defineProperty(q,"__esModule",{value:!0});var O=q.default=void 0,Pe=ve(R()),fe=U,Se=(0,Pe.default)((0,fe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");O=q.default=Se;const _e="_playerName_18ti2_1",be="_addButton_18ti2_5",Le="_adminModePanel_18ti2_10",Ie="_adminModeTag_18ti2_14",C={playerName:_e,addButton:be,adminModePanel:Le,adminModeTag:Ie},ke={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Ce=({onToggle:N,isOpen:h,uniqueEventId:_,cityId:b,handlePassName:v})=>{const L=()=>N(),[d,P]=u.exports.useState(""),[n,y]=u.exports.useState(""),[,I]=Q();function m(){I.push({options:{content:a(re,{severity:"success",children:a(ie,{className:C.alertTitle,children:"Player Added Successfully"})})}})}const t=()=>{!d||!n?alert("All input fields are required."):fetch("https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
          joinEvent(input: {
                uniqueEventId: "${_}"
                cityId: "${b}"
                player: {
                  waNumber: "${n}"
                  name: "${d}"
              }
          }) {
            isSuccessful
          }
      }`})}).then(l=>l.json()).then(l=>{l.errors?alert(l.errors[0].message):(v(d),m(),P(""),y(""))}).catch(l=>{alert(l.message)})};return a(w,{children:a(X,{open:h,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:o(c,{sx:ke,children:[o(c,{className:C.adminModePanel,children:[a(M,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Add Player"}),a(Z,{label:"admin mode",color:"primary",variant:"outlined",className:C.adminModeTag})]}),a(c,{className:C.playerName,children:a(H,{fullWidth:!0,label:"Player Name",id:"fullWidth",value:d,onChange:l=>P(l.target.value)})}),a(c,{children:a(H,{type:"number",fullWidth:!0,label:"Phone No.",id:"fullWidth",value:n,onChange:l=>y(l.target.value)})}),a(z,{variant:"contained",endIcon:a(O,{}),className:C.addButton,onClick:t,children:"Add Player"})]})})})},xe=({gameEvent:N,cityName:h,cityNameId:_,addPlayerInQueue:b})=>{const v=$(),[L,d]=u.exports.useState(!1),[P,n]=u.exports.useState(!1),[y,I]=u.exports.useState(null),m=e=>{const r=document.getElementById(e);if(r){r.scrollIntoView({behavior:"smooth",block:"start"});const i=r.querySelector("[aria-expanded]");i&&i.click(),n(!0),setTimeout(()=>{n(!1)},2e3)}},t=G(e=>e),l=e=>{history.replaceState(null,"",`#${e}`),I(e),d(r=>!r)},f=()=>{y&&l(y)},j=e=>{b(e)};u.exports.useEffect(()=>{const e=window.location.hash.substring(1);e&&m(e)},[]);const p=(e,r)=>a(se,{displayName:e?e.displayName:"(Empty)",index:r},r),S=e=>o(c,{className:s.teamDivision,children:[a("span",{className:s.colorTeamA,style:{background:e}}),e||"White"," (Team A)"]}),x=e=>o(c,{className:s.teamDivisionSecond,children:[a("span",{className:s.colorTeamB,style:{background:e}}),e||"Blue"," (Team B)"]});return a(w,{children:(()=>N.map(e=>o(le,{className:v?s.mobileAccordion:s.accordion,id:e.uniqueEventId,sx:{"&:before":{display:"none"}},children:[a(oe,{expandIcon:a(F,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:o(B,{className:s.flexbox,children:[o(B,{className:s.venue,children:[a(Y,{venueName:e.venueName,date:e.date,dummyData:e.dummyData?e.dummyData:!1}),v?null:a(E,{stripePaymentUrl:e.stripePaymentUrl,charges:0,date:"",uniqueEventId:e.uniqueEventId,eventId:e.eventId,reservedPlayersCount:e.reservedPlayersCount,reservedPlayersList:e.reservedPlayersList,time:"",venueLocationLink:"",venueName:e.venueName,waitListPlayers:e.waitListPlayers,waitListPlayersCount:e.waitListPlayersCount,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1})]}),a(ee,{uniqueEventId:e.uniqueEventId,charges:e.charges,date:e.date,time:e.time,venueLocationLink:e.venueLocationLink,reservedPlayersCount:e.reservedPlayersCount,waitListPlayersCount:e.waitListPlayersCount,eventId:h,reservedPlayersList:e.reservedPlayersList,venueName:e.venueName,waitListPlayers:e.waitListPlayers,stripePaymentUrl:e.stripePaymentUrl,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1})]})}),a(de,{className:P&&window.location.hash.substring(1)===e.uniqueEventId?s.blink:"",children:o(c,{className:s.box,sx:{flexGrow:1},children:[o(c,{className:s.reservedPlayersContainer,children:[a(M,{className:s.reservedPlayers,children:"Reserved Players"}),t.login.isAdmin&&t.login.isLoggedIn?a(ae,{className:s.editIcon,onClick:()=>l(e.uniqueEventId)}):null]}),t.login.isAdmin&&t.login.isLoggedIn&&y===e.uniqueEventId?a(Ce,{isOpen:L,onToggle:f,uniqueEventId:y,cityId:_,handlePassName:j}):null,e.team_division?o(c,{children:[S(e.team1_color),a(D,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(r,i)=>{const k=i<e.reservedPlayersList.length?e.reservedPlayersList[i]:null;return p(k,i)})}),a(M,{className:s.versus,children:"v/s"}),x(e.team2_color),a(D,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(r,i)=>{const k=i<e.reservedPlayersList.length?e.reservedPlayersList[i+e.reservedPlayersCount/2]:null;return p(k,i+e.reservedPlayersCount/2)})})]}):a(c,{children:a(D,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount},(r,i)=>{const k=i<e.reservedPlayersList.length?e.reservedPlayersList[i]:null;return p(k,i)})})})]})})]},e.uniqueEventId)))()})},g={data:{cities:[{cityId:"2",cityName:"Hyderabad",countryCode:"IN",dummyData:!1,currency:"INR",events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-1",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:12,waitListPlayersCount:6,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!0,team1_color:"White",team2_color:"Blue",charges:200,reservedPlayersList:[{displayName:"Abhimanyu"},{displayName:"Sourabh"},{displayName:"Kamal"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Jasprit"},{displayName:"Naresh Kumar"},{displayName:"Kaushal"},{displayName:"Nakul"},{displayName:"Parth"},{displayName:"Himanshu"}],waitListPlayers:[{displayName:"Nitin"},{displayName:"Haridev"},{displayName:"Kiyaan"},{displayName:"Monya Amo"},{displayName:"Rolly"},{displayName:"Jhumkar"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-2",date:"Sun, Jan 01",time:"9:00PM-10:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:10,waitListPlayersCount:5,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!1,team1_color:"",team2_color:"",charges:250,reservedPlayersList:[{displayName:"Aryan"},{displayName:"Sarvesh"},{displayName:"Saarthak"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Mayank"},{displayName:"Yash"},{displayName:"Ankur"},{displayName:"Rithik"}],waitListPlayers:[{displayName:"Harsh"},{displayName:"Lovepreet"},{displayName:"Himanshu"},{displayName:"Mohit"},{displayName:"Piyush"}],stripePaymentUrl:""}]},{cityId:"1",cityName:"Gurgaon",countryCode:"IN",currency:"INR",dummyData:!1,events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sumesh"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Saksham"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Anubhav"},{displayName:"Saarthak"},{displayName:"Harshvardhan"},{displayName:"Astitva"},{displayName:"Rishi"},{displayName:"Rijvaan"}],waitListPlayers:[{displayName:"Mukhtaar"},{displayName:"Shubham"},{displayName:"Burhan"},{displayName:"Arif"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Nilesh"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-4",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Harshdeep"},{displayName:"Sarvesh"},{displayName:"Akhilesh"},{displayName:"Sanju"},{displayName:"Prahlad"},{displayName:"Kishore"},{displayName:"Jasprit"},{displayName:"Sooraj"},{displayName:"Bunty Singh"},{displayName:"Rijwaan"},{displayName:"Ravinder"},{displayName:"Vinod"},{displayName:"Himesh"},{displayName:"Sandeep"}],waitListPlayers:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sukhwinder"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Margo"},{displayName:"Saksham"}],stripePaymentUrl:""}]},{cityId:"4",cityName:"San Jose",countryCode:"US",currency:"USD",dummyData:!1,events:[{uniqueEventId:"10-26-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Vista Montana Park",reservedPlayersCount:18,waitListPlayersCount:9,venueLocationLink:"https://goo.gl/maps/ivkhHaXWM3RBTJ5r9",team_division:!1,team1_color:"",team2_color:"",charges:8.99,reservedPlayersList:[{displayName:"Chen"},{displayName:"Pablo"},{displayName:"Feng"},{displayName:"Leo"},{displayName:"Himesh"},{displayName:"Arturito"},{displayName:"Diego"},{displayName:"Mateo"},{displayName:"Rafael"},{displayName:"Shahin"},{displayName:"Eva"},{displayName:"Astva"},{displayName:"Rishi"},{displayName:"Frank"},{displayName:"Ahmad"},{displayName:"Luca"},{displayName:"Dario"},{displayName:"Bianca"}],waitListPlayers:[{displayName:"Jiang"},{displayName:"Santiago"},{displayName:"Burhan"},{displayName:"Felipe"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Alvaro"},{displayName:"Elise"},{displayName:"Louis"}],stripePaymentUrl:""}]}]}};function We(){const[N,h]=u.exports.useState([]),[_,b]=u.exports.useState(!0),[v,L]=u.exports.useState([]),d=$(),P=m=>{L(t=>[...t,m])},n=m=>new Date(m.date);u.exports.useEffect(()=>{h([]);const m=new AbortController,t=m.signal;return(async()=>{try{const p=await(await fetch(ne,{method:"POST",signal:t,headers:{"Content-Type":"application/json"},body:me})).json();p.data.cities.forEach((S,x)=>{if(V.exports.some(g.data.cities,{cityId:S.cityId}))if(S.events.length>0){const e=p.data.cities[x];e.events.sort((r,i)=>n(i).getTime()-n(r).getTime()),h(r=>[...r,e])}else g.data.cities.forEach((e,r)=>{e.cityName==S.cityName&&h(i=>[...i,g.data.cities[r]])});else if(S.events.length>0){const e=p.data.cities[x];e.events.sort((r,i)=>n(i).getTime()-n(r).getTime()),h(r=>[...r,e])}b(!1)})}catch(f){f instanceof Error&&f.name==="TypeError"&&console.log(f)}})(),()=>{m.abort()}},[v]);const y=()=>(N.sort(t=>t.dummyData===!1?1:-1),N.map(t=>a(ce,{in:!0,style:{transitionDelay:"300ms"},children:o("div",{className:d?s.mobileContainer:s.container,children:[a(te,{cityName:t.cityName,cityId:t.cityId,events:t.events,dummyData:t.dummyData,countryCode:t.countryCode}),a(xe,{gameEvent:t.events,cityName:t.cityName,cityNameId:t.cityId,addPlayerInQueue:P})]})},t.cityId))),I=()=>_?o(ue,{spacing:1,className:s.skeletonContainer,children:[a(A,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton}),a(A,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton}),a(A,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton}),a(A,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton})]}):null;return o(w,{children:[a(K,{title:"Match Queues"}),a(M,{className:s.title,children:"Flickmatch Soccer"}),y(),I()]})}export{We as default};

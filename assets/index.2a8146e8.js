import{a as y,j as a,M as B,K as l,W as F}from"./loginSlice.25a195ef.js";import{l as O}from"./lodash.730ce810.js";import{M as $}from"./Meta.d3d133c3.js";import{r as W,i as G,a as V,bt as K,ap as Q,B as u,T as w,N as X,b as Z,u as R,F as H}from"./App.1046928a.js";import{d as Y,s as t,V as z,J as E,E as ee,a as ae,P as se,C as te}from"./Cities.7dfb31a7.js";import{T as J}from"./TextField.4c2531b4.js";import{A as re,a as ie}from"./MenuItem.f3c0b048.js";import{b as oe,d as le,c as ne}from"./DialogActions.19adcc44.js";import{G as T}from"./Grid.3cfd85bf.js";import{a as de,q as me}from"./constants.70367cb1.js";import{Z as ce}from"./Zoom.e98b7b14.js";import{b as ue,S as D}from"./Stack.f03e7c48.js";import"./index.module.51bb9f99.js";import"./index.dde1919c.js";import"./CurrencyRupeeSharp.112e7647.js";import"./map.839e9770.js";import"./Input.a6509fcf.js";var j={},ye=G.exports;Object.defineProperty(j,"__esModule",{value:!0});var U=j.default=void 0,he=ye(W()),pe=V,Ne=(0,he.default)((0,pe.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");U=j.default=Ne;const Pe="_playerName_18ti2_1",ve="_addButton_18ti2_5",fe="_adminModePanel_18ti2_10",Se="_adminModeTag_18ti2_14",A={playerName:Pe,addButton:ve,adminModePanel:fe,adminModeTag:Se},be={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Le=({onToggle:f,isOpen:S,uniqueEventId:p,cityId:I,handlePassName:b})=>{const k=()=>f(),[n,L]=y.exports.useState(""),[d,h]=y.exports.useState(""),[,x]=K();function m(){x.push({options:{content:a(re,{severity:"success",children:a(ie,{className:A.alertTitle,children:"Player Added Successfully"})})}})}const r=()=>{!n||!d?alert("All input fields are required."):fetch("https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
          joinEvent(input: {
                uniqueEventId: "${p}"
                cityId: "${I}"
                player: {
                  waNumber: "${d}"
                  name: "${n}"
              }
          }) {
            isSuccessful
          }
      }`})}).then(o=>o.json()).then(o=>{o.errors?alert(o.errors[0].message):(b(n),m(),L(""),h(""))}).catch(o=>{alert(o.message)})};return a(B,{children:a(Q,{open:S,onClose:k,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:l(u,{sx:be,children:[l(u,{className:A.adminModePanel,children:[a(w,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Add Player"}),a(X,{label:"admin mode",color:"primary",variant:"outlined",className:A.adminModeTag})]}),a(u,{className:A.playerName,children:a(J,{fullWidth:!0,label:"Player Name",id:"fullWidth",value:n,onChange:o=>L(o.target.value)})}),a(u,{children:a(J,{type:"number",fullWidth:!0,label:"Phone No.",id:"fullWidth",value:d,onChange:o=>h(o.target.value)})}),a(Z,{variant:"contained",endIcon:a(Y,{}),className:A.addButton,onClick:r,children:"Add Player"})]})})})},_e=({gameEvent:f,cityName:S,cityNameId:p,addPlayerInQueue:I})=>{const b=R(),[k,n]=y.exports.useState(!1),[L,d]=y.exports.useState(!1),[h,x]=y.exports.useState(null),m=e=>{const i=document.getElementById(e);if(i){i.scrollIntoView({behavior:"smooth",block:"start"});const s=i.querySelector("[aria-expanded]");s&&s.click(),d(!0),setTimeout(()=>{d(!1)},2e3)}},r=F(e=>e),o=e=>{history.replaceState(null,"",`#${e}`),x(e),n(i=>!i)},_=()=>{h&&o(h)},C=e=>{I(e)};y.exports.useEffect(()=>{const e=window.location.hash.substring(1);e&&m(e)},[]);const N=(e,i)=>a(se,{displayName:e?e.displayName:"Add Name",index:i},i),M=e=>l(u,{className:t.teamDivision,children:[a("span",{className:t.colorTeamA,style:{background:e}}),e||"White"," (Team A)"]}),P=e=>l(u,{className:t.teamDivisionSecond,children:[a("span",{className:t.colorTeamB,style:{background:e}}),e||"Blue"," (Team B)"]});return a(B,{children:(()=>f.map(e=>l(oe,{className:b?t.mobileAccordion:t.accordion,id:e.uniqueEventId,sx:{"&:before":{display:"none"}},children:[a(le,{expandIcon:a(U,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:l(H,{className:t.flexbox,children:[l(H,{className:t.venue,children:[a(z,{venueName:e.venueName,date:e.date,dummyData:e.dummyData?e.dummyData:!1}),b?null:a(E,{stripePaymentUrl:e.stripePaymentUrl,charges:0,date:"",uniqueEventId:e.uniqueEventId,eventId:e.eventId,reservedPlayersCount:e.reservedPlayersCount,reservedPlayersList:e.reservedPlayersList,time:"",venueLocationLink:"",venueName:e.venueName,waitListPlayers:e.waitListPlayers,waitListPlayersCount:e.waitListPlayersCount,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1,handlePassName:C,cityId:p})]}),a(ee,{uniqueEventId:e.uniqueEventId,charges:e.charges,date:e.date,time:e.time,venueLocationLink:e.venueLocationLink,reservedPlayersCount:e.reservedPlayersCount,waitListPlayersCount:e.waitListPlayersCount,eventId:S,cityId:p,reservedPlayersList:e.reservedPlayersList,venueName:e.venueName,waitListPlayers:e.waitListPlayers,stripePaymentUrl:e.stripePaymentUrl,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1,handlePassName:C})]})}),a(ne,{className:L&&window.location.hash.substring(1)===e.uniqueEventId?t.blink:"",children:l(u,{className:t.box,sx:{flexGrow:1},children:[l(u,{className:t.reservedPlayersContainer,children:[a(w,{className:t.reservedPlayers,children:"Reserved Players"}),r.login.isAdmin&&r.login.isLoggedIn?a(ae,{className:t.editIcon,onClick:()=>o(e.uniqueEventId)}):null]}),r.login.isAdmin&&r.login.isLoggedIn&&h===e.uniqueEventId?a(Le,{isOpen:k,onToggle:_,uniqueEventId:h,cityId:p,handlePassName:C}):null,e.team_division?l(u,{children:[M(e.team1_color),a(T,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(i,s)=>{const c=s<e.reservedPlayersList.length?e.reservedPlayersList[s]:null;return N(c,s)})}),a(w,{className:t.versus,children:"v/s"}),P(e.team2_color),a(T,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(i,s)=>{const c=s<e.reservedPlayersList.length?e.reservedPlayersList[s+e.reservedPlayersCount/2]:null;return N(c,s+e.reservedPlayersCount/2)})})]}):a(u,{children:a(T,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount},(i,s)=>{const c=s<e.reservedPlayersList.length?e.reservedPlayersList[s]:null;return N(c,s)})})})]})})]},e.uniqueEventId)))()})},q={data:{cities:[{cityId:"2",cityName:"Hyderabad",countryCode:"IN",dummyData:!1,currency:"INR",events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-1",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:12,waitListPlayersCount:6,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!0,team1_color:"White",team2_color:"Blue",charges:200,reservedPlayersList:[{displayName:"Abhimanyu"},{displayName:"Sourabh"},{displayName:"Kamal"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Jasprit"},{displayName:"Naresh Kumar"},{displayName:"Kaushal"},{displayName:"Nakul"},{displayName:"Parth"},{displayName:"Himanshu"}],waitListPlayers:[{displayName:"Nitin"},{displayName:"Haridev"},{displayName:"Kiyaan"},{displayName:"Monya Amo"},{displayName:"Rolly"},{displayName:"Jhumkar"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-2",date:"Sun, Jan 01",time:"9:00PM-10:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:10,waitListPlayersCount:5,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!1,team1_color:"",team2_color:"",charges:250,reservedPlayersList:[{displayName:"Aryan"},{displayName:"Sarvesh"},{displayName:"Saarthak"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Mayank"},{displayName:"Yash"},{displayName:"Ankur"},{displayName:"Rithik"}],waitListPlayers:[{displayName:"Harsh"},{displayName:"Lovepreet"},{displayName:"Himanshu"},{displayName:"Mohit"},{displayName:"Piyush"}],stripePaymentUrl:""}]},{cityId:"1",cityName:"Gurgaon",countryCode:"IN",currency:"INR",dummyData:!1,events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sumesh"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Saksham"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Anubhav"},{displayName:"Saarthak"},{displayName:"Harshvardhan"},{displayName:"Astitva"},{displayName:"Rishi"},{displayName:"Rijvaan"}],waitListPlayers:[{displayName:"Mukhtaar"},{displayName:"Shubham"},{displayName:"Burhan"},{displayName:"Arif"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Nilesh"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-4",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Harshdeep"},{displayName:"Sarvesh"},{displayName:"Akhilesh"},{displayName:"Sanju"},{displayName:"Prahlad"},{displayName:"Kishore"},{displayName:"Jasprit"},{displayName:"Sooraj"},{displayName:"Bunty Singh"},{displayName:"Rijwaan"},{displayName:"Ravinder"},{displayName:"Vinod"},{displayName:"Himesh"},{displayName:"Sandeep"}],waitListPlayers:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sukhwinder"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Margo"},{displayName:"Saksham"}],stripePaymentUrl:""}]},{cityId:"4",cityName:"San Jose",countryCode:"US",currency:"USD",dummyData:!1,events:[{uniqueEventId:"10-26-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Vista Montana Park",reservedPlayersCount:18,waitListPlayersCount:9,venueLocationLink:"https://goo.gl/maps/ivkhHaXWM3RBTJ5r9",team_division:!1,team1_color:"",team2_color:"",charges:8.99,reservedPlayersList:[{displayName:"Chen"},{displayName:"Pablo"},{displayName:"Feng"},{displayName:"Leo"},{displayName:"Himesh"},{displayName:"Arturito"},{displayName:"Diego"},{displayName:"Mateo"},{displayName:"Rafael"},{displayName:"Shahin"},{displayName:"Eva"},{displayName:"Astva"},{displayName:"Rishi"},{displayName:"Frank"},{displayName:"Ahmad"},{displayName:"Luca"},{displayName:"Dario"},{displayName:"Bianca"}],waitListPlayers:[{displayName:"Jiang"},{displayName:"Santiago"},{displayName:"Burhan"},{displayName:"Felipe"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Alvaro"},{displayName:"Elise"},{displayName:"Louis"}],stripePaymentUrl:""}]}]}};function Fe(){const[f,S]=y.exports.useState([]),[p,I]=y.exports.useState(!0),[b,k]=y.exports.useState([]),n=R(),L=m=>{k(r=>[...r,m])},d=m=>new Date(m.date);y.exports.useEffect(()=>{S([]);const m=new AbortController,r=m.signal;return(async()=>{try{const N=await(await fetch(de,{method:"POST",signal:r,headers:{"Content-Type":"application/json"},body:me})).json(),M=["San Francisco","San Jose","Mountain View"],P=[];N.data.cities.forEach((v,e)=>{if(O.exports.some(q.data.cities,{cityId:v.cityId}))if(v.events.length>0){const s=N.data.cities[e];s.events.sort((c,g)=>d(g).getTime()-d(c).getTime()),P.push(s)}else q.data.cities.forEach((s,c)=>{s.cityName==v.cityName&&P.push(q.data.cities[c])});else if(v.events.length>0){const s=N.data.cities[e];s.events.sort((c,g)=>d(g).getTime()-d(c).getTime()),P.push(s)}I(!1)}),P.sort((v,e)=>{const i=M.indexOf(v.cityName),s=M.indexOf(e.cityName);return i===-1&&s===-1?0:i===-1?-1:s===-1?1:i-s}),S(P)}catch(_){_ instanceof Error&&_.name==="TypeError"&&console.log(_)}})(),()=>{m.abort()}},[b]);const h=()=>(f.sort(r=>r.dummyData===!1?1:-1),f.map(r=>a(ce,{in:!0,style:{transitionDelay:"300ms"},children:l("div",{className:n?t.mobileContainer:t.container,children:[a(te,{cityName:r.cityName,cityId:r.cityId,events:r.events,dummyData:r.dummyData,countryCode:r.countryCode}),a(_e,{gameEvent:r.events,cityName:r.cityName,cityNameId:r.cityId,addPlayerInQueue:L})]})},r.cityId))),x=()=>p?l(ue,{spacing:1,className:t.skeletonContainer,children:[a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton}),a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton}),a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton}),a(D,{variant:"rectangular",className:n?t.mobileSkeleton:t.skeleton})]}):null;return l(B,{children:[a($,{title:"Match Queues"}),a(w,{className:t.title,children:"Flickmatch Soccer"}),h(),x()]})}export{Fe as default};

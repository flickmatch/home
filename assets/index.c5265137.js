import{j as a,K as i,a as d,M as D}from"./loginSlice.25a195ef.js";import{C as A,V as F,J as T,E as q,d as U,P as B}from"./Cities.553b2283.js";import{bs as j,C as J,T as u,ad as M,bE as O,u as $,bu as G,bF as V,F as I,B as f}from"./App.4ee15fd1.js";import{m as R}from"./map.b1fe67ef.js";import{g as z,m as K}from"./index.43539720.js";import{C as W}from"./Container.087b04fb.js";import{b as H,d as Q,c as X}from"./DialogActions.a88aa9aa.js";import{G as C}from"./Grid.222d1022.js";import"./constants.bd73d15a.js";import"./TextField.06e13512.js";import"./Input.92b26610.js";import"./MenuItem.0aa26336.js";const Y="_frames_1lgq2_1",Z={frames:Y};function ee(){return a(W,{sx:{height:"100%"},children:i(j,{flexDirection:"column",children:[a("iframe",{src:z,width:"100%",height:"50%",className:Z.frames,frameBorder:"0",allowFullScreen:!0}),i(J,{flexDirection:"column",children:[a(u,{sx:{mt:2},variant:"h4",color:"error",children:"404 Not Found"}),a(M,{variant:"middle"}),a(u,{variant:"h4",sx:{color:o=>o.palette.info.main},children:K[404]})]})]})})}const re="_title_1fkn3_14",ae="_loading_1fkn3_22",se="_parentContainer_1fkn3_28",te="_portraitContainer_1fkn3_33",ne="_parent_1fkn3_28",ie="_portraitParent_1fkn3_41",oe="_accordion_1fkn3_50",le="_mobileAccordion_1fkn3_56",ce="_linkTag_1fkn3_60",de="_flexbox_1fkn3_64",me="_venue_1fkn3_69",ue="_sportsIcon_1fkn3_82",ye="_box_1fkn3_87",fe="_reservedPlayersContainer_1fkn3_92",pe="_editIcon_1fkn3_96",_e="_reservedPlayers_1fkn3_92",Pe="_waitListPlayers_1fkn3_115",he="_blink_1fkn3_122",t={title:re,loading:ae,parentContainer:se,portraitContainer:te,parent:ne,portraitParent:ie,accordion:oe,mobileAccordion:le,linkTag:ce,flexbox:de,venue:me,sportsIcon:ue,box:ye,reservedPlayersContainer:fe,editIcon:pe,reservedPlayers:_e,waitListPlayers:Pe,blink:he},ge=`${{}.VITE_API_URL}`;function xe(o){return/^[0-9]-\d{4}-\d{2}-\d{2}-[0-9]$/.test(o)}const Ie=async o=>{if(!xe(o))throw new Error("Invalid uniqueEventId");try{const m=await(await fetch(ge,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query event {
          event(uniqueEventId: "${o}") {
            currency
            startTime
            endTime
            eventId
            uniqueEventId
            displayTitle
            venueLocationLink
            charges
            date
            time
            venueName
            reservedPlayersCount
            waitListPlayersCount
            stripePaymentUrl
            reservedPlayersList {
              displayName
            }
            waitListPlayers{
                displayName
            }
          }
        }
      `})})).json();if(m.errors)throw new Error(m.errors[0].message);return m.data.event}catch(c){throw c}},Ce=()=>{const{id:o}=O(),c=$();G();const[m,N]=d.exports.useState(!1),[e,L]=d.exports.useState(null),[k,p]=d.exports.useState(!0),[_,P]=d.exports.useState(null);d.exports.useEffect(()=>{if(!o){P("Event ID is missing."),p(!1);return}(async()=>{try{p(!0);const s=await Ie(o);L(s)}catch(s){P(s.message)}finally{p(!1)}})()},[o]),d.exports.useEffect(()=>{const r=localStorage.getItem("adminIds"),s=localStorage.getItem("userData");if(s){const n=JSON.parse(s);if(r){const y=JSON.parse(r).data.map(S=>S.EmailId).includes(n.email);N(y)}}},[]);function E(r){return(r==null?void 0:r.eventId)!==void 0&&(r==null?void 0:r.eventId)!==null?String(r.eventId):"undefined"}function w(r){return(r==null?void 0:r.reservedPlayersCount)||0}const b=!0;function h(r){const s=(r==null?void 0:r.uniqueEventId)||"",n=s!=""?s.split("-"):"";let l="99999";return l=n.length>0?n[0]:"3",l}function g(r){const s=h(r),n=R.find(l=>l.cityId.toString()===s);return n==null?void 0:n.city}const x=(r,s)=>a(B,{displayName:r?r.displayName:"(Empty)",index:s},s);if(k)return a("div",{className:t.loading,children:a(V,{})});if(_)return i("div",{children:["Error: ",_]});if(!e)return a("div",{className:c?t.portraitContainer:t.parentContainer,children:a("div",{className:t.parent,children:a(ee,{})})});const v=()=>{var r;return i(D,{children:[a(u,{className:t.title,children:"Flickmatch Soccer"}),a(A,{cityId:h(e),cityName:g(e)||"",countryCode:"IN",dummyData:!1,events:[]}),i(H,{className:c?t.mobileAccordion:t.accordion,sx:{"&:before":{display:"none"}},expanded:b,children:[a(Q,{"aria-controls":"panel1a-content",id:"panel1a-header",children:i(I,{className:t.flexbox,children:[i(I,{className:t.venue,children:[a(F,{venueName:e==null?void 0:e.venueName,dummyData:!1,date:e==null?void 0:e.date}),c?null:a(T,{stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",eventId:E(e),reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],time:(e==null?void 0:e.endTime)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,team_division:!1,team1_color:"",team2_color:"",dummyData:!1,singleEvent:!0})]}),a(q,{uniqueEventId:(e==null?void 0:e.uniqueEventId)||"",charges:(e==null?void 0:e.charges)||0,date:(e==null?void 0:e.date)||"",time:(e==null?void 0:e.time)||"",venueLocationLink:(e==null?void 0:e.venueLocationLink)||"",reservedPlayersCount:(e==null?void 0:e.reservedPlayersCount)||0,waitListPlayersCount:(e==null?void 0:e.waitListPlayersCount)||0,eventId:(r=g(e))!=null?r:"",reservedPlayersList:(e==null?void 0:e.reservedPlayersList)||[],venueName:(e==null?void 0:e.venueName)||"",waitListPlayers:[],stripePaymentUrl:(e==null?void 0:e.stripePaymentUrl)||"",team_division:!1,team1_color:"",team2_color:"",dummyData:!1})]})}),i(X,{className:"",children:[i(f,{className:t.box,sx:{flexGrow:1},children:[i(f,{className:t.reservedPlayersContainer,children:[a(u,{className:t.reservedPlayers,children:"Reserved Players"}),m?a(U,{className:t.editIcon}):null]}),a(f,{children:a(C,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:(e==null?void 0:e.reservedPlayersCount)||0},(s,n)=>{const l=n<w(e)?e==null?void 0:e.reservedPlayersList[n]:null;return x(l,n)})})})]}),e.waitListPlayersCount>0?i(f,{className:t.box,sx:{flexGrow:1},children:[a(u,{className:t.waitListPlayers,children:"Waitlist"}),a(C,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e==null?void 0:e.waitListPlayersCount},(s,n)=>{var y;const l=(y=e==null?void 0:e.waitListPlayers[n])!=null?y:null;return x(l,n)})})]}):null]})]})]})};return a("div",{className:c?t.portraitParent:t.parent,children:v()})},qe=Ce;export{qe as default};

import{a as h,W as $,K as i,M as T,j as t}from"./loginSlice.25a195ef.js";import{r as A,i as F,a as U,u as B,e as E,B as _,T as d,d as v,b as x,f as H}from"./App.f3debd5d.js";import{M as L}from"./Meta.a92bddaa.js";import{m as M}from"./map.839e9770.js";import{Z as G}from"./Zoom.6f831be1.js";import"./index.e7b920e9.js";import"./index.module.51bb9f99.js";var w={},J=F.exports;Object.defineProperty(w,"__esModule",{value:!0});var S=w.default=void 0,W=J(A()),K=U,V=(0,W.default)((0,K.jsx)("path",{d:"M13.66 7c-.56-1.18-1.76-2-3.16-2H6V3h12v2h-3.26c.48.58.84 1.26 1.05 2H18v2h-2.02c-.25 2.8-2.61 5-5.48 5h-.73l6.73 7h-2.77L7 14v-2h3.5c1.76 0 3.22-1.3 3.46-3H6V7h7.66z"}),"CurrencyRupee");S=w.default=V;const R="https://firebasestorage.googleapis.com/v0/b/flickmatch-374a2.appspot.com/o/fm_rainbow.png?alt=media&token=1b06ae27-bf10-4974-9100-6bb5f2308314",X="_logo_zh0ju_19",Z="_heading_zh0ju_24",Q="_pageContainer_zh0ju_31",Y="_container_zh0ju_36",ee="_passCard_zh0ju_46",te="_portraitPassCard_zh0ju_47",ae="_ribbon_zh0ju_67",se="_title_zh0ju_116",oe="_subtitle_zh0ju_125",re="_price_zh0ju_130",ie="_currency_zh0ju_138",ne="_status_zh0ju_144",ce="_pulse_zh0ju_1",le="_portraitDetails_zh0ju_160",pe="_details_zh0ju_168",ue="_sportsIcon_zh0ju_195",de="_buyNow_zh0ju_210",me="_footballIcon_zh0ju_235",he="_cityNameContainer_zh0ju_241",ye="_citiesName_zh0ju_248",fe="_citiesImg_zh0ju_258",ge="_testingPurposeTag_zh0ju_262",_e="_blinkAnimation_zh0ju_1",e={logo:X,heading:Z,pageContainer:Q,container:Y,passCard:ee,portraitPassCard:te,ribbon:ae,title:se,subtitle:oe,price:re,currency:ie,status:ne,pulse:ce,portraitDetails:le,details:pe,sportsIcon:ue,buyNow:de,footballIcon:me,cityNameContainer:he,citiesName:ye,citiesImg:fe,testingPurposeTag:ge,blinkAnimation:_e},s={data:{pass:[{passId:"pass5",cityId:"5",passType:"LimitedDays",totalGames:1e3,totalDays:30,price:1e3,title:"30 days pass",status:"Active",features:["No Waitlist","Join game in single click","Exclusive member events"],description:"Pay for 28 days, play 30 games"}]}},be=(o,n,y,f,m)=>fetch("https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${o}"
                    email: "${n}",
                    currency: "${m}",
                    location: "${f}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(c=>c.json()).then(c=>{if(c.errors)throw new Error(c.errors[0].message);return y(c.data.initiatePassPayment.amount),c.data.initiatePassPayment.orderId}).catch(c=>{console.log(c)});function Ne(){return new Promise(o=>{const n=document.createElement("script");n.src="https://checkout.razorpay.com/v1/checkout.js",n.onload=()=>{o(!0)},n.onerror=()=>{o(!1)},document.body.appendChild(n)})}function Ie(){const o=document.querySelector('script[src="https://checkout.razorpay.com/v1/checkout.js"]');o&&document.body.removeChild(o)}const je=(o,n,y,f,m,c,I)=>{async function j(){await Ne()||alert("Razorpay SDK failed to load.Please try again later.");const C={key:"rzp_live_ba3UQjRIBXdeXt",amount:o,currency:"INR",name:"Flickmatch",description:"Flickmatch transaction for football match.",image:"https://firebasestorage.googleapis.com/v0/b/flickmatch-374a2.appspot.com/o/fm_rainbow.png?alt=media&token=1b06ae27-bf10-4974-9100-6bb5f2308314",order_id:n,callback_url:"https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/processPassPayment",redirect:!0,prefill:{name:f,email:y,contact:m},notes:{address:"Tower 8 - Flat 1501, Nirvana Country Rd, The Close South, Sector 50, Gurugram, Haryana 122018"},modal:{ondismiss:function(){I(!1),c(""),Ie(),delete b.Razorpay}},theme:{color:"#4ce95a"}},b=window;new b.Razorpay(C).open()}j()},O="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql";function Te(){const o=B(),n=E(),[y,f]=h.exports.useState([]),[m,c]=h.exports.useState({name:"",email:"",phoneNumber:""}),[I,j]=h.exports.useState(!0),[D,C]=h.exports.useState(0),[b,z]=h.exports.useState(""),N=$(a=>a),[p,q]=h.exports.useState(null),P=window.location.pathname.split("/").pop();h.exports.useEffect(()=>{const a=localStorage.getItem("userData");if(a){const r=JSON.parse(a);c({name:r.name,email:r.email,phoneNumber:""})}},[]),h.exports.useEffect(()=>{(async()=>{try{const u=(await(await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query PassesForCity {
            passesForCity(cityId: "${P}") {
                  passId
                  cityId
                  passType
                  totalGames
                  totalDays
                  price
                  title
                  status
                  features
                  description
            }
              }`})})).json()).data.passesForCity;M.forEach(l=>{Number(P)===Number(l.cityId)&&q({city:l.city,cityId:l.cityId,currency:l.currency,iconUrl:l.iconUrl})}),f(u)}catch(r){f(s.data.pass),r instanceof Error&&r.name==="TypeError"&&(alert(r),n("/match-queues"))}})()},[P]);const k=(a,r,g)=>{N.login.isLoggedIn?I?be(a,m.email,C,r,g).then(u=>{z(u)}).catch(u=>{alert(u)}):fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${a}"
                    email: "${m.email}",
                    currency: "INR",
                    location: "${r}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(l=>l.json()).then(l=>{l.errors&&alert(l.errors[0].message)}).catch(l=>{alert(l)}):(alert("Please login to proceed with the purchase."),n("/login"))};return b&&je(D,b,m.email,m.name,m.phoneNumber,z,j),i(T,{children:[t(L,{title:"Game Passes"}),N.login.isAdmin&&N.login.isLoggedIn?t(G,{in:!0,style:{transitionDelay:"300ms"},children:i(_,{className:e.pageContainer,children:[t(d,{variant:"h3",className:e.heading,children:"Flickmatch Pass"}),p!=null?i("div",{className:e.cityNameContainer,children:[t(d,{className:e.citiesName,children:p.city},p.cityId),t("img",{className:e.citiesImg,src:p.iconUrl,alt:p.city,height:"40px"})]}):null,t(_,{className:e.container,children:i(T,{children:[y.length>0&&p!=null?y.map((a,r)=>i(_,{className:o?e.portraitPassCard:e.passCard,children:[t("img",{src:R,alt:"logo",className:e.logo}),t(d,{variant:"h3",className:e.title,children:a.title?a.title:s.data.pass[0].title}),t(d,{className:e.subtitle,children:a.description?a.description:s.data.pass[0].description}),i(d,{className:e.price,children:[t(S,{className:e.currency}),a.price?a.price:s.data.pass[0].price]}),t(d,{className:e.status,children:a.status?a.status:s.data.pass[0].status}),t("ul",{className:o?e.portraitDetails:e.details,children:a.features!==null&&a.features.length>0?a.features.map((g,u)=>i("li",{children:[t(v,{className:e.footballIcon}),g]},u)):s.data.pass[0].features.map((g,u)=>i("li",{children:[t(v,{className:e.footballIcon}),g]},u))}),t(_,{className:e.ribbon,children:a.title==="Unlimited game pass"?t("span",{style:{fontWeight:600},children:"Best Deal"}):i("span",{children:["For"," ",a.totalDays?a.totalDays:s.data.pass[0].totalDays," ","Days"]})}),t(x,{className:e.buyNow,onClick:()=>k(a.passId,p.city,p.currency),children:"Buy Now"})]},r)):null,N.login.isAdmin&&N.login.isLoggedIn&&p!=null?i(_,{className:o?e.portraitPassCard:e.passCard,children:[t(H,{label:"for testing",color:"primary",variant:"outlined",className:e.testingPurposeTag}),t("img",{src:R,alt:"logo",className:e.logo}),t(d,{variant:"h3",className:e.title,children:s.data.pass[0].title}),t(d,{className:e.subtitle,children:s.data.pass[0].description}),i(d,{className:e.price,children:[t(S,{className:e.currency}),s.data.pass[0].price]}),t(d,{className:e.status,children:s.data.pass[0].status}),t("ul",{className:o?e.portraitDetails:e.details,children:s.data.pass[0].features?s.data.pass[0].features.map((a,r)=>i("li",{children:[t(v,{className:e.footballIcon}),a]},r)):null}),t(_,{className:e.ribbon,children:s.data.pass[0].status==="Unlimited game pass"?t("span",{style:{fontWeight:600},children:"Best Deal"}):i("span",{children:["For ",s.data.pass[0].totalDays," Days"]})}),t(x,{className:e.buyNow,onClick:()=>k(s.data.pass[0].passId,p.city,p.currency),children:"Buy Now"})]}):null]})})]})}):n("/match-queues")]})}export{Te as default};

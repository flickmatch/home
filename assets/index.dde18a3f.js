import{a as i,E as a,G as oe,j as e}from"./index.a525f6e3.js";import{r as ce,i as le,a as de,ba as me,b9 as ue,F as o,B as r,T as c,b as pe}from"./App.6b175fa3.js";import{d as he}from"./AccountBalance.92d226c7.js";import{l,C as fe,d as Te,m as ye}from"./map.3bd50773.js";import{d as _e,a as ve}from"./RoundedCornerOutlined.18903f32.js";import{u as Ne,M as ge,H as Se,F as Ie}from"./Header.e02add7b.js";import{q as Ce}from"./constants.521cb428.js";import{Z as Pe,h as P,S as k,T as _,d as x,e as D}from"./TextField.dd4720c5.js";import{M as E}from"./MenuItem.c5bf6d2e.js";import{I as ke}from"./InputAdornment.9c6035a9.js";import"./index.b007b2a3.js";import"./index.module.325f48be.js";var N={},xe=le.exports;Object.defineProperty(N,"__esModule",{value:!0});var v=N.default=void 0,De=xe(ce()),b=de,Ee=(0,De.default)([(0,b.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,b.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");v=N.default=Ee;const be="_container_1l8v3_1",we="_portraitContainere_1l8v3_2",Ae="_title_1l8v3_16",Fe="_divider_1l8v3_22",Me="_fieldTitle_1l8v3_30",$e="_fieldTitleIcon_1l8v3_36",je="_sectionFirst_1l8v3_43",qe="_sectionSecond_1l8v3_44",Le="_sectionThird_1l8v3_45",Oe="_portraitSectionThird_1l8v3_53",Be="_formSection_1l8v3_59",Ve="_selectInput_1l8v3_65",Ge="_sectionFourth_1l8v3_69",We="_createButton_1l8v3_76",He="_dateTimePicker_1l8v3_94",Re="_portaitDateTimePicker_1l8v3_98",ze="_startTimePicker_1l8v3_103",Ue="_startEndPicker_1l8v3_104",Je="_selectStartTimeInput_1l8v3_109",t={container:be,portraitContainere:we,title:Ae,divider:Fe,fieldTitle:Me,fieldTitleIcon:$e,sectionFirst:je,sectionSecond:qe,sectionThird:Le,portraitSectionThird:Oe,formSection:Be,selectInput:Ve,sectionFourth:Ge,createButton:We,dateTimePicker:He,portaitDateTimePicker:Re,startTimePicker:ze,startEndPicker:Ue,selectStartTimeInput:Je},Ze="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",w="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function ct(){const T=Ne(),A=me(),[,g]=ue(),[F,M]=i.exports.useState(!1),[u,$]=i.exports.useState(""),[p,j]=i.exports.useState(""),[q,y]=i.exports.useState(""),[h,L]=i.exports.useState(""),[S,O]=i.exports.useState(""),[d,B]=i.exports.useState(""),[V,G]=i.exports.useState([]),[W,H]=i.exports.useState([]),[I,R]=i.exports.useState(""),[C,z]=i.exports.useState("");i.exports.useEffect(()=>{localStorage.getItem("userData")&&M(!0)},[]),i.exports.useEffect(()=>{const s=new AbortController,n=s.signal;return(async()=>{try{const ne=await(await fetch(w,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:Ce})).json();G(ne.data.cities)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})(),()=>{s.abort()}},[]);const U=s=>{(async()=>{try{const m=await(await fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${s}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();H(m.data.city.sportsVenues)}catch(f){f instanceof Error&&f.name==="TypeError"&&console.log(f.message)}})()},J=s=>{$(s.target.value),y(""),ye.forEach(n=>{n.cityId===l.exports.parseInt(s.target.value)&&O(n.currency)}),U(s.target.value)},Z=s=>{j(s.target.value)};function Q(){g.push({options:{content:e(x,{severity:"error",children:a(D,{className:t.alertTitle,children:[u===""?"City Name":p===""?"Turf Name":h===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function K(){g.push({options:{content:e(x,{severity:"success",children:e(D,{className:t.alertTitle,children:"Turf Added Successfully"})})}})}const X={input:{cityId:u,charges:l.exports.parseInt(h),sportsVenueId:p,startTime:I,endTime:C,reservedPlayersCount:l.exports.parseInt(d),waitListPlayersCount:l.exports.parseInt(d)/2}},Y=()=>{u===""||p===""||h===""||d===""?Q():fetch(Ze,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${u}"
                      charges: ${l.exports.parseInt(h)},
                      sportsVenueId: "${p}",
                      startTime: "${I+"+0530"}",
                      endTime: "${C+"+0530"}",
                      reservedPlayersCount: ${l.exports.parseInt(d)},
                      waitListPlayersCount: ${l.exports.parseInt(d)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:X.input})}).then(s=>s.json()).then(s=>{if(s.errors)throw new Error(s.errors[0].message);K(),A("/match-queues"),console.log(s.data)}).catch(s=>{console.log(s)})},ee=()=>a(r,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(he,{className:t.fieldTitleIcon}),e(P,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:u,onChange:J,style:{width:"100%"},children:V.map((s,n)=>e(E,{value:s.cityId,style:{width:"100%"},children:s.cityName},n))})})]}),te=()=>a(r,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(_e,{className:t.fieldTitleIcon}),e(P,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:p,onChange:Z,style:{width:"100%"},children:W.map((s,n)=>e(E,{value:s.sportsVenueId,style:{width:"100%"},onClick:()=>y(s.googleMapsLink),children:s.displayName},n))})})]}),se=()=>a(r,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(ve,{className:t.fieldTitleIcon}),e(_,{fullWidth:!0,value:q,onChange:s=>y(s.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),ae=()=>a(o,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[a(r,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(v,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>R(s.target.value)})]})}),e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[a(r,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(v,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>z(s.target.value)})]})})]}),re=()=>a(o,{className:t.sectionThird,children:[e(r,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(_,{InputProps:{startAdornment:e(ke,{position:"start",children:S==="INR"?e(fe,{}):S==="USD"?e(Te,{}):null})},fullWidth:!0,value:h,onChange:s=>L(s.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(r,{className:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(_,{fullWidth:!0,value:d,onChange:s=>B(s.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),ie=()=>e(r,{className:t.sectionFourth,children:e(pe,{variant:"contained",color:"success",className:t.createButton,onClick:Y,children:"Add Game"})});return a(oe,{children:[e(ge,{title:"Add Game"}),e("div",{children:e(Se,{loggedIn:F})}),e(Pe,{in:!0,style:{transitionDelay:"300ms"},children:a(o,{className:T?t.portraitContainere:t.container,children:[a(r,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(r,{className:t.divider})]}),a(o,{className:t.formSection,children:[ee(),te(),se(),ae(),re(),ie()]})]})}),e(Ie,{})]})}export{ct as default};

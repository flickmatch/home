import{W as xe,a as r,a6 as be,A as s,F as D,j as e}from"./loginSlice.ea7b6bcd.js";import{r as we,a as Ee,u as Me,e as Ae,bP as De,F as n,Y as $e,B as i,T as c,bY as Be,bR as Ge,b as Fe}from"./App.7bc3b8f6.js";import{d as je}from"./AccountBalance.f44094e8.js";import{d as We}from"./CrisisAlertOutlined.0863e3dc.js";import{l as p}from"./lodash.8d197e71.js";import{S as P,q as qe}from"./sweetalert2.esm.all.f1ff4370.js";import{M as Le}from"./Meta.92a8455c.js";import{Z as Oe}from"./Zoom.3be9b386.js";import{T,F as I}from"./TextField.7e22eca8.js";import{S as k}from"./Select.80b19b87.js";import{M as f}from"./MenuItem.15f04ab4.js";import{I as Re,S as Ve}from"./Switch.966a2ceb.js";import{C as Ue}from"./CurrencyRupeeSharp.64cacc5b.js";import{A as $,a as B}from"./AlertTitle.0e7567d3.js";import"./index.f85951c6.js";import"./index.module.86d27b7e.js";import"./Input.ae88cc7e.js";import"./SwitchBase.300a8783.js";var F={},Ye=xe.exports;Object.defineProperty(F,"__esModule",{value:!0});var G=F.default=void 0,ze=Ye(we()),Y=Ee;G=F.default=(0,ze.default)([(0,Y.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Y.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");const Je="_container_1s8oy_1",Ze="_portraitContainer_1s8oy_2",He="_adminModeTag_1s8oy_23",Qe="_title_1s8oy_30",Ke="_divider_1s8oy_39",Xe="_fieldTitle_1s8oy_47",et="_fieldTitleIcon_1s8oy_53",tt="_sectionFirst_1s8oy_60",at="_sectionSecond_1s8oy_61",st="_sectionThird_1s8oy_62",it="_portraitSectionThird_1s8oy_70",rt="_formSection_1s8oy_76",ot="_selectInput_1s8oy_82",nt="_sectionFourth_1s8oy_86",ct="_createButton_1s8oy_93",lt="_dateTimePicker_1s8oy_112",dt="_portaitDateTimePicker_1s8oy_116",mt="_startTimePicker_1s8oy_121",ht="_startEndPicker_1s8oy_122",ut="_selectStartTimeInput_1s8oy_127",pt="_switchBtn_1s8oy_134",t={container:Je,portraitContainer:Ze,adminModeTag:He,title:Qe,divider:Ke,fieldTitle:Xe,fieldTitleIcon:et,sectionFirst:tt,sectionSecond:at,sectionThird:st,portraitSectionThird:it,formSection:rt,selectInput:ot,sectionFourth:nt,createButton:ct,dateTimePicker:lt,portaitDateTimePicker:dt,startTimePicker:mt,startEndPicker:ht,selectStartTimeInput:ut,switchBtn:pt},z={}.VITE_API_URL,J={}.VITE_API_URL;function Dt(){const _=Me(),x=Ae(),[,b]=De(),[y,Z]=r.exports.useState(""),[N,H]=r.exports.useState(""),[Q,w]=r.exports.useState(""),[g,K]=r.exports.useState(""),[j,X]=r.exports.useState(""),[h,ee]=r.exports.useState(""),[E,te]=r.exports.useState([]),[M,ae]=r.exports.useState([]),[W,se]=r.exports.useState(""),[q,ie]=r.exports.useState(""),[L,re]=r.exports.useState(""),[A,oe]=r.exports.useState(!1),[u,ne]=r.exports.useState(!0),[S,ce]=r.exports.useState("Bibs"),[C,le]=r.exports.useState("No Bibs"),[O,de]=r.exports.useState(""),[R,me]=r.exports.useState(""),v=be(a=>a);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(v.login.isAdmin||P.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{x("/match-queues")}))},[v.login.isAdmin,x]),r.exports.useEffect(()=>{const a=new AbortController,d=a.signal;return(async()=>{try{const m=await(await fetch(J,{method:"POST",signal:d,headers:{"Content-Type":"application/json"},body:qe})).json();te(m.data.cities)}catch(o){o instanceof Error&&o.name==="TypeError"&&console.log(o.message)}})(),()=>{a.abort()}},[]);const he=a=>{(async()=>{try{const o=await(await fetch(J,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                  pinCode
                }      
              }
            }`})})).json();ae(o.data.city.sportsVenues)}catch(l){l instanceof Error&&l.name==="TypeError"&&console.log(l.message)}})()},ue=async a=>{Z(a.target.value),w("");const l=await(await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${a.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();l.data.city.cityId===a.target.value&&X(l.data.city.countryCode),he(a.target.value)},pe=a=>{H(a.target.value)};function Te(){b.push({options:{content:e($,{severity:"info",children:s(B,{className:t.alertTitle,children:[y===""?"City name":N===""?"Turf name":g===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function fe(){b.push({options:{content:e($,{severity:"success",children:e(B,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function V(a){b.push({options:{content:e($,{severity:"error",children:e(B,{className:t.alertTitle,children:a})})}})}const ye={input:{cityId:y,charges:p.exports.parseInt(g),sportsVenueId:N,startTime:W,endTime:q,reservedPlayersCount:p.exports.parseInt(h),waitListPlayersCount:p.exports.parseInt(h)/2}},Ne=()=>{y===""||N===""||g===""||h===""?Te():u&&(S===""||C==="")?P.fire({title:"Invalid Selection",text:"Please select team colors for both teams!",icon:"warning"}):fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${y}"
                      charges: ${p.exports.parseInt(g)}
                      sportsVenueId: "${N}"
                      startTime: "${W+"+0530"}"
                      endTime: "${q+"+0530"}"
                      reservedPlayersCount: ${p.exports.parseInt(h)}
                      waitListPlayersCount: ${p.exports.parseInt(h)/2}
                      credits: ${Number(L)}
                      testGame: ${A}
                      teamDivision: ${u}
                      team1Color: "${S}"
                      team2Color: "${C}"
                      team1Name: "${O}"
                      team2Name: "${R}"
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:ye.input})}).then(a=>a.json()).then(a=>{a.data.createEvent.isSuccessful===!1?V(a.data.createEvent.errorMessage):(fe(),x("/match-queues"))}).catch(a=>{V(a.message),console.log(a)})},ge=()=>s(i,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(je,{className:t.fieldTitleIcon}),e(I,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:y,onChange:ue,style:{width:"100%"},children:E==null?void 0:E.map((a,d)=>e(f,{value:a.cityId,style:{width:"100%"},children:a.cityName},d))})})]}),_e=()=>s(i,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(Be,{className:t.fieldTitleIcon}),e(I,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:N,onChange:pe,style:{width:"100%"},children:M==null?void 0:M.map((a,d)=>e(f,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>w(a.googleMapsLink),children:a.displayName},d))})})]}),Se=()=>s(i,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(We,{className:t.fieldTitleIcon}),e(T,{fullWidth:!0,value:Q,onChange:a=>w(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),Ce=()=>s(n,{className:_?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:_?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(G,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>se(a.target.value)})]})}),e(i,{className:_?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(G,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>ie(a.target.value)})]})})]}),ve=()=>s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(T,{InputProps:{startAdornment:e(Re,{position:"start",children:j==="INR"?e(Ue,{}):j==="USD"?e(Ge,{}):null})},fullWidth:!0,value:g,onChange:a=>{K(a.target.value),re(a.target.value)},placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(T,{fullWidth:!0,value:h,onChange:a=>ee(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),U=a=>e(i,{children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:a==="testGame"?"Test Game":"Team Division"})}),e(Ve,{className:t.switchBtn,checked:a==="testGame"?A:u,onChange:()=>{a==="testGame"?oe(!A):ne(!u)},color:"default",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4ce95a"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4ce95a"}}})]})}),Pe=()=>{const a=["Black","White","Red","Blue","Yellow","Orange","Green","Light Purple","Purple","Bibs","No Bibs"],d=o=>{const m=o.target.value;m===C?P.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):ce(m)},l=o=>{const m=o.target.value;m===S?P.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):le(m)};return s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 1"})}),e(I,{fullWidth:!0,children:s(k,{value:S,onChange:d,displayEmpty:!0,inputProps:{"aria-label":"Team 1 Color"},children:[e(f,{value:"",disabled:!0,children:"Select Team 1 Color"}),a.map(o=>e(f,{value:o,children:o},o))]})})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 2"})}),e(I,{fullWidth:!0,children:s(k,{value:C,onChange:l,displayEmpty:!0,inputProps:{"aria-label":"Team 2 Color"},children:[e(f,{value:"",disabled:!0,children:"Select Team 2 Color"}),a.map(o=>e(f,{value:o,children:o},o))]})})]})})]})},Ie=()=>s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 1"})}),e(T,{fullWidth:!0,value:O,onChange:a=>de(a.target.value),placeholder:"Name",id:"team1Name"})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Team 2"})}),e(T,{fullWidth:!0,value:R,onChange:a=>me(a.target.value),placeholder:"Name",id:"team2Name"})]})})]}),ke=()=>e(i,{className:t.sectionFourth,children:e(Fe,{variant:"contained",color:"success",className:t.createButton,onClick:Ne,children:"Add Game"})});return s(D,{children:[e(Le,{title:"Add Game"}),v.login.isAdmin&&v.login.isLoggedIn?e(D,{children:e(Oe,{in:!0,style:{transitionDelay:"300ms"},children:s(n,{className:_?t.portraitContainer:t.container,children:[e($e,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(n,{className:t.formSection,children:[ge(),_e(),Se(),Ce(),ve(),s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Game Credits"})}),e(T,{fullWidth:!0,value:L,disabled:!0,placeholder:"Credits",id:"fullWidth",type:"number"})]})}),U("testGame"),U("teamDivision")]}),u&&Pe(),u&&Ie(),e("br",{}),ke()]})]})})}):e(D,{})]})}export{Dt as default};

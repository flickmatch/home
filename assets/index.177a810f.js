import{a as f,j as a,M as F,K as m,W}from"./loginSlice.f61746a0.js";import{l as v}from"./lodash.dcf1d9ce.js";import{M as K}from"./Meta.f84e0ce5.js";import{r as V,i as Q,a as X,bu as Z,M as Y,B as n,T as j,S as z,b as g,u as G,F as O}from"./App.7ce93480.js";import{d as E,s as t,V as ee,J as ae,E as se,a as te,P as re,C as oe}from"./Cities.25616557.js";import{T as U}from"./TextField.b250d883.js";import{A as ie,a as de}from"./AlertTitle.5c73f370.js";import{A as me,b as le,a as ne,G as H}from"./Grid.2ae773ab.js";import{a as ue,q as ce}from"./sweetalert2.all.f3d0fd44.js";import{Z as he}from"./Zoom.5328a19f.js";import{b as Ne,S as q}from"./Stack.cb3abcc8.js";import"./index.module.002e5337.js";import"./index.c57093b9.js";import"./Select.4091815a.js";import"./Input.0ecb0c6c.js";import"./MenuItem.d3fef43d.js";import"./CurrencyRupeeSharp.10e22bdd.js";import"./Avatar.43c9399b.js";import"./map.839e9770.js";var R={},ye=Q.exports;Object.defineProperty(R,"__esModule",{value:!0});var $=R.default=void 0,Pe=ye(V()),pe=X,fe=(0,Pe.default)((0,pe.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");$=R.default=fe;const xe="_playerName_18ti2_1",be="_addButton_18ti2_5",Ce="_adminModePanel_18ti2_10",Se="_adminModeTag_18ti2_14",w={playerName:xe,addButton:be,adminModePanel:Ce,adminModeTag:Se},Le={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},De=({onToggle:L,isOpen:D,uniqueEventId:C,cityId:M,handlePassName:h})=>{const I=()=>L(),[x,y]=f.exports.useState(""),[b,u]=f.exports.useState(""),[,k]=Z();function _(){k.push({options:{content:a(ie,{severity:"success",children:a(de,{className:w.alertTitle,children:"Player Added Successfully"})})}})}const d=()=>{!x||!b?alert("All input fields are required."):fetch("https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
          joinEvent(input: {
                uniqueEventId: "${C}"
                cityId: "${M}"
                player: {
                  waNumber: "${b}"
                  name: "${x}"
              }
          }) {
            isSuccessful
          }
      }`})}).then(s=>s.json()).then(s=>{s.errors?alert(s.errors[0].message):(h(x),_(),y(""),u(""))}).catch(s=>{alert(s.message)})};return a(F,{children:a(Y,{open:D,onClose:I,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:m(n,{sx:Le,children:[m(n,{className:w.adminModePanel,children:[a(j,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Add Player"}),a(z,{label:"admin mode",color:"primary",variant:"outlined",className:w.adminModeTag})]}),a(n,{className:w.playerName,children:a(U,{fullWidth:!0,label:"Player Name",id:"fullWidth",value:x,onChange:s=>y(s.target.value)})}),a(n,{children:a(U,{type:"number",fullWidth:!0,label:"Phone No.",id:"fullWidth",value:b,onChange:s=>u(s.target.value)})}),a(g,{variant:"contained",endIcon:a(E,{}),className:w.addButton,onClick:d,children:"Add Player"})]})})})},Ae=({gameEvent:L,cityName:D,cityNameId:C,addPlayerInQueue:M})=>{const h=G(),[I,x]=f.exports.useState(!1),[y,b]=f.exports.useState(!1),[u,k]=f.exports.useState(null),_=e=>{const o=document.getElementById(e);if(o){o.scrollIntoView({behavior:"smooth",block:"start"});const l=o.querySelector("[aria-expanded]");l&&l.click(),b(!0),setTimeout(()=>{b(!1)},2e3)}},d=W(e=>e),s=e=>{history.replaceState(null,"",`#${e}`),k(e),x(o=>!o)},B=()=>{u&&s(u)},N=e=>{M(e)};f.exports.useEffect(()=>{const e=window.location.hash.substring(1);e&&_(e)},[]);const P=(e,o,l)=>a(re,{displayName:e?e.displayName:"Add Name",index:o,points:e==null?void 0:e.points,mobilePoints:e==null?void 0:e.mobilePoints,dummyData:l,id:e==null?void 0:e.id,role:e==null?void 0:e.role},o),S=e=>{const o=e.toLowerCase()==="bibs"?"Orange":e.toLowerCase()==="no bibs"||!e?"White":e;return m(n,{className:t.teamDivision,children:[a("span",{className:t.colorTeamA,style:{background:o}}),e," (Team A)"]})},T=e=>{const o=e.toLowerCase()==="bibs"||e.toLowerCase()==="no bibs"||!e?"White":e;return m(n,{className:t.teamDivisionSecond,children:[a("span",{className:t.colorTeamB,style:{background:o}}),e," (Team B)"]})};return a(F,{children:(()=>L.map(e=>{let o=[],l=[];if(e!=null&&e.teamDivision){o=e.reservedPlayersList.filter(p=>p.teamColor===(e==null?void 0:e.team1Color)),l=e.reservedPlayersList.filter(p=>p.teamColor===(e==null?void 0:e.team2Color));const i=e.reservedPlayersCount-e.reservedPlayersList.length,r=Array.from({length:i},()=>({displayName:"Add Name",teamColor:""}));e.reservedPlayersList.filter(p=>p.teamColor===null).concat(r).forEach(p=>{o.length<=l.length?o.push(p?{...p,teamColor:e.team1Color}:{displayName:"Add Name",teamColor:e.team1Color}):l.push(p?{...p,teamColor:e.team2Color}:{displayName:"Add Name",teamColor:e.team2Color})})}return m(me,{className:h?t.mobileAccordion:t.accordion,id:e.uniqueEventId,sx:{"&:before":{display:"none"}},children:[a(le,{expandIcon:a($,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:m(O,{className:t.flexbox,children:[m(O,{className:t.venue,children:[a(ee,{venueName:e.venueName,date:e.date,dummyData:e.dummyData?e.dummyData:!1}),h?null:a(ae,{stripePaymentUrl:e.stripePaymentUrl,charges:0,date:"",uniqueEventId:e.uniqueEventId,eventId:e.eventId,reservedPlayersCount:e.reservedPlayersCount,reservedPlayersList:e.reservedPlayersList,time:"",venueLocationLink:"",venueName:e.venueName,waitListPlayers:e.waitListPlayers,waitListPlayersCount:e.waitListPlayersCount,team_division:(e==null?void 0:e.teamDivision)||!1,team1_color:e!=null&&e.team1Color?e==null?void 0:e.team1Color:"",team2_color:e!=null&&e.team2Color?e==null?void 0:e.team2Color:"",dummyData:e.dummyData?e.dummyData:!1,handlePassName:N,cityId:C,credits:e.credits?e.credits:0})]}),a(se,{uniqueEventId:e.uniqueEventId,charges:e.charges,date:e.date,time:e.time,venueLocationLink:e.venueLocationLink,reservedPlayersCount:e.reservedPlayersCount,waitListPlayersCount:e.waitListPlayersCount,eventId:D,cityId:C,reservedPlayersList:e.reservedPlayersList,venueName:e.venueName,waitListPlayers:e.waitListPlayers,stripePaymentUrl:e.stripePaymentUrl,team_division:e.teamDivision?e.teamDivision:!1,team1_color:e.team1Color?e.team1Color:"",team2_color:e.team2Color?e.team2Color:"",dummyData:e.dummyData?e.dummyData:!1,handlePassName:N,credits:e.credits?e.credits:0})]})}),a(ne,{className:y&&window.location.hash.substring(1)===e.uniqueEventId?t.blink:t.accordionDetailsContainer,children:m(n,{className:t.box,sx:{flexGrow:1},children:[m(n,{className:t.reservedPlayersContainer,children:[a(j,{className:t.reservedPlayers,children:"Reserved Players"}),d.login.isAdmin&&d.login.isLoggedIn?a(te,{className:t.editIcon,onClick:()=>s(e.uniqueEventId)}):null]}),d.login.isAdmin&&d.login.isLoggedIn&&u===e.uniqueEventId?a(De,{isOpen:I,onToggle:B,uniqueEventId:u,cityId:C,handlePassName:N}):null,e!=null&&e.teamDivision?m(n,{children:[S((e==null?void 0:e.team1Color)||"Orange"),a(H,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:e!=null&&e.teamDivision?o.map((i,r)=>P(i,r,e==null?void 0:e.dummyData)):Array.from({length:e.reservedPlayersCount/2},(i,r)=>{const c=r<e.reservedPlayersList.length?e.reservedPlayersList[r]:null;return P(c,r,e==null?void 0:e.dummyData)})}),a(j,{className:t.versus,children:"v/s"}),T((e==null?void 0:e.team2Color)||"White"),a(H,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:e!=null&&e.teamDivision?l.map((i,r)=>P(i,r,e==null?void 0:e.dummyData)):Array.from({length:e.reservedPlayersCount/2},(i,r)=>{const c=r<e.reservedPlayersList.length?e.reservedPlayersList[r+e.reservedPlayersCount/2]:null;return P(c,r+e.reservedPlayersCount/2,e==null?void 0:e.dummyData)})})]}):m(F,{children:[d.login.isAdmin&&e.dummyData&&h?a(n,{style:{width:100}}):a(n,{children:a(H,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount},(i,r)=>{const c=r<e.reservedPlayersList.length?e.reservedPlayersList[r]:null;return P(c,r,e.dummyData)})})}),d.login.isAdmin&&e.dummyData&&h?m(n,{className:h?t.portraitGroundImageContainer:t.groundImageContainer,children:[a(n,{className:t.dragContainer,children:Array.from({length:e.reservedPlayersCount},(i,r)=>{const c=r<e.reservedPlayersList.length?e.reservedPlayersList[r]:null;return P(c,r,e.dummyData)})}),a("img",{src:h?"ground-portrait.jpeg":"/ground-3d-cropped.jpeg",alt:"ground",height:670,className:h?t.portraitGroundImage:t.groundImage})]}):null]})]})})]},e.uniqueEventId)}))()})},J={data:{cities:[{cityId:"2",cityName:"Hyderabad",countryCode:"IN",dummyData:!1,currency:"INR",events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-1",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:12,waitListPlayersCount:6,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!0,team1_color:"White",team2_color:"Blue",charges:200,reservedPlayersList:[{displayName:"Abhimanyu"},{displayName:"Sourabh"},{displayName:"Kamal"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Jasprit"},{displayName:"Naresh Kumar"},{displayName:"Kaushal"},{displayName:"Nakul"},{displayName:"Parth"},{displayName:"Himanshu"}],waitListPlayers:[{displayName:"Nitin"},{displayName:"Haridev"},{displayName:"Kiyaan"},{displayName:"Monya Amo"},{displayName:"Rolly"},{displayName:"Jhumkar"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-2",date:"Sun, Jan 01",time:"9:00PM-10:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:10,waitListPlayersCount:5,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!1,team1_color:"",team2_color:"",charges:250,reservedPlayersList:[{displayName:"Aryan"},{displayName:"Sarvesh"},{displayName:"Saarthak"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Mayank"},{displayName:"Yash"},{displayName:"Ankur"},{displayName:"Rithik"}],waitListPlayers:[{displayName:"Harsh"},{displayName:"Lovepreet"},{displayName:"Himanshu"},{displayName:"Mohit"},{displayName:"Piyush"}],stripePaymentUrl:""}]},{cityId:"1",cityName:"Gurgaon",countryCode:"IN",currency:"INR",dummyData:!1,events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sumesh"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Saksham"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Anubhav"},{displayName:"Saarthak"},{displayName:"Harshvardhan"},{displayName:"Astitva"},{displayName:"Rishi"},{displayName:"Rijvaan"}],waitListPlayers:[{displayName:"Mukhtaar"},{displayName:"Shubham"},{displayName:"Burhan"},{displayName:"Arif"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Nilesh"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-4",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Harshdeep"},{displayName:"Sarvesh"},{displayName:"Akhilesh"},{displayName:"Sanju"},{displayName:"Prahlad"},{displayName:"Kishore"},{displayName:"Jasprit"},{displayName:"Sooraj"},{displayName:"Bunty Singh"},{displayName:"Rijwaan"},{displayName:"Ravinder"},{displayName:"Vinod"},{displayName:"Himesh"},{displayName:"Sandeep"}],waitListPlayers:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sukhwinder"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Margo"},{displayName:"Saksham"}],stripePaymentUrl:""}]},{cityId:"4",cityName:"San Jose",countryCode:"US",currency:"USD",dummyData:!1,events:[{uniqueEventId:"10-26-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Vista Montana Park",reservedPlayersCount:22,waitListPlayersCount:9,venueLocationLink:"https://goo.gl/maps/ivkhHaXWM3RBTJ5r9",team_division:!1,team1_color:"",team2_color:"",charges:8.99,reservedPlayersList:[{displayName:"Chen",points:{x:16,y:46},mobilePoints:{x:46,y:26},id:1,role:"WK"},{displayName:"Pablo",points:{x:20,y:10},mobilePoints:{x:6,y:100},id:2,role:"MF"},{displayName:"Feng",points:{x:20,y:30},mobilePoints:{x:30,y:100},id:3,role:"MF"},{displayName:"Leo",points:{x:20,y:60},mobilePoints:{x:63,y:100},id:4,role:"MF"},{displayName:"Himesh",points:{x:20,y:80},mobilePoints:{x:84,y:100},id:5,role:"MF"},{displayName:"Arturito",points:{x:27,y:10},mobilePoints:{x:6,y:170},id:6,role:"MD"},{displayName:"Diego",points:{x:27,y:30},mobilePoints:{x:30,y:170},id:7,role:"MD"},{displayName:"Mateo",points:{x:27,y:60},mobilePoints:{x:63,y:170},id:8,role:"MD"},{displayName:"Rafael",points:{x:27,y:80},mobilePoints:{x:84,y:170},id:9,role:"MD"},{displayName:"Shahin",points:{x:35,y:21},mobilePoints:{x:30,y:240},id:10,role:"A"},{displayName:"Eva",points:{x:35,y:67},mobilePoints:{x:63,y:240},id:11,role:"A"},{displayName:"Astva",points:{x:47,y:21},mobilePoints:{x:30,y:370},id:12,role:"A"},{displayName:"Rishi",points:{x:47,y:67},mobilePoints:{x:63,y:370},id:13,role:"A"},{displayName:"Frank",points:{x:56,y:10},mobilePoints:{x:6,y:440},id:14,role:"MD"},{displayName:"Ahmad",points:{x:56,y:30},mobilePoints:{x:30,y:440},id:15,role:"MD"},{displayName:"Luca",points:{x:56,y:60},mobilePoints:{x:63,y:440},id:16,role:"MD"},{displayName:"Dario",points:{x:56,y:80},mobilePoints:{x:84,y:440},id:17,role:"MD"},{displayName:"Bianca",points:{x:63,y:10},mobilePoints:{x:6,y:520},id:18,role:"MF"},{displayName:"Sharan",points:{x:63,y:30},mobilePoints:{x:30,y:520},id:19,role:"MF"},{displayName:"Ferruro",points:{x:63,y:60},mobilePoints:{x:63,y:520},id:20,role:"MF"},{displayName:"Sahil",points:{x:63,y:80},mobilePoints:{x:84,y:520},id:21,role:"MF"},{displayName:"Hitesh",points:{x:79,y:46},mobilePoints:{x:46,y:590},id:22,role:"WK"}],waitListPlayers:[{displayName:"Jiang"},{displayName:"Santiago"},{displayName:"Burhan"},{displayName:"Felipe"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Alvaro"},{displayName:"Elise"},{displayName:"Louis"}],stripePaymentUrl:""}]}]}};function Ke(){const[L,D]=f.exports.useState([]),[C,M]=f.exports.useState(!0),[h,I]=f.exports.useState([]),x=W(d=>d),y=G(),b=d=>{I(s=>[...s,d])},u=d=>new Date(d.date);f.exports.useEffect(()=>{D([]);const d=new AbortController,s=d.signal;return(async()=>{try{const S=await(await fetch(ue,{method:"POST",signal:s,headers:{"Content-Type":"application/json"},body:ce})).json(),T=["San Francisco","San Jose","Mountain View"],A=[];S.data.cities.forEach((e,o)=>{if(v.exports.some(J.data.cities,{cityId:e.cityId}))if(e.events.length>0){const i=S.data.cities[o];i.events.sort((r,c)=>u(c).getTime()-u(r).getTime()),A.push(i)}else J.data.cities.forEach((i,r)=>{i.cityName==e.cityName&&A.push(J.data.cities[r])});else if(e.events.length>0){const i=S.data.cities[o];i.events.sort((r,c)=>u(c).getTime()-u(r).getTime()),A.push(i)}M(!1)}),A.sort((e,o)=>{const l=T.indexOf(e.cityName),i=T.indexOf(o.cityName);return l===-1&&i===-1?0:l===-1?-1:i===-1?1:l-i}),D(A)}catch(N){N instanceof Error&&N.name==="TypeError"&&console.log(N)}})(),()=>{d.abort()}},[h]);const k=()=>(L.sort(s=>s.dummyData===!1?1:-1),L.map(s=>{var N,P;return((P=(N=s==null?void 0:s.events)==null?void 0:N.filter(S=>S.testGame!==!0))==null?void 0:P.length)===0&&!x.login.isAdmin?null:a(he,{in:!0,style:{transitionDelay:"300ms"},children:m("div",{className:y?t.mobileContainer:t.container,children:[a(oe,{cityName:s.cityName,cityId:s.cityId,events:s.events,dummyData:s.dummyData,countryCode:s.countryCode}),a(Ae,{gameEvent:s.events,cityName:s.cityName,cityNameId:s.cityId,addPlayerInQueue:b})]})},s.cityId)})),_=()=>C?m(Ne,{spacing:1,className:t.skeletonContainer,children:[a(q,{variant:"rectangular",className:y?t.mobileSkeleton:t.skeleton}),a(q,{variant:"rectangular",className:y?t.mobileSkeleton:t.skeleton}),a(q,{variant:"rectangular",className:y?t.mobileSkeleton:t.skeleton}),a(q,{variant:"rectangular",className:y?t.mobileSkeleton:t.skeleton})]}):null;return m(F,{children:[a(K,{title:"Match Queues"}),a(j,{className:t.title,children:"Flickmatch Soccer"}),k(),_()]})}export{Ke as default};

import{a as r,W as me,K as s,M as v,j as e}from"./loginSlice.25a195ef.js";import{r as ue,i as pe,a as he,u as fe,e as Te,bu as ye,F as n,f as ge,B as i,T as o,bB as _e,bw as Ne,b as Se}from"./App.9b118945.js";import{S as ve,d as Ce}from"./sweetalert2.all.089cec37.js";import{d as Ie}from"./CrisisAlertOutlined.72ebf4a3.js";import{l as d}from"./lodash.730ce810.js";import{M as be}from"./Meta.583b8019.js";import{q as Pe}from"./constants.84101ad5.js";import{Z as ke}from"./Zoom.94d65488.js";import{T as g,a as D,S as E}from"./TextField.9038dd4f.js";import{M as $,A as C,a as I}from"./MenuItem.079aa45b.js";import{I as xe}from"./InputAdornment.9302d123.js";import{C as Ae}from"./CurrencyRupeeSharp.c3a6a76c.js";import"./index.825253ad.js";import"./index.module.51bb9f99.js";import"./Input.37d7e321.js";var P={},we=pe.exports;Object.defineProperty(P,"__esModule",{value:!0});var b=P.default=void 0,Me=we(ue()),j=he,De=(0,Me.default)([(0,j.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,j.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");b=P.default=De;const Ee="_container_a2bag_1",$e="_portraitContainer_a2bag_2",je="_adminModeTag_a2bag_23",qe="_title_a2bag_30",Fe="_divider_a2bag_39",Oe="_fieldTitle_a2bag_47",Be="_fieldTitleIcon_a2bag_53",Ge="_sectionFirst_a2bag_60",Le="_sectionSecond_a2bag_61",We="_sectionThird_a2bag_62",Ve="_portraitSectionThird_a2bag_70",ze="_formSection_a2bag_76",Re="_selectInput_a2bag_82",Ue="_sectionFourth_a2bag_86",He="_createButton_a2bag_93",Je="_dateTimePicker_a2bag_112",Ze="_portaitDateTimePicker_a2bag_116",Ke="_startTimePicker_a2bag_121",Qe="_startEndPicker_a2bag_122",Ye="_selectStartTimeInput_a2bag_127",t={container:Ee,portraitContainer:$e,adminModeTag:je,title:qe,divider:Fe,fieldTitle:Oe,fieldTitleIcon:Be,sectionFirst:Ge,sectionSecond:Le,sectionThird:We,portraitSectionThird:Ve,formSection:ze,selectInput:Re,sectionFourth:Ue,createButton:He,dateTimePicker:Je,portaitDateTimePicker:Ze,startTimePicker:Ke,startEndPicker:Qe,selectStartTimeInput:Ye},q="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",F="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function ht(){const T=fe(),_=Te(),[,N]=ye(),[p,O]=r.exports.useState(""),[h,B]=r.exports.useState(""),[G,S]=r.exports.useState(""),[f,L]=r.exports.useState(""),[k,W]=r.exports.useState(""),[m,V]=r.exports.useState(""),[z,R]=r.exports.useState([]),[U,H]=r.exports.useState([]),[x,J]=r.exports.useState(""),[A,Z]=r.exports.useState(""),[w,K]=r.exports.useState(""),y=me(a=>a);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(y.login.isAdmin||ve.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{_("/match-queues")}))},[y.login.isAdmin,_]),r.exports.useEffect(()=>{const a=new AbortController,l=a.signal;return(async()=>{try{const de=await(await fetch(F,{method:"POST",signal:l,headers:{"Content-Type":"application/json"},body:Pe})).json();R(de.data.cities)}catch(u){u instanceof Error&&u.name==="TypeError"&&console.log(u.message)}})(),()=>{a.abort()}},[]);const Q=a=>{(async()=>{try{const u=await(await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();H(u.data.city.sportsVenues)}catch(c){c instanceof Error&&c.name==="TypeError"&&console.log(c.message)}})()},Y=async a=>{O(a.target.value),S("");const c=await(await fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${a.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();c.data.city.cityId===a.target.value&&W(c.data.city.countryCode),Q(a.target.value)},X=a=>{B(a.target.value)};function ee(){N.push({options:{content:e(C,{severity:"info",children:s(I,{className:t.alertTitle,children:[p===""?"City name":h===""?"Turf name":f===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function te(){N.push({options:{content:e(C,{severity:"success",children:e(I,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function M(a){N.push({options:{content:e(C,{severity:"error",children:e(I,{className:t.alertTitle,children:a})})}})}const ae={input:{cityId:p,charges:d.exports.parseInt(f),sportsVenueId:h,startTime:x,endTime:A,reservedPlayersCount:d.exports.parseInt(m),waitListPlayersCount:d.exports.parseInt(m)/2}},se=()=>{p===""||h===""||f===""||m===""?ee():fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${p}"
                      charges: ${d.exports.parseInt(f)},
                      sportsVenueId: "${h}",
                      startTime: "${x+"+0530"}",
                      endTime: "${A+"+0530"}",
                      reservedPlayersCount: ${d.exports.parseInt(m)},
                      waitListPlayersCount: ${d.exports.parseInt(m)/2},
                      credits: ${d.exports.parseInt(w)}
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:ae.input})}).then(a=>a.json()).then(a=>{a.data.createEvent.isSuccessful===!1?M(a.data.createEvent.errorMessage):(te(),_("/match-queues"))}).catch(a=>{M(a.message),console.log(a)})},ie=()=>s(i,{className:t.sectionFirst,children:[e(o,{className:t.fieldTitle,children:"City Name"}),e(Ce,{className:t.fieldTitleIcon}),e(D,{className:t.selectInput,children:e(E,{id:"demo-simple-select-autowidth",value:p,onChange:Y,style:{width:"100%"},children:z.map((a,l)=>e($,{value:a.cityId,style:{width:"100%"},children:a.cityName},l))})})]}),re=()=>s(i,{className:t.sectionSecond,children:[e(o,{className:t.fieldTitle,children:"Turf Name"}),e(_e,{className:t.fieldTitleIcon}),e(D,{className:t.selectInput,children:e(E,{id:"demo-simple-select-autowidth",value:h,onChange:X,style:{width:"100%"},children:U.map((a,l)=>e($,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>S(a.googleMapsLink),children:a.displayName},l))})})]}),ne=()=>s(i,{className:t.sectionThird,children:[e(o,{className:t.fieldTitle,children:"Google Map Link"}),e(Ie,{className:t.fieldTitleIcon}),e(g,{fullWidth:!0,value:G,onChange:a=>S(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),oe=()=>s(n,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[s(i,{children:[e(o,{className:t.fieldTitle,children:"Start Time"}),e(b,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>J(a.target.value)})]})}),e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[s(i,{children:[e(o,{className:t.fieldTitle,children:"End Time"}),e(b,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>Z(a.target.value)})]})})]}),ce=()=>s(n,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(n,{className:t.startTimePicker,children:[e(i,{children:e(o,{className:t.fieldTitle,children:"Event Charges"})}),e(g,{InputProps:{startAdornment:e(xe,{position:"start",children:k==="INR"?e(Ae,{}):k==="USD"?e(Ne,{}):null})},fullWidth:!0,value:f,onChange:a=>L(a.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(n,{className:t.startEndPicker,children:[e(i,{children:e(o,{className:t.fieldTitle,children:"Total Players"})}),e(g,{fullWidth:!0,value:m,onChange:a=>V(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),le=()=>e(i,{className:t.sectionFourth,children:e(Se,{variant:"contained",color:"success",className:t.createButton,onClick:se,children:"Add Game"})});return s(v,{children:[e(be,{title:"Add Game"}),y.login.isAdmin&&y.login.isLoggedIn?e(v,{children:e(ke,{in:!0,style:{transitionDelay:"300ms"},children:s(n,{className:T?t.portraitContainer:t.container,children:[e(ge,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(o,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(n,{className:t.formSection,children:[ie(),re(),ne(),oe(),ce(),s(n,{className:t.startEndPicker,children:[e(i,{children:e(o,{className:t.fieldTitle,children:"Game Credits"})}),e(g,{fullWidth:!0,value:w,onChange:a=>K(a.target.value),placeholder:"Credits",id:"fullWidth",type:"number"})]}),e("br",{}),le()]})]})})}):e(v,{})]})}export{ht as default};

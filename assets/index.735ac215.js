import{a as r,W as Se,K as a,M as I,j as e}from"./loginSlice.f61746a0.js";import{r as ve,i as Ce,a as Ie,u as Pe,e as ke,bu as xe,F as o,S as we,B as i,T as n,bB as be,bw as Me,b as De}from"./App.4404b290.js";import{d as Ae}from"./AccountBalance.b36067bd.js";import{d as Ee}from"./CrisisAlertOutlined.f176b3db.js";import{l as h}from"./lodash.dcf1d9ce.js";import{S as $e,q as Ge}from"./sweetalert2.all.b64b67b9.js";import{M as Fe}from"./Meta.cad00bd8.js";import{Z as je}from"./Zoom.569f8483.js";import{T as u,F as j}from"./TextField.282c02f8.js";import{S as q}from"./Select.9708472b.js";import{M as B}from"./MenuItem.90a99ed3.js";import{I as qe,a as Be}from"./Switch.848c38c0.js";import{C as We}from"./CurrencyRupeeSharp.746fe3bf.js";import{A as P,a as k}from"./AlertTitle.79b907cf.js";import"./index.766c2b7d.js";import"./index.module.002e5337.js";import"./Input.1cd340fb.js";var w={},Oe=Ce.exports;Object.defineProperty(w,"__esModule",{value:!0});var x=w.default=void 0,Le=Oe(ve()),W=Ie,Ve=(0,Le.default)([(0,W.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,W.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");x=w.default=Ve;const ze="_container_1s8oy_1",Re="_portraitContainer_1s8oy_2",Ue="_adminModeTag_1s8oy_23",He="_title_1s8oy_30",Je="_divider_1s8oy_39",Ze="_fieldTitle_1s8oy_47",Ke="_fieldTitleIcon_1s8oy_53",Qe="_sectionFirst_1s8oy_60",Ye="_sectionSecond_1s8oy_61",Xe="_sectionThird_1s8oy_62",et="_portraitSectionThird_1s8oy_70",tt="_formSection_1s8oy_76",st="_selectInput_1s8oy_82",at="_sectionFourth_1s8oy_86",it="_createButton_1s8oy_93",rt="_dateTimePicker_1s8oy_112",ot="_portaitDateTimePicker_1s8oy_116",nt="_startTimePicker_1s8oy_121",ct="_startEndPicker_1s8oy_122",lt="_selectStartTimeInput_1s8oy_127",dt="_switchBtn_1s8oy_134",t={container:ze,portraitContainer:Re,adminModeTag:Ue,title:He,divider:Je,fieldTitle:Ze,fieldTitleIcon:Ke,sectionFirst:Qe,sectionSecond:Ye,sectionThird:Xe,portraitSectionThird:et,formSection:tt,selectInput:st,sectionFourth:at,createButton:it,dateTimePicker:rt,portaitDateTimePicker:ot,startTimePicker:nt,startEndPicker:ct,selectStartTimeInput:lt,switchBtn:dt},O="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",L="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function wt(){const y=Pe(),g=ke(),[,S]=xe(),[p,V]=r.exports.useState(""),[f,z]=r.exports.useState(""),[R,v]=r.exports.useState(""),[T,U]=r.exports.useState(""),[b,H]=r.exports.useState(""),[d,J]=r.exports.useState(""),[Z,K]=r.exports.useState([]),[Q,Y]=r.exports.useState([]),[M,X]=r.exports.useState(""),[D,ee]=r.exports.useState(""),[A,te]=r.exports.useState(""),[C,se]=r.exports.useState(!1),[N,ae]=r.exports.useState(!1),[E,ie]=r.exports.useState(""),[$,re]=r.exports.useState(""),_=Se(s=>s);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(_.login.isAdmin||$e.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{g("/match-queues")}))},[_.login.isAdmin,g]),r.exports.useEffect(()=>{const s=new AbortController,l=s.signal;return(async()=>{try{const ge=await(await fetch(L,{method:"POST",signal:l,headers:{"Content-Type":"application/json"},body:Ge})).json();K(ge.data.cities)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})(),()=>{s.abort()}},[]);const oe=s=>{(async()=>{try{const m=await(await fetch(L,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${s}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();Y(m.data.city.sportsVenues)}catch(c){c instanceof Error&&c.name==="TypeError"&&console.log(c.message)}})()},ne=async s=>{V(s.target.value),v("");const c=await(await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${s.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();c.data.city.cityId===s.target.value&&H(c.data.city.countryCode),oe(s.target.value)},ce=s=>{z(s.target.value)};function le(){S.push({options:{content:e(P,{severity:"info",children:a(k,{className:t.alertTitle,children:[p===""?"City name":f===""?"Turf name":T===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function de(){S.push({options:{content:e(P,{severity:"success",children:e(k,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function G(s){S.push({options:{content:e(P,{severity:"error",children:e(k,{className:t.alertTitle,children:s})})}})}const me={input:{cityId:p,charges:h.exports.parseInt(T),sportsVenueId:f,startTime:M,endTime:D,reservedPlayersCount:h.exports.parseInt(d),waitListPlayersCount:h.exports.parseInt(d)/2}},he=()=>{p===""||f===""||T===""||d===""?le():fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${p}"
                      charges: ${h.exports.parseInt(T)}
                      sportsVenueId: "${f}"
                      startTime: "${M+"+0530"}"
                      endTime: "${D+"+0530"}"
                      reservedPlayersCount: ${h.exports.parseInt(d)}
                      waitListPlayersCount: ${h.exports.parseInt(d)/2}
                      credits: ${Number(A)}
                      testGame: ${C}
                      teamDivision: ${N}
                      team1Color: "${E}"
                      team2Color: "${$}"
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:me.input})}).then(s=>s.json()).then(s=>{s.data.createEvent.isSuccessful===!1?G(s.data.createEvent.errorMessage):(de(),g("/match-queues"))}).catch(s=>{G(s.message),console.log(s)})},ue=()=>a(i,{className:t.sectionFirst,children:[e(n,{className:t.fieldTitle,children:"City Name"}),e(Ae,{className:t.fieldTitleIcon}),e(j,{className:t.selectInput,children:e(q,{id:"demo-simple-select-autowidth",value:p,onChange:ne,style:{width:"100%"},children:Z.map((s,l)=>e(B,{value:s.cityId,style:{width:"100%"},children:s.cityName},l))})})]}),pe=()=>a(i,{className:t.sectionSecond,children:[e(n,{className:t.fieldTitle,children:"Turf Name"}),e(be,{className:t.fieldTitleIcon}),e(j,{className:t.selectInput,children:e(q,{id:"demo-simple-select-autowidth",value:f,onChange:ce,style:{width:"100%"},children:Q.map((s,l)=>e(B,{value:s.sportsVenueId,style:{width:"100%"},onClick:()=>v(s.googleMapsLink),children:s.displayName},l))})})]}),fe=()=>a(i,{className:t.sectionThird,children:[e(n,{className:t.fieldTitle,children:"Google Map Link"}),e(Ee,{className:t.fieldTitleIcon}),e(u,{fullWidth:!0,value:R,onChange:s=>v(s.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),Te=()=>a(o,{className:y?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[a(i,{children:[e(n,{className:t.fieldTitle,children:"Start Time"}),e(x,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>X(s.target.value)})]})}),e(i,{className:y?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[a(i,{children:[e(n,{className:t.fieldTitle,children:"End Time"}),e(x,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>ee(s.target.value)})]})})]}),ye=()=>a(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Event Charges"})}),e(u,{InputProps:{startAdornment:e(qe,{position:"start",children:b==="INR"?e(We,{}):b==="USD"?e(Me,{}):null})},fullWidth:!0,value:T,onChange:s=>{U(s.target.value),te(s.target.value)},placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Total Players"})}),e(u,{fullWidth:!0,value:d,onChange:s=>J(s.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),F=s=>e(i,{children:a(o,{className:t.startEndPicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:s==="testGame"?"Test Game":"Team Division"})}),e(Be,{className:t.switchBtn,checked:s==="testGame"?C:N,onChange:()=>{s==="testGame"?se(!C):ae(!N)},color:"default",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4ce95a"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4ce95a"}}})]})}),Ne=()=>a(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Team 1"})}),e(u,{fullWidth:!0,value:E,onChange:s=>ie(s.target.value),placeholder:"Team 1",id:"fullWidth",type:"text"})]})}),e(i,{className:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Team 2"})}),e(u,{fullWidth:!0,value:$,onChange:s=>re(s.target.value),placeholder:"Team 2",id:"fullWidth",type:"text"})]})})]}),_e=()=>e(i,{className:t.sectionFourth,children:e(De,{variant:"contained",color:"success",className:t.createButton,onClick:he,children:"Add Game"})});return a(I,{children:[e(Fe,{title:"Add Game"}),_.login.isAdmin&&_.login.isLoggedIn?e(I,{children:e(je,{in:!0,style:{transitionDelay:"300ms"},children:a(o,{className:y?t.portraitContainer:t.container,children:[e(we,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),a(i,{children:[e(n,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),a(o,{className:t.formSection,children:[ue(),pe(),fe(),Te(),ye(),a(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(i,{children:e(n,{className:t.fieldTitle,children:"Game Credits"})}),e(u,{fullWidth:!0,value:A,disabled:!0,placeholder:"Credits",id:"fullWidth",type:"number"})]})}),F("testGame"),F("teamDivision")]}),N&&Ne(),e("br",{}),_e()]})]})})}):e(I,{})]})}export{wt as default};

import{a as i,W as oe,K as s,M as N,j as e}from"./loginSlice.25a195ef.js";import{r as ce,i as le,a as de,u as me,bu as ue,bt as pe,F as o,H as he,B as r,T as c,bC as fe,bw as Te,b as ge}from"./App.2f795942.js";import{S as ye,d as _e}from"./sweetalert2.all.d5d38da4.js";import{d as Ne}from"./CrisisAlertOutlined.258e9f1b.js";import{l,C as Se,m as Ie}from"./map.63c10be9.js";import{M as ve}from"./Meta.64675a6e.js";import{q as Ce}from"./constants.70367cb1.js";import{Z as Pe,M as A,A as b,a as w}from"./Zoom.9acc326d.js";import{a as D,S as M,T as S}from"./TextField.5592e9a5.js";import{I as ke}from"./InputAdornment.a8406753.js";import"./index.3e3b1f4b.js";import"./index.module.51bb9f99.js";import"./Input.aa611bd4.js";var v={},xe=le.exports;Object.defineProperty(v,"__esModule",{value:!0});var I=v.default=void 0,Ae=xe(ce()),E=de,be=(0,Ae.default)([(0,E.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,E.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");I=v.default=be;const we="_container_116gr_1",De="_portraitContainer_116gr_2",Me="_adminModeTag_116gr_23",Ee="_title_116gr_30",Fe="_divider_116gr_39",$e="_fieldTitle_116gr_47",je="_fieldTitleIcon_116gr_53",qe="_sectionFirst_116gr_60",Le="_sectionSecond_116gr_61",Oe="_sectionThird_116gr_62",Be="_portraitSectionThird_116gr_70",Ve="_formSection_116gr_76",Ge="_selectInput_116gr_82",We="_sectionFourth_116gr_86",ze="_createButton_116gr_93",Re="_dateTimePicker_116gr_112",He="_portaitDateTimePicker_116gr_116",Ue="_startTimePicker_116gr_121",Je="_startEndPicker_116gr_122",Ze="_selectStartTimeInput_116gr_127",t={container:we,portraitContainer:De,adminModeTag:Me,title:Ee,divider:Fe,fieldTitle:$e,fieldTitleIcon:je,sectionFirst:qe,sectionSecond:Le,sectionThird:Oe,portraitSectionThird:Be,formSection:Ve,selectInput:Ge,sectionFourth:We,createButton:ze,dateTimePicker:Re,portaitDateTimePicker:He,startTimePicker:Ue,startEndPicker:Je,selectStartTimeInput:Ze},Ke="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",F="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function dt(){const T=me(),y=ue(),[,C]=pe(),[u,$]=i.exports.useState(""),[p,j]=i.exports.useState(""),[q,_]=i.exports.useState(""),[h,L]=i.exports.useState(""),[P,O]=i.exports.useState(""),[d,B]=i.exports.useState(""),[V,G]=i.exports.useState([]),[W,z]=i.exports.useState([]),[k,R]=i.exports.useState(""),[x,H]=i.exports.useState(""),g=oe(a=>a);i.exports.useEffect(()=>{localStorage.getItem("userData")&&(g.login.isAdmin||ye.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{y("/match-queues")}))},[g.login.isAdmin,y]),i.exports.useEffect(()=>{const a=new AbortController,n=a.signal;return(async()=>{try{const ne=await(await fetch(F,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:Ce})).json();G(ne.data.cities)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})(),()=>{a.abort()}},[]);const U=a=>{(async()=>{try{const m=await(await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();z(m.data.city.sportsVenues)}catch(f){f instanceof Error&&f.name==="TypeError"&&console.log(f.message)}})()},J=a=>{$(a.target.value),_(""),Ie.forEach(n=>{n.cityId===l.exports.parseInt(a.target.value)&&O(n.currency)}),U(a.target.value)},Z=a=>{j(a.target.value)};function K(){C.push({options:{content:e(b,{severity:"error",children:s(w,{className:t.alertTitle,children:[u===""?"City name":p===""?"Turf name":h===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function Q(){C.push({options:{content:e(b,{severity:"success",children:e(w,{className:t.alertTitle,children:"Game Added Successfully"})})}})}const Y={input:{cityId:u,charges:l.exports.parseInt(h),sportsVenueId:p,startTime:k,endTime:x,reservedPlayersCount:l.exports.parseInt(d),waitListPlayersCount:l.exports.parseInt(d)/2}},X=()=>{u===""||p===""||h===""||d===""?K():fetch(Ke,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${u}"
                      charges: ${l.exports.parseInt(h)},
                      sportsVenueId: "${p}",
                      startTime: "${k+"+0530"}",
                      endTime: "${x+"+0530"}",
                      reservedPlayersCount: ${l.exports.parseInt(d)},
                      waitListPlayersCount: ${l.exports.parseInt(d)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:Y.input})}).then(a=>a.json()).then(a=>{if(a.errors)throw new Error(a.errors[0].message);Q(),y("/match-queues"),console.log(a.data)}).catch(a=>{console.log(a)})},ee=()=>s(r,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(_e,{className:t.fieldTitleIcon}),e(D,{className:t.selectInput,children:e(M,{id:"demo-simple-select-autowidth",value:u,onChange:J,style:{width:"100%"},children:V.map((a,n)=>e(A,{value:a.cityId,style:{width:"100%"},children:a.cityName},n))})})]}),te=()=>s(r,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(fe,{className:t.fieldTitleIcon}),e(D,{className:t.selectInput,children:e(M,{id:"demo-simple-select-autowidth",value:p,onChange:Z,style:{width:"100%"},children:W.map((a,n)=>e(A,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>_(a.googleMapsLink),children:a.displayName},n))})})]}),ae=()=>s(r,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(Ne,{className:t.fieldTitleIcon}),e(S,{fullWidth:!0,value:q,onChange:a=>_(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),se=()=>s(o,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[s(r,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(I,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>R(a.target.value)})]})}),e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[s(r,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(I,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>H(a.target.value)})]})})]}),re=()=>s(o,{className:t.sectionThird,children:[e(r,{className:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(S,{InputProps:{startAdornment:e(ke,{position:"start",children:P==="INR"?e(Se,{}):P==="USD"?e(Te,{}):null})},fullWidth:!0,value:h,onChange:a=>L(a.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(r,{className:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(S,{fullWidth:!0,value:d,onChange:a=>B(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),ie=()=>e(r,{className:t.sectionFourth,children:e(ge,{variant:"contained",color:"success",className:t.createButton,onClick:X,children:"Add Game"})});return s(N,{children:[e(ve,{title:"Add Game"}),g.login.isAdmin&&g.login.isLoggedIn?e(N,{children:e(Pe,{in:!0,style:{transitionDelay:"300ms"},children:s(o,{className:T?t.portraitContainer:t.container,children:[e(he,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(r,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(r,{className:t.divider})]}),s(o,{className:t.formSection,children:[ee(),te(),ae(),se(),re(),ie()]})]})})}):e(N,{})]})}export{dt as default};

import{a as i,E as a,G as _,j as e}from"./index.a525f6e3.js";import{r as ue,i as pe,a as he,ba as fe,b9 as Te,F as o,B as r,T as c,be as ye,b as _e}from"./App.95a1eaf3.js";import{S as ve,d as Ne}from"./sweetalert2.all.65186bf0.js";import{l as d,C as ge,d as Se,m as Ie}from"./map.9f641d25.js";import{d as Ce}from"./CrisisAlertOutlined.21b94417.js";import{u as Pe,M as ke,H as xe,F as be}from"./Header.332671a2.js";import{q as we}from"./constants.521cb428.js";import{Z as Ae,h as w,S as A,M as D,T as v,d as E,e as F}from"./TextField.0fd7262d.js";import{I as De}from"./InputAdornment.74299414.js";import"./index.49340ff2.js";import"./index.module.325f48be.js";var g={},Ee=pe.exports;Object.defineProperty(g,"__esModule",{value:!0});var N=g.default=void 0,Fe=Ee(ue()),M=he,Me=(0,Fe.default)([(0,M.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,M.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");N=g.default=Me;const je="_container_1l8v3_1",$e="_portraitContainere_1l8v3_2",qe="_title_1l8v3_16",Le="_divider_1l8v3_22",Oe="_fieldTitle_1l8v3_30",Be="_fieldTitleIcon_1l8v3_36",Ve="_sectionFirst_1l8v3_43",Ge="_sectionSecond_1l8v3_44",He="_sectionThird_1l8v3_45",We="_portraitSectionThird_1l8v3_53",ze="_formSection_1l8v3_59",Re="_selectInput_1l8v3_65",Ue="_sectionFourth_1l8v3_69",Je="_createButton_1l8v3_76",Ze="_dateTimePicker_1l8v3_94",Qe="_portaitDateTimePicker_1l8v3_98",Ye="_startTimePicker_1l8v3_103",Ke="_startEndPicker_1l8v3_104",Xe="_selectStartTimeInput_1l8v3_109",t={container:je,portraitContainere:$e,title:qe,divider:Le,fieldTitle:Oe,fieldTitleIcon:Be,sectionFirst:Ve,sectionSecond:Ge,sectionThird:He,portraitSectionThird:We,formSection:ze,selectInput:Re,sectionFourth:Ue,createButton:Je,dateTimePicker:Ze,portaitDateTimePicker:Qe,startTimePicker:Ye,startEndPicker:Ke,selectStartTimeInput:Xe},et="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",j="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function ut(){const T=Pe(),S=fe(),[,I]=Te(),[$,q]=i.exports.useState(!1),[L,O]=i.exports.useState(!1),[p,B]=i.exports.useState(""),[h,V]=i.exports.useState(""),[G,y]=i.exports.useState(""),[f,H]=i.exports.useState(""),[C,W]=i.exports.useState(""),[m,z]=i.exports.useState(""),[R,U]=i.exports.useState([]),[J,Z]=i.exports.useState([]),[P,Q]=i.exports.useState(""),[k,Y]=i.exports.useState("");i.exports.useEffect(()=>{const s=localStorage.getItem("userData");if(s){const n=JSON.parse(s);q(!0),(async()=>{const b=(await(await fetch("https://sheet.best/api/sheets/ba455ca6-e174-4ce1-870b-b2f0ed772878")).json()).map(me=>me.EmailId).includes(n.email);O(b),b||ve.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{S("/match-queues")})})()}},[]),i.exports.useEffect(()=>{const s=new AbortController,n=s.signal;return(async()=>{try{const x=await(await fetch(j,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:we})).json();U(x.data.cities)}catch(l){l instanceof Error&&l.name==="TypeError"&&console.log(l.message)}})(),()=>{s.abort()}},[]);const K=s=>{(async()=>{try{const l=await(await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${s}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();Z(l.data.city.sportsVenues)}catch(u){u instanceof Error&&u.name==="TypeError"&&console.log(u.message)}})()},X=s=>{B(s.target.value),y(""),Ie.forEach(n=>{n.cityId===d.exports.parseInt(s.target.value)&&W(n.currency)}),K(s.target.value)},ee=s=>{V(s.target.value)};function te(){I.push({options:{content:e(E,{severity:"error",children:a(F,{className:t.alertTitle,children:[p===""?"City Name":h===""?"Turf Name":f===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function se(){I.push({options:{content:e(E,{severity:"success",children:e(F,{className:t.alertTitle,children:"Turf Added Successfully"})})}})}const ae={input:{cityId:p,charges:d.exports.parseInt(f),sportsVenueId:h,startTime:P,endTime:k,reservedPlayersCount:d.exports.parseInt(m),waitListPlayersCount:d.exports.parseInt(m)/2}},ie=()=>{p===""||h===""||f===""||m===""?te():fetch(et,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${p}"
                      charges: ${d.exports.parseInt(f)},
                      sportsVenueId: "${h}",
                      startTime: "${P+"+0530"}",
                      endTime: "${k+"+0530"}",
                      reservedPlayersCount: ${d.exports.parseInt(m)},
                      waitListPlayersCount: ${d.exports.parseInt(m)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:ae.input})}).then(s=>s.json()).then(s=>{if(s.errors)throw new Error(s.errors[0].message);se(),S("/match-queues"),console.log(s.data)}).catch(s=>{console.log(s)})},re=()=>a(r,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(Ne,{className:t.fieldTitleIcon}),e(w,{className:t.selectInput,children:e(A,{id:"demo-simple-select-autowidth",value:p,onChange:X,style:{width:"100%"},children:R.map((s,n)=>e(D,{value:s.cityId,style:{width:"100%"},children:s.cityName},n))})})]}),ne=()=>a(r,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(ye,{className:t.fieldTitleIcon}),e(w,{className:t.selectInput,children:e(A,{id:"demo-simple-select-autowidth",value:h,onChange:ee,style:{width:"100%"},children:J.map((s,n)=>e(D,{value:s.sportsVenueId,style:{width:"100%"},onClick:()=>y(s.googleMapsLink),children:s.displayName},n))})})]}),oe=()=>a(r,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(Ce,{className:t.fieldTitleIcon}),e(v,{fullWidth:!0,value:G,onChange:s=>y(s.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),ce=()=>a(o,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[a(r,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(N,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>Q(s.target.value)})]})}),e(r,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[a(r,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(N,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>Y(s.target.value)})]})})]}),le=()=>a(o,{className:t.sectionThird,children:[e(r,{className:t.dateTimePicker,children:a(o,{className:t.startTimePicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(v,{InputProps:{startAdornment:e(De,{position:"start",children:C==="INR"?e(ge,{}):C==="USD"?e(Se,{}):null})},fullWidth:!0,value:f,onChange:s=>H(s.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(r,{className:t.dateTimePicker,children:a(o,{className:t.startEndPicker,children:[e(r,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(v,{fullWidth:!0,value:m,onChange:s=>z(s.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),de=()=>e(r,{className:t.sectionFourth,children:e(_e,{variant:"contained",color:"success",className:t.createButton,onClick:ie,children:"Add Game"})});return a(_,{children:[e(ke,{title:"Add Game"}),e("div",{children:e(xe,{loggedIn:$})}),L?a(_,{children:[e(Ae,{in:!0,style:{transitionDelay:"300ms"},children:a(o,{className:T?t.portraitContainere:t.container,children:[a(r,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(r,{className:t.divider})]}),a(o,{className:t.formSection,children:[re(),ne(),oe(),ce(),le(),de()]})]})}),e(be,{})]}):e(_,{})]})}export{ut as default};

import{a as r,W as oe,K as s,M as N,j as e}from"./loginSlice.25a195ef.js";import{r as ce,i as le,a as de,u as me,bu as he,bt as ue,F as o,H as pe,B as i,T as c,bC as fe,bw as Te,b as ye}from"./App.1fa3e4fa.js";import{S as _e,d as ge}from"./sweetalert2.all.a31dbee2.js";import{d as Ne}from"./CrisisAlertOutlined.2bfd248e.js";import{l,C as Se,m as Ie}from"./map.f638ba3f.js";import{M as ve}from"./Meta.7464b333.js";import{q as Ce}from"./constants.70367cb1.js";import{Z as Pe,M as A,A as b,a as w}from"./Zoom.fa93b438.js";import{a as D,S as M,T as S}from"./TextField.3c2f9151.js";import{I as ke}from"./InputAdornment.834abefd.js";import"./index.32bc8b25.js";import"./index.module.51bb9f99.js";import"./Input.4a17da1d.js";var v={},xe=le.exports;Object.defineProperty(v,"__esModule",{value:!0});var I=v.default=void 0,Ae=xe(ce()),E=de,be=(0,Ae.default)([(0,E.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,E.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");I=v.default=be;const we="_container_1rfih_1",De="_portraitContainer_1rfih_2",Me="_adminModeTag_1rfih_22",Ee="_title_1rfih_29",Fe="_divider_1rfih_38",$e="_fieldTitle_1rfih_46",je="_fieldTitleIcon_1rfih_52",qe="_sectionFirst_1rfih_59",Le="_sectionSecond_1rfih_60",Oe="_sectionThird_1rfih_61",Be="_portraitSectionThird_1rfih_69",Ve="_formSection_1rfih_75",Ge="_selectInput_1rfih_81",We="_sectionFourth_1rfih_85",ze="_createButton_1rfih_92",Re="_dateTimePicker_1rfih_111",He="_portaitDateTimePicker_1rfih_115",Ue="_startTimePicker_1rfih_120",Je="_startEndPicker_1rfih_121",Ze="_selectStartTimeInput_1rfih_126",t={container:we,portraitContainer:De,adminModeTag:Me,title:Ee,divider:Fe,fieldTitle:$e,fieldTitleIcon:je,sectionFirst:qe,sectionSecond:Le,sectionThird:Oe,portraitSectionThird:Be,formSection:Ve,selectInput:Ge,sectionFourth:We,createButton:ze,dateTimePicker:Re,portaitDateTimePicker:He,startTimePicker:Ue,startEndPicker:Je,selectStartTimeInput:Ze},Ke="https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",F="https://service.flickmatch.in:8443/platform-0.0.1-SNAPSHOT/graphql";function dt(){const T=me(),_=he(),[,C]=ue(),[h,$]=r.exports.useState(""),[u,j]=r.exports.useState(""),[q,g]=r.exports.useState(""),[p,L]=r.exports.useState(""),[P,O]=r.exports.useState(""),[d,B]=r.exports.useState(""),[V,G]=r.exports.useState([]),[W,z]=r.exports.useState([]),[k,R]=r.exports.useState(""),[x,H]=r.exports.useState(""),y=oe(a=>a);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(y.login.isAdmin||_e.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{_("/match-queues")}))},[y.login.isAdmin,_]),r.exports.useEffect(()=>{const a=new AbortController,n=a.signal;return(async()=>{try{const ne=await(await fetch(F,{method:"POST",signal:n,headers:{"Content-Type":"application/json"},body:Ce})).json();G(ne.data.cities)}catch(m){m instanceof Error&&m.name==="TypeError"&&console.log(m.message)}})(),()=>{a.abort()}},[]);const U=a=>{(async()=>{try{const m=await(await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                }      
              }
            }`})})).json();z(m.data.city.sportsVenues)}catch(f){f instanceof Error&&f.name==="TypeError"&&console.log(f.message)}})()},J=a=>{$(a.target.value),g(""),Ie.forEach(n=>{n.cityId===l.exports.parseInt(a.target.value)&&O(n.currency)}),U(a.target.value)},Z=a=>{j(a.target.value)};function K(){C.push({options:{content:e(b,{severity:"error",children:s(w,{className:t.alertTitle,children:[h===""?"City name":u===""?"Turf name":p===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function Q(){C.push({options:{content:e(b,{severity:"success",children:e(w,{className:t.alertTitle,children:"Game Added Successfully"})})}})}const Y={input:{cityId:h,charges:l.exports.parseInt(p),sportsVenueId:u,startTime:k,endTime:x,reservedPlayersCount:l.exports.parseInt(d),waitListPlayersCount:l.exports.parseInt(d)/2}},X=()=>{h===""||u===""||p===""||d===""?K():fetch(Ke,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${h}"
                      charges: ${l.exports.parseInt(p)},
                      sportsVenueId: "${u}",
                      startTime: "${k+"+0530"}",
                      endTime: "${x+"+0530"}",
                      reservedPlayersCount: ${l.exports.parseInt(d)},
                      waitListPlayersCount: ${l.exports.parseInt(d)/2},
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:Y.input})}).then(a=>a.json()).then(a=>{if(a.errors)throw new Error(a.errors[0].message);Q(),_("/match-queues"),console.log(a.data)}).catch(a=>{console.log(a)})},ee=()=>s(i,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(ge,{className:t.fieldTitleIcon}),e(D,{className:t.selectInput,children:e(M,{id:"demo-simple-select-autowidth",value:h,onChange:J,style:{width:"100%"},children:V.map((a,n)=>e(A,{value:a.cityId,style:{width:"100%"},children:a.cityName},n))})})]}),te=()=>s(i,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(fe,{className:t.fieldTitleIcon}),e(D,{className:t.selectInput,children:e(M,{id:"demo-simple-select-autowidth",value:u,onChange:Z,style:{width:"100%"},children:W.map((a,n)=>e(A,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>g(a.googleMapsLink),children:a.displayName},n))})})]}),ae=()=>s(i,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(Ne,{className:t.fieldTitleIcon}),e(S,{fullWidth:!0,value:q,onChange:a=>g(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),se=()=>s(o,{className:T?t.portraitSectionThird:t.sectionThird,children:[e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(I,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>R(a.target.value)})]})}),e(i,{className:T?t.portaitDateTimePicker:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[s(i,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(I,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>H(a.target.value)})]})})]}),ie=()=>s(o,{className:t.sectionThird,children:[e(i,{className:t.dateTimePicker,children:s(o,{className:t.startTimePicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(S,{InputProps:{startAdornment:e(ke,{position:"start",children:P==="INR"?e(Se,{}):P==="USD"?e(Te,{}):null})},fullWidth:!0,value:p,onChange:a=>L(a.target.value),placeholder:"Amount",id:"fullWidth",type:"number"})]})}),e(i,{className:t.dateTimePicker,children:s(o,{className:t.startEndPicker,children:[e(i,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(S,{fullWidth:!0,value:d,onChange:a=>B(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})})]}),re=()=>e(i,{className:t.sectionFourth,children:e(ye,{variant:"contained",color:"success",className:t.createButton,onClick:X,children:"Add Game"})});return s(N,{children:[e(ve,{title:"Add Game"}),y.login.isAdmin&&y.login.isLoggedIn?e(N,{children:e(Pe,{in:!0,style:{transitionDelay:"300ms"},children:s(o,{className:T?t.portraitContainer:t.container,children:[e(pe,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),s(i,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(i,{className:t.divider})]}),s(o,{className:t.formSection,children:[ee(),te(),ae(),se(),ie(),re()]})]})})}):e(N,{})]})}export{dt as default};

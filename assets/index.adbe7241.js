import{W as we,a as r,a6 as Me,A as i,F as A,j as e}from"./loginSlice.ea7b6bcd.js";import{r as Ee,a as Be,u as Ae,e as De,bP as $e,F as o,Y as Fe,B as s,T as c,bY as Ge,bR as We,b as qe}from"./App.afc0efe7.js";import{d as Le}from"./AccountBalance.9651f2fc.js";import{d as Oe}from"./CrisisAlertOutlined.f423e411.js";import{l as f}from"./lodash.8d197e71.js";import{S as P,q as Re}from"./sweetalert2.esm.all.395a1994.js";import{M as ze}from"./Meta.a46e9b81.js";import{Z as Ve}from"./Zoom.6784022a.js";import{T,F as I}from"./TextField.83904f01.js";import{S as k}from"./Select.bc040636.js";import{M as g}from"./MenuItem.d847b680.js";import{I as Ue,S as Je}from"./Switch.f1e3ec6c.js";import{C as Ye}from"./CurrencyRupeeSharp.f15606d6.js";import{A as D,a as $}from"./AlertTitle.016a7f07.js";import"./index.59cb2d1f.js";import"./index.module.86d27b7e.js";import"./Input.cd0b106d.js";import"./SwitchBase.40a86fbe.js";var G={},Ze=we.exports;Object.defineProperty(G,"__esModule",{value:!0});var F=G.default=void 0,He=Ze(Ee()),Y=Be;F=G.default=(0,He.default)([(0,Y.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Y.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");const Qe="_container_gujox_1",Ke="_portraitContainer_gujox_2",Xe="_adminModeTag_gujox_23",et="_title_gujox_30",tt="_divider_gujox_39",at="_fieldTitle_gujox_47",it="_fieldTitleIcon_gujox_53",st="_sectionFirst_gujox_60",rt="_sectionSecond_gujox_61",ot="_sectionThird_gujox_62",nt="_portraitSectionThird_gujox_70",ct="_formSection_gujox_76",lt="_selectInput_gujox_82",dt="_sectionFourth_gujox_86",mt="_createButton_gujox_93",ht="_dateTimePicker_gujox_112",ut="_portaitDateTimePicker_gujox_116",pt="_startTimePicker_gujox_121",ft="_startEndPicker_gujox_122",Tt="_selectStartTimeInput_gujox_127",gt="_switchBtn_gujox_134",yt="_flexBox_gujox_138",Nt="_paymentMethods_gujox_143",_t="_portraitSectionChargesPlayers_gujox_148",Ct="_switchContainer_gujox_155",t={container:Qe,portraitContainer:Ke,adminModeTag:Xe,title:et,divider:tt,fieldTitle:at,fieldTitleIcon:it,sectionFirst:st,sectionSecond:rt,sectionThird:ot,portraitSectionThird:nt,formSection:ct,selectInput:lt,sectionFourth:dt,createButton:mt,dateTimePicker:ht,portaitDateTimePicker:ut,startTimePicker:pt,startEndPicker:ft,selectStartTimeInput:Tt,switchBtn:gt,flexBox:yt,paymentMethods:Nt,portraitSectionChargesPlayers:_t,switchContainer:Ct},Z={}.VITE_API_URL,H={}.VITE_API_URL;function qt(){const h=Ae(),b=De(),[,j]=$e(),[y,Q]=r.exports.useState(""),[N,K]=r.exports.useState(""),[X,w]=r.exports.useState(""),[_,ee]=r.exports.useState(""),[W,te]=r.exports.useState(""),[u,ae]=r.exports.useState(""),[M,ie]=r.exports.useState([]),[E,se]=r.exports.useState([]),[q,re]=r.exports.useState(""),[L,oe]=r.exports.useState(""),[O,ne]=r.exports.useState(""),[B,ce]=r.exports.useState(!1),[p,le]=r.exports.useState(!0),[C,de]=r.exports.useState("Bibs"),[x,me]=r.exports.useState("No Bibs"),[S,he]=r.exports.useState(["razorpay"]),[R,ue]=r.exports.useState(""),[z,pe]=r.exports.useState(""),v=Me(a=>a);r.exports.useEffect(()=>{localStorage.getItem("userData")&&(v.login.isAdmin||P.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{b("/match-queues")}))},[v.login.isAdmin,b]),r.exports.useEffect(()=>{const a=new AbortController,l=a.signal;return(async()=>{try{const m=await(await fetch(H,{method:"POST",signal:l,headers:{"Content-Type":"application/json"},body:Re})).json();ie(m.data.cities)}catch(n){n instanceof Error&&n.name==="TypeError"&&console.log(n.message)}})(),()=>{a.abort()}},[]);const V=a=>{he(l=>l.includes(a)?l.filter(d=>d!==a):[...l,a])},fe=a=>{(async()=>{try{const n=await(await fetch(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${a}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                  pinCode
                }      
              }
            }`})})).json();se(n.data.city.sportsVenues)}catch(d){d instanceof Error&&d.name==="TypeError"&&console.log(d.message)}})()},Te=async a=>{Q(a.target.value),w("");const d=await(await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${a.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();d.data.city.cityId===a.target.value&&te(d.data.city.countryCode),fe(a.target.value)},ge=a=>{K(a.target.value)};function ye(){j.push({options:{content:e(D,{severity:"info",children:i($,{className:t.alertTitle,children:[y===""?"City name":N===""?"Turf name":_===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function Ne(){j.push({options:{content:e(D,{severity:"success",children:e($,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function U(a){j.push({options:{content:e(D,{severity:"error",children:e($,{className:t.alertTitle,children:a})})}})}const _e={input:{cityId:y,charges:f.exports.parseInt(_),sportsVenueId:N,startTime:q,endTime:L,reservedPlayersCount:f.exports.parseInt(u),waitListPlayersCount:f.exports.parseInt(u)/2,paymentMethods:S.filter(a=>a!=="")}},Ce=()=>{y===""||N===""||_===""||u===""?ye():p&&(C===""||x==="")?P.fire({title:"Invalid Selection",text:"Please select team colors for both teams!",icon:"warning"}):fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${y}"
                      charges: ${f.exports.parseInt(_)}
                      sportsVenueId: "${N}"
                      startTime: "${q+"+0530"}"
                      endTime: "${L+"+0530"}"
                      reservedPlayersCount: ${f.exports.parseInt(u)}
                      waitListPlayersCount: ${f.exports.parseInt(u)/2}
                      credits: ${Number(O)}
                      testGame: ${B}
                      teamDivision: ${p}
                      team1Color: "${C}"
                      team2Color: "${x}"
                      paymentMethods: ${JSON.stringify(S.filter(a=>a!==""))}
                      team1Name: "${R}"
                      team2Name: "${z}"
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:_e.input})}).then(a=>a.json()).then(a=>{a.data.createEvent.isSuccessful===!1?U(a.data.createEvent.errorMessage):(Ne(),b("/match-queues"))}).catch(a=>{U(a.message),console.log(a)})},xe=()=>i(s,{className:t.sectionFirst,children:[e(c,{className:t.fieldTitle,children:"City Name"}),e(Le,{className:t.fieldTitleIcon}),e(I,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:y,onChange:Te,style:{width:"100%"},children:M==null?void 0:M.map((a,l)=>e(g,{value:a.cityId,style:{width:"100%"},children:a.cityName},l))})})]}),Se=()=>i(s,{className:t.sectionSecond,children:[e(c,{className:t.fieldTitle,children:"Turf Name"}),e(Ge,{className:t.fieldTitleIcon}),e(I,{className:t.selectInput,children:e(k,{id:"demo-simple-select-autowidth",value:N,onChange:ge,style:{width:"100%"},children:E==null?void 0:E.map((a,l)=>e(g,{value:a.sportsVenueId,style:{width:"100%"},onClick:()=>w(a.googleMapsLink),children:a.displayName},l))})})]}),ve=()=>i(s,{className:t.sectionThird,children:[e(c,{className:t.fieldTitle,children:"Google Map Link"}),e(Oe,{className:t.fieldTitleIcon}),e(T,{fullWidth:!0,value:X,onChange:a=>w(a.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),Pe=()=>i(o,{className:h?t.portraitSectionThird:t.sectionThird,children:[e(s,{className:h?t.portaitDateTimePicker:t.dateTimePicker,children:i(o,{className:t.startTimePicker,children:[i(s,{children:[e(c,{className:t.fieldTitle,children:"Start Time"}),e(F,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>re(a.target.value)})]})}),e(s,{className:h?t.portaitDateTimePicker:t.dateTimePicker,children:i(o,{className:t.startEndPicker,children:[i(s,{children:[e(c,{className:t.fieldTitle,children:"End Time"}),e(F,{className:t.fieldTitleIcon})]}),e("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:a=>oe(a.target.value)})]})})]}),Ie=()=>i(o,{className:h?t.portraitSectionChargesPlayers:t.sectionThird,children:[i(o,{className:t.startEndPicker,flex:1,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Payment Methods"})}),i("div",{className:t.paymentMethods,children:[i("div",{className:t.flexBox,children:[e("input",{type:"checkbox",id:"razorpay",checked:S.includes("razorpay"),onChange:()=>V("razorpay")}),e("label",{htmlFor:"razorpay",children:"Razorpay"})]}),i("div",{className:t.flexBox,children:[e("input",{type:"checkbox",id:"phonepe",checked:S.includes("phonepe"),onChange:()=>V("phonepe")}),e("label",{htmlFor:"phonepe",children:"PhonePe"})]})]})]}),i(o,{className:h?t.portraitDateTimePicker:t.dateTimePicker,children:[i(o,{className:t.startTimePicker,flex:1,marginRight:2,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Event Charges"})}),e(T,{InputProps:{startAdornment:e(Ue,{position:"start",children:W==="INR"?e(Ye,{}):W==="USD"?e(We,{}):null})},fullWidth:!0,value:_,onChange:a=>{ee(a.target.value),ne(a.target.value)},placeholder:"Amount",id:"fullWidth",type:"number"})]}),i(o,{className:t.startEndPicker,flex:1,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Total Players"})}),e(T,{fullWidth:!0,value:u,onChange:a=>ae(a.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})]})]}),J=a=>e(s,{children:i(o,{className:t.startEndPicker,children:[e(s,{children:e(c,{className:t.fieldTitle,children:a==="testGame"?"Test Game":"Team Division"})}),e(Je,{className:t.switchBtn,checked:a==="testGame"?B:p,onChange:()=>{a==="testGame"?ce(!B):le(!p)},color:"default",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4ce95a"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4ce95a"}}})]})}),ke=()=>{const a=["Black","White","Red","Blue","Yellow","Orange","Green","Light Purple","Purple","Bibs","No Bibs"],l=n=>{const m=n.target.value;m===x?P.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):de(m)},d=n=>{const m=n.target.value;m===C?P.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):me(m)};return i(o,{className:t.sectionThird,children:[e(s,{className:t.dateTimePicker,children:i(o,{className:t.startTimePicker,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Team 1"})}),e(I,{fullWidth:!0,children:i(k,{value:C,onChange:l,displayEmpty:!0,inputProps:{"aria-label":"Team 1 Color"},children:[e(g,{value:"",disabled:!0,children:"Select Team 1 Color"}),a.map(n=>e(g,{value:n,children:n},n))]})})]})}),e(s,{className:t.dateTimePicker,children:i(o,{className:t.startEndPicker,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Team 2"})}),e(I,{fullWidth:!0,children:i(k,{value:x,onChange:d,displayEmpty:!0,inputProps:{"aria-label":"Team 2 Color"},children:[e(g,{value:"",disabled:!0,children:"Select Team 2 Color"}),a.map(n=>e(g,{value:n,children:n},n))]})})]})})]})},be=()=>i(o,{className:t.sectionThird,children:[e(s,{className:t.dateTimePicker,children:i(o,{className:t.startTimePicker,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Team 1"})}),e(T,{fullWidth:!0,value:R,onChange:a=>ue(a.target.value),placeholder:"Name",id:"team1Name"})]})}),e(s,{className:t.dateTimePicker,children:i(o,{className:t.startEndPicker,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Team 2"})}),e(T,{fullWidth:!0,value:z,onChange:a=>pe(a.target.value),placeholder:"Name",id:"team2Name"})]})})]}),je=()=>e(s,{className:t.sectionFourth,children:e(qe,{variant:"contained",color:"success",className:t.createButton,onClick:Ce,children:"Add Game"})});return i(A,{children:[e(ze,{title:"Add Game"}),v.login.isAdmin&&v.login.isLoggedIn?e(A,{children:e(Ve,{in:!0,style:{transitionDelay:"300ms"},children:i(o,{className:h?t.portraitContainer:t.container,children:[e(Fe,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),i(s,{children:[e(c,{variant:"h3",className:t.title,children:"Add Game"}),e(s,{className:t.divider})]}),i(o,{className:t.formSection,children:[xe(),Se(),ve(),Pe(),Ie(),i(o,{className:t.sectionThird,children:[e(s,{className:t.dateTimePicker,children:i(o,{className:t.startTimePicker,children:[e(s,{children:e(c,{className:t.fieldTitle,children:"Game Credits"})}),e(T,{fullWidth:!0,value:O,disabled:!0,placeholder:"Credits",id:"fullWidth",type:"number"})]})}),J("testGame"),J("teamDivision")]}),p&&ke(),p&&be(),e("br",{}),je()]})]})})}):e(A,{})]})}export{qt as default};

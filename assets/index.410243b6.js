import{a as y,j as a,M as w,K as l,W}from"./loginSlice.25a195ef.js";import{l as G}from"./lodash.730ce810.js";import{M as V}from"./Meta.3404d31b.js";import{r as R,i as J,a as U,bt as K,am as Q,B as u,T as x,H as X,b as Z,u as $,bu as z,L as Y,F as B}from"./App.6d49236d.js";import{s,V as E,J as ee,E as ae,d as se,P as te,C as re}from"./Cities.df8e246e.js";import{T as H}from"./TextField.3137fef1.js";import{A as ie,a as oe}from"./MenuItem.c7e1eebf.js";import{b as le,d as de,c as ne}from"./DialogActions.87efeafb.js";import{G as D}from"./Grid.538ead98.js";import{a as me,q as ce}from"./constants.70367cb1.js";import{Z as ue}from"./Zoom.565bef79.js";import{b as ye,S as C}from"./Stack.a38b0356.js";import"./index.module.51bb9f99.js";import"./index.d67e9749.js";import"./map.828d63e8.js";import"./Input.6887ea44.js";var T={},he=J.exports;Object.defineProperty(T,"__esModule",{value:!0});var F=T.default=void 0,pe=he(R()),Ne=U,ve=(0,pe.default)((0,Ne.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");F=T.default=ve;var q={},Pe=J.exports;Object.defineProperty(q,"__esModule",{value:!0});var O=q.default=void 0,fe=Pe(R()),Se=U,_e=(0,fe.default)((0,Se.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");O=q.default=_e;const Le="_playerName_18ti2_1",be="_addButton_18ti2_5",ke="_adminModePanel_18ti2_10",Ie="_adminModeTag_18ti2_14",A={playerName:Le,addButton:be,adminModePanel:ke,adminModeTag:Ie},Ae={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Ce=({onToggle:N,isOpen:v,uniqueEventId:b,cityId:k,handlePassName:f})=>{const S=()=>N(),[d,P]=y.exports.useState(""),[c,_]=y.exports.useState(""),[,h]=K();function n(){h.push({options:{content:a(ie,{severity:"success",children:a(oe,{className:A.alertTitle,children:"Player Added Successfully"})})}})}const r=()=>{!d||!c?alert("All input fields are required."):fetch("https://service.flickmatch.in/platform-0.0.1-SNAPSHOT/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
        joinEvent(input: {
              uniqueEventId: "${b}"
              cityId: "${k}"
              player: {
                waNumber: "${c}"
                name: "${d}"
            }
        }) {
          isSuccessful
        }
    }`})}).then(o=>o.json()).then(o=>{if(o.errors)throw new Error(o.errors[0].message);f(d),n(),P(""),_("")}).catch(o=>{alert(o.message)})};return a(w,{children:a(Q,{open:v,onClose:S,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:l(u,{sx:Ae,children:[l(u,{className:A.adminModePanel,children:[a(x,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Add Player"}),a(X,{label:"admin mode",color:"primary",variant:"outlined",className:A.adminModeTag})]}),a(u,{className:A.playerName,children:a(H,{fullWidth:!0,label:"Player Name",id:"fullWidth",value:d,onChange:o=>P(o.target.value)})}),a(u,{children:a(H,{type:"number",fullWidth:!0,label:"Phone No.",id:"fullWidth",value:c,onChange:o=>_(o.target.value)})}),a(Z,{variant:"contained",endIcon:a(O,{}),className:A.addButton,onClick:r,children:"Add Player"})]})})})},xe=({gameEvent:N,cityName:v,cityNameId:b,addPlayerInQueue:k})=>{const f=$(),S=z(),[d,P]=y.exports.useState(!1),[c,_]=y.exports.useState(!1),h=W(e=>e),n=e=>{const i=document.getElementById(e);if(i){i.scrollIntoView({behavior:"smooth",block:"start"});const t=i.querySelector("[aria-expanded]");t&&t.click(),P(!0),setTimeout(()=>{P(!1)},2e3)}},r=()=>{_(e=>!e)},o=e=>{k(e)};y.exports.useEffect(()=>{N.forEach(e=>{const i=S.hash.substring(1);i===e.uniqueEventId&&n(i)})},[]);const p=(e,i)=>a(te,{displayName:e?e.displayName:"(Empty)",index:i},i),j=e=>l(u,{className:s.teamDivision,children:[a("span",{className:s.colorTeamA,style:{background:e}}),e||"White"," (Team A)"]}),I=e=>l(u,{className:s.teamDivisionSecond,children:[a("span",{className:s.colorTeamB,style:{background:e}}),e||"Blue"," (Team B)"]}),L=e=>a(Ce,{isOpen:c,onToggle:r,uniqueEventId:e,cityId:b,handlePassName:o});return a(w,{children:(()=>N.map(e=>l(le,{className:f?s.mobileAccordion:s.accordion,id:e.uniqueEventId,sx:{"&:before":{display:"none"}},children:[a(de,{expandIcon:a(Y,{to:`#${e.uniqueEventId}`,className:s.linkTag,children:a(F,{})}),"aria-controls":"panel1a-content",id:"panel1a-header",children:l(B,{className:s.flexbox,children:[l(B,{className:s.venue,children:[a(E,{venueName:e.venueName,date:e.date,dummyData:e.dummyData?e.dummyData:!1}),f?null:a(ee,{stripePaymentUrl:e.stripePaymentUrl,charges:0,date:"",uniqueEventId:e.uniqueEventId,eventId:e.eventId,reservedPlayersCount:e.reservedPlayersCount,reservedPlayersList:e.reservedPlayersList,time:"",venueLocationLink:"",venueName:e.venueName,waitListPlayers:e.waitListPlayers,waitListPlayersCount:e.waitListPlayersCount,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1})]}),a(ae,{uniqueEventId:e.uniqueEventId,charges:e.charges,date:e.date,time:e.time,venueLocationLink:e.venueLocationLink,reservedPlayersCount:e.reservedPlayersCount,waitListPlayersCount:e.waitListPlayersCount,eventId:v,reservedPlayersList:e.reservedPlayersList,venueName:e.venueName,waitListPlayers:e.waitListPlayers,stripePaymentUrl:e.stripePaymentUrl,team_division:!1,team1_color:e.team1_color?e.team1_color:"",team2_color:e.team2_color?e.team2_color:"",dummyData:e.dummyData?e.dummyData:!1})]})}),a(ne,{className:d&&S.hash.substring(1)===e.uniqueEventId?s.blink:"",children:l(u,{className:s.box,sx:{flexGrow:1},children:[l(u,{className:s.reservedPlayersContainer,children:[a(x,{className:s.reservedPlayers,children:"Reserved Players"}),h.login.isAdmin&&h.login.isLoggedIn?a(se,{className:s.editIcon,onClick:r}):null]}),h.login.isAdmin&&h.login.isLoggedIn?L(e.uniqueEventId):null,e.team_division?l(u,{children:[j(e.team1_color),a(D,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(i,t)=>{const m=t<e.reservedPlayersList.length?e.reservedPlayersList[t]:null;return p(m,t)})}),a(x,{className:s.versus,children:"v/s"}),I(e.team2_color),a(D,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount/2},(i,t)=>{const m=t<e.reservedPlayersList.length?e.reservedPlayersList[t+e.reservedPlayersCount/2]:null;return p(m,t+e.reservedPlayersCount/2)})})]}):a(u,{children:a(D,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Array.from({length:e.reservedPlayersCount},(i,t)=>{const m=t<e.reservedPlayersList.length?e.reservedPlayersList[t]:null;return p(m,t)})})})]})})]},e.uniqueEventId)))()})},g={data:{cities:[{cityId:"2",cityName:"Hyderabad",countryCode:"IN",dummyData:!1,currency:"INR",events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-1",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:12,waitListPlayersCount:6,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!0,team1_color:"White",team2_color:"Blue",charges:200,reservedPlayersList:[{displayName:"Abhimanyu"},{displayName:"Sourabh"},{displayName:"Kamal"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Jasprit"},{displayName:"Naresh Kumar"},{displayName:"Kaushal"},{displayName:"Nakul"},{displayName:"Parth"},{displayName:"Himanshu"}],waitListPlayers:[{displayName:"Nitin"},{displayName:"Haridev"},{displayName:"Kiyaan"},{displayName:"Monya Amo"},{displayName:"Rolly"},{displayName:"Jhumkar"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-2",date:"Sun, Jan 01",time:"9:00PM-10:00PM",dummyData:!0,venueName:"Bsporty",reservedPlayersCount:10,waitListPlayersCount:5,venueLocationLink:"https://maps.app.goo.gl/axDbAHPjP648u7FZA",team_division:!1,team1_color:"",team2_color:"",charges:250,reservedPlayersList:[{displayName:"Aryan"},{displayName:"Sarvesh"},{displayName:"Saarthak"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Harsh"},{displayName:"Mayank"},{displayName:"Yash"},{displayName:"Ankur"},{displayName:"Rithik"}],waitListPlayers:[{displayName:"Harsh"},{displayName:"Lovepreet"},{displayName:"Himanshu"},{displayName:"Mohit"},{displayName:"Piyush"}],stripePaymentUrl:""}]},{cityId:"1",cityName:"Gurgaon",countryCode:"IN",currency:"INR",dummyData:!1,events:[{uniqueEventId:"07-28-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sumesh"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Saksham"},{displayName:"Sahil"},{displayName:"Abhishek"},{displayName:"Anubhav"},{displayName:"Saarthak"},{displayName:"Harshvardhan"},{displayName:"Astitva"},{displayName:"Rishi"},{displayName:"Rijvaan"}],waitListPlayers:[{displayName:"Mukhtaar"},{displayName:"Shubham"},{displayName:"Burhan"},{displayName:"Arif"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Nilesh"}],stripePaymentUrl:""},{uniqueEventId:"07-28-1-1-6",eventId:"07-28-4",date:"Sun, Jan 01",time:"8:00PM-9:00PM",dummyData:!0,venueName:"Gallant play arena south City 1",reservedPlayersCount:14,waitListPlayersCount:7,venueLocationLink:"https://maps.app.goo.gl/ebEXAjXrsUvBanyY9",team_division:!1,team1_color:"",team2_color:"",charges:400,reservedPlayersList:[{displayName:"Harshdeep"},{displayName:"Sarvesh"},{displayName:"Akhilesh"},{displayName:"Sanju"},{displayName:"Prahlad"},{displayName:"Kishore"},{displayName:"Jasprit"},{displayName:"Sooraj"},{displayName:"Bunty Singh"},{displayName:"Rijwaan"},{displayName:"Ravinder"},{displayName:"Vinod"},{displayName:"Himesh"},{displayName:"Sandeep"}],waitListPlayers:[{displayName:"Shubham"},{displayName:"Sahil"},{displayName:"Sukhwinder"},{displayName:"Mahendra"},{displayName:"Himesh"},{displayName:"Margo"},{displayName:"Saksham"}],stripePaymentUrl:""}]},{cityId:"4",cityName:"San Jose",countryCode:"US",currency:"USD",dummyData:!1,events:[{uniqueEventId:"10-26-1-1-6",eventId:"07-28-3",date:"Sun, Jan 01",time:"7:00PM-8:00PM",dummyData:!0,venueName:"Vista Montana Park",reservedPlayersCount:18,waitListPlayersCount:9,venueLocationLink:"https://goo.gl/maps/ivkhHaXWM3RBTJ5r9",team_division:!1,team1_color:"",team2_color:"",charges:8.99,reservedPlayersList:[{displayName:"Chen"},{displayName:"Pablo"},{displayName:"Feng"},{displayName:"Leo"},{displayName:"Himesh"},{displayName:"Arturito"},{displayName:"Diego"},{displayName:"Mateo"},{displayName:"Rafael"},{displayName:"Shahin"},{displayName:"Eva"},{displayName:"Astva"},{displayName:"Rishi"},{displayName:"Frank"},{displayName:"Ahmad"},{displayName:"Luca"},{displayName:"Dario"},{displayName:"Bianca"}],waitListPlayers:[{displayName:"Jiang"},{displayName:"Santiago"},{displayName:"Burhan"},{displayName:"Felipe"},{displayName:"Arihant"},{displayName:"John"},{displayName:"Alvaro"},{displayName:"Elise"},{displayName:"Louis"}],stripePaymentUrl:""}]}]}};function Ge(){const[N,v]=y.exports.useState([]),[b,k]=y.exports.useState(!0),[f,S]=y.exports.useState([]),d=$(),P=n=>{S(r=>[...r,n])},c=n=>new Date(n.date);y.exports.useEffect(()=>{const n=new AbortController,r=n.signal;return(async()=>{try{const I=await(await fetch(me,{method:"POST",signal:r,headers:{"Content-Type":"application/json"},body:ce})).json();I.data.cities.forEach((L,M)=>{if(G.exports.some(g.data.cities,{cityId:L.cityId}))if(L.events.length>0){const i=I.data.cities[M];i.events.sort((t,m)=>c(m).getTime()-c(t).getTime()),v(t=>[...t,i])}else g.data.cities.forEach((i,t)=>{i.cityName==L.cityName&&v(m=>[...m,g.data.cities[t]])});else if(L.events.length>0){const i=I.data.cities[M];i.events.sort((t,m)=>c(m).getTime()-c(t).getTime()),v(t=>[...t,i])}k(!1)})}catch(p){p instanceof Error&&p.name==="TypeError"&&console.log(p)}})(),()=>{n.abort()}},[f]);const _=()=>(N.sort(r=>r.dummyData===!1?1:-1),N.map(r=>a(ue,{in:!0,style:{transitionDelay:"300ms"},children:l("div",{className:d?s.mobileContainer:s.container,children:[a(re,{cityName:r.cityName,cityId:r.cityId,events:r.events,dummyData:r.dummyData,countryCode:r.countryCode}),a(xe,{gameEvent:r.events,cityName:r.cityName,cityNameId:r.cityId,addPlayerInQueue:P})]})},r.cityId))),h=()=>b?l(ye,{spacing:1,className:s.skeletonContainer,children:[a(C,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton}),a(C,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton}),a(C,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton}),a(C,{variant:"rectangular",className:d?s.mobileSkeleton:s.skeleton})]}):null;return l(w,{children:[a(V,{title:"Match Queues"}),a(x,{className:s.title,children:"Flickmatch Soccer"}),_(),h()]})}export{Ge as default};

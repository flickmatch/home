import{W as A,a as h,a6 as E,A as i,F as T,j as t}from"./loginSlice.ea7b6bcd.js";import{r as F,a as $,u as q,e as L,B as f,T as d,d as v,b as k,Y as B}from"./App.bc479ed3.js";import{M as G}from"./Meta.a71c5af9.js";import{a as x}from"./constants.4625ca3c.js";import{m as J}from"./map.839e9770.js";import{Z as M}from"./Zoom.953b24ef.js";import"./index.bf074b9a.js";import"./index.module.86d27b7e.js";var D={},V=A.exports;Object.defineProperty(D,"__esModule",{value:!0});var w=D.default=void 0,H=V(F()),W=$;w=D.default=(0,H.default)((0,W.jsx)("path",{d:"M13.66 7c-.56-1.18-1.76-2-3.16-2H6V3h12v2h-3.26c.48.58.84 1.26 1.05 2H18v2h-2.02c-.25 2.8-2.61 5-5.48 5h-.73l6.73 7h-2.77L7 14v-2h3.5c1.76 0 3.22-1.3 3.46-3H6V7z"}),"CurrencyRupee");const K="_logo_zh0ju_19",X="_heading_zh0ju_24",Z="_pageContainer_zh0ju_31",Q="_container_zh0ju_36",Y="_passCard_zh0ju_46",ee="_portraitPassCard_zh0ju_47",te="_ribbon_zh0ju_67",ae="_title_zh0ju_116",se="_subtitle_zh0ju_125",re="_price_zh0ju_130",oe="_currency_zh0ju_138",ie="_status_zh0ju_144",ne="_pulse_zh0ju_1",ce="_portraitDetails_zh0ju_160",le="_details_zh0ju_168",pe="_sportsIcon_zh0ju_195",ue="_buyNow_zh0ju_210",de="_footballIcon_zh0ju_235",me="_cityNameContainer_zh0ju_241",he="_citiesName_zh0ju_248",ye="_citiesImg_zh0ju_258",_e="_testingPurposeTag_zh0ju_262",ge="_blinkAnimation_zh0ju_1",e={logo:K,heading:X,pageContainer:Z,container:Q,passCard:Y,portraitPassCard:ee,ribbon:te,title:ae,subtitle:se,price:re,currency:oe,status:ie,pulse:ne,portraitDetails:ce,details:le,sportsIcon:pe,buyNow:ue,footballIcon:de,cityNameContainer:me,citiesName:he,citiesImg:ye,testingPurposeTag:_e,blinkAnimation:ge},s={data:{pass:[{passId:"pass5",cityId:"5",passType:"LimitedDays",totalGames:1e3,totalDays:30,price:1e3,title:"30 days pass",status:"Active",features:["No Waitlist","Join game in single click","Exclusive member events"],description:"Pay for 28 days, play 30 games"}]}},fe={}.VITE_API_URL,Ne=(r,l,y,_,m)=>fetch(fe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${r}"
                    email: "${l}",
                    currency: "${m}",
                    location: "${_}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(n=>n.json()).then(n=>{if(n.errors)throw new Error(n.errors[0].message);return y(n.data.initiatePassPayment.amount),n.data.initiatePassPayment.orderId}).catch(n=>{console.log(n)});function be(){return new Promise(r=>{const l=document.createElement("script");l.src="https://checkout.razorpay.com/v1/checkout.js",l.onload=()=>{r(!0)},l.onerror=()=>{r(!1)},document.body.appendChild(l)})}function Ie(){const r=document.querySelector('script[src="https://checkout.razorpay.com/v1/checkout.js"]');r&&document.body.removeChild(r)}const je=(r,l,y,_,m,n,b)=>{async function I(){await be()||alert("Razorpay SDK failed to load.Please try again later.");const j={key:"rzp_live_ba3UQjRIBXdeXt",amount:r,currency:"INR",name:"Flickmatch",description:"Flickmatch transaction for football match.",image:"https://firebasestorage.googleapis.com/v0/b/flickmatch-374a2.appspot.com/o/fm_rainbow.png?alt=media&token=1b06ae27-bf10-4974-9100-6bb5f2308314",order_id:l,callback_url:{}.VITE_CALLBACK_URL,redirect:!0,prefill:{name:_,email:y,contact:m},notes:{address:"Tower 8 - Flat 1501, Nirvana Country Rd, The Close South, Sector 50, Gurugram, Haryana 122018"},modal:{ondismiss:function(){b(!1),n(""),Ie(),delete N.Razorpay}},theme:{color:"#4ce95a"}},N=window;new N.Razorpay(j).open()}I()},U={}.VITE_API_URL;function ke(){const r=q(),l=L(),[y,_]=h.exports.useState([]),[m,n]=h.exports.useState({name:"",email:"",phoneNumber:""}),[b,I]=h.exports.useState(!0),[S,j]=h.exports.useState(0),[N,C]=h.exports.useState(""),z=E(a=>a),[p,O]=h.exports.useState(null),P=window.location.pathname.split("/").pop();h.exports.useEffect(()=>{const a=localStorage.getItem("userData");if(a){const o=JSON.parse(a);n({name:o.name,email:o.email,phoneNumber:""})}},[]),h.exports.useEffect(()=>{(async()=>{try{const u=(await(await fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query PassesForCity {
            passesForCity(cityId: "${P}") {
                  passId
                  cityId
                  passType
                  totalGames
                  totalDays
                  price
                  title
                  status
                  features
                  description
            }
              }`})})).json()).data.passesForCity;J.forEach(c=>{Number(P)===Number(c.cityId)&&O({city:c.city,cityId:c.cityId,currency:c.currency,iconUrl:c.iconUrl})}),_(u)}catch(o){_(s.data.pass),o instanceof Error&&o.name==="TypeError"&&(alert(o),l("/match-queues"))}})()},[P]);const R=(a,o,g)=>{z.login.isLoggedIn?b?Ne(a,m.email,j,o,g).then(u=>{C(u)}).catch(u=>{alert(u)}):fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation InitiatePassPayment {
            initiatePassPayment(
                input: {
                    passId: "${a}"
                    email: "${m.email}",
                    currency: "INR",
                    location: "${o}"
                }
            ) {
                orderId
                isInitiated
                amount
            }
        }`})}).then(c=>c.json()).then(c=>{c.errors&&alert(c.errors[0].message)}).catch(c=>{alert(c)}):(alert("Please login to proceed with the purchase."),l("/login"))};return N&&je(S,N,m.email,m.name,m.phoneNumber,C,I),i(T,{children:[t(G,{title:"Game Passes"}),t(M,{in:!0,style:{transitionDelay:"300ms"},children:i(f,{className:e.pageContainer,children:[t(d,{variant:"h3",className:e.heading,children:"Flickmatch Pass"}),p!=null?i("div",{className:e.cityNameContainer,children:[t(d,{className:e.citiesName,children:p.city},p.cityId),t("img",{className:e.citiesImg,src:p.iconUrl,alt:p.city,height:"40px"})]}):null,t(f,{className:e.container,children:i(T,{children:[y.length>0&&p!=null?y.map((a,o)=>i(f,{className:r?e.portraitPassCard:e.passCard,children:[t("img",{src:x,alt:"logo",className:e.logo}),t(d,{variant:"h3",className:e.title,children:a.title?a.title:s.data.pass[0].title}),t(d,{className:e.subtitle,children:a.description?a.description:s.data.pass[0].description}),i(d,{className:e.price,children:[t(w,{className:e.currency}),a.price?a.price:s.data.pass[0].price]}),t(d,{className:e.status,children:a.status?a.status:s.data.pass[0].status}),t("ul",{className:r?e.portraitDetails:e.details,children:a.features!==null&&a.features.length>0?a.features.map((g,u)=>i("li",{children:[t(v,{className:e.footballIcon}),g]},u)):s.data.pass[0].features.map((g,u)=>i("li",{children:[t(v,{className:e.footballIcon}),g]},u))}),t(f,{className:e.ribbon,children:a.title==="Unlimited game pass"?t("span",{style:{fontWeight:600},children:"Best Deal"}):i("span",{children:["For"," ",a.totalDays?a.totalDays:s.data.pass[0].totalDays," ","Days"]})}),t(k,{className:e.buyNow,onClick:()=>R(a.passId,p.city,p.currency),children:"Buy Now"})]},o)):null,z.login.isAdmin&&z.login.isLoggedIn&&p!=null?i(f,{className:r?e.portraitPassCard:e.passCard,children:[t(B,{label:"for testing",color:"primary",variant:"outlined",className:e.testingPurposeTag}),t("img",{src:x,alt:"logo",className:e.logo}),t(d,{variant:"h3",className:e.title,children:s.data.pass[0].title}),t(d,{className:e.subtitle,children:s.data.pass[0].description}),i(d,{className:e.price,children:[t(w,{className:e.currency}),s.data.pass[0].price]}),t(d,{className:e.status,children:s.data.pass[0].status}),t("ul",{className:r?e.portraitDetails:e.details,children:s.data.pass[0].features?s.data.pass[0].features.map((a,o)=>i("li",{children:[t(v,{className:e.footballIcon}),a]},o)):null}),t(f,{className:e.ribbon,children:s.data.pass[0].status==="Unlimited game pass"?t("span",{style:{fontWeight:600},children:"Best Deal"}):i("span",{children:["For ",s.data.pass[0].totalDays," Days"]})}),t(k,{className:e.buyNow,onClick:()=>R(s.data.pass[0].passId,p.city,p.currency),children:"Buy Now"})]}):null]})})]})})]})}export{ke as default};

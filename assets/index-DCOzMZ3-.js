import{H as ke,K as be,r as i,X as we,j as e}from"./loginSlice-DaapXPJe.js";import{a as Me}from"./index-CU2RedqW.js";import{r as Ae,u as Ee,b as Be,j as De,F as r,d as Fe,B as a,T as o,R as Ge,A as $e,a as qe}from"./App-B4DX4k5J.js";import{A as Oe}from"./AccountBalance-Ce-WJqDI.js";import{C as Re}from"./CrisisAlertOutlined-YpAgJWRr.js";import{l as P}from"./lodash-C7g9hy0u.js";import{S as I,q as We}from"./sweetalert2.all-BnJXlX7w.js";import{M as Le}from"./Meta-DX_1hwEA.js";import{Z as ze}from"./Zoom-_CB3TxZ7.js";import{T as x,F as k}from"./TextField-C2m_GdQV.js";import{S as b}from"./Select-ePhiPg5x.js";import{M as j}from"./MenuItem-Cy40ZwTU.js";import{I as Ve,S as Je}from"./Switch-COBk7n9v.js";import{C as Ue}from"./CurrencyRupeeSharp-SkDp-jR3.js";import{A as D,a as F}from"./AlertTitle-BmCepCTO.js";import"./index.module-DzsYsj7q.js";import"./Input-lhGPHK76.js";import"./SwitchBase-BACShV9k.js";var C={},V;function Ze(){if(V)return C;V=1;var d=ke();Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var T=d(Ae()),h=be();return C.default=(0,T.default)([(0,h.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,h.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),C}var He=Ze();const J=Me(He),Ye="_container_gujox_1",Ke="_portraitContainer_gujox_2",Qe="_adminModeTag_gujox_23",Xe="_title_gujox_30",et="_divider_gujox_39",tt="_fieldTitle_gujox_47",st="_fieldTitleIcon_gujox_53",at="_sectionFirst_gujox_60",it="_sectionSecond_gujox_61",rt="_sectionThird_gujox_62",nt="_portraitSectionThird_gujox_70",ot="_formSection_gujox_76",ct="_selectInput_gujox_82",lt="_sectionFourth_gujox_86",dt="_createButton_gujox_93",mt="_dateTimePicker_gujox_112",ht="_portaitDateTimePicker_gujox_116",ut="_startTimePicker_gujox_121",pt="_startEndPicker_gujox_122",xt="_selectStartTimeInput_gujox_127",jt="_switchBtn_gujox_134",Tt="_flexBox_gujox_138",ft="_paymentMethods_gujox_143",gt="_portraitSectionChargesPlayers_gujox_148",t={container:Ye,portraitContainer:Ke,adminModeTag:Qe,title:Xe,divider:et,fieldTitle:tt,fieldTitleIcon:st,sectionFirst:at,sectionSecond:it,sectionThird:rt,portraitSectionThird:nt,formSection:ot,selectInput:ct,sectionFourth:lt,createButton:dt,dateTimePicker:mt,portaitDateTimePicker:ht,startTimePicker:ut,startEndPicker:pt,selectStartTimeInput:xt,switchBtn:jt,flexBox:Tt,paymentMethods:ft,portraitSectionChargesPlayers:gt},U=void 0,Z=void 0;function $t(){const d=Ee(),T=Be(),[,h]=De(),[f,H]=i.useState(""),[g,Y]=i.useState(""),[K,w]=i.useState(""),[y,Q]=i.useState(""),[G,X]=i.useState(""),[u,ee]=i.useState(""),[M,te]=i.useState([]),[A,se]=i.useState([]),[$,ae]=i.useState(""),[q,ie]=i.useState(""),[O,re]=i.useState(""),[E,ne]=i.useState(!1),[p,oe]=i.useState(!0),[S,ce]=i.useState("Bibs"),[_,le]=i.useState("No Bibs"),[N,de]=i.useState(["razorpay"]),[R,me]=i.useState(""),[W,he]=i.useState(""),v=we(s=>s);i.useEffect(()=>{localStorage.getItem("userData")&&(v.login.isAdmin||I.fire({title:"Unauthorized Access",text:"You are not authorized to view this page.",icon:"error"}).then(()=>{T("/match-queues")}))},[v.login.isAdmin,T]),i.useEffect(()=>{const s=new AbortController,c=s.signal;return(async()=>{try{const m=await(await fetch(Z,{method:"POST",signal:c,headers:{"Content-Type":"application/json"},body:We})).json();te(m.data.cities)}catch(n){n instanceof Error&&n.name==="TypeError"&&console.log(n.message)}})(),()=>{s.abort()}},[]);const B=s=>{de(c=>c.includes(s)?c.filter(l=>l!==s):[...c,s])},ue=s=>{(async()=>{try{const n=await(await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {
              city(cityId: "${s}") {
                cityId
                cityName
                sportsVenues {
                  sportsVenueId
                  displayName
                  googleMapsLink
                  availableSportsIds
                  pinCode
                }      
              }
            }`})})).json();se(n.data.city.sportsVenues)}catch(l){l instanceof Error&&l.name==="TypeError"&&console.log(l.message)}})()},pe=async s=>{H(s.target.value),w("");const l=await(await fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query City {
        city(cityId: ${s.target.value}) {
        cityId
        cityName
        localTimeZone
        countryCode
        iconUrl
    }
}`})})).json();l.data.city.cityId===s.target.value&&X(l.data.city.countryCode),ue(s.target.value)},xe=s=>{Y(s.target.value)};function je(){h.push({options:{content:e.jsx(D,{severity:"info",children:e.jsxs(F,{className:t.alertTitle,children:[f===""?"City name":g===""?"Turf name":y===""?"Charges":"Total Players"," ","cannot be empty!"]})})}})}function Te(){h.push({options:{content:e.jsx(D,{severity:"success",children:e.jsx(F,{className:t.alertTitle,children:"Game Added Successfully"})})}})}function L(s){h.push({options:{content:e.jsx(D,{severity:"error",children:e.jsx(F,{className:t.alertTitle,children:s})})}})}const fe={input:{cityId:f,charges:Number(y),sportsVenueId:g,startTime:$,endTime:q,reservedPlayersCount:P.parseInt(u),waitListPlayersCount:P.parseInt(u)/2,paymentMethods:N.filter(s=>s!=="")}},ge=()=>{f===""||g===""||y===""||u===""?je():p&&(S===""||_==="")?I.fire({title:"Invalid Selection",text:"Please select team colors for both teams!",icon:"warning"}):fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`mutation {
            createEvent(
                  input: {
                      cityId: "${f}"
                      charges: ${Number(y)}
                      sportsVenueId: "${g}"
                      startTime: "${$+"+0530"}"
                      endTime: "${q+"+0530"}"
                      reservedPlayersCount: ${P.parseInt(u)}
                      waitListPlayersCount: ${P.parseInt(u)/2}
                      credits: ${Number(O)}
                      testGame: ${E}
                      teamDivision: ${p}
                      team1Color: "${S}"
                      team2Color: "${_}"
                      paymentMethods: ${JSON.stringify(N.filter(s=>s!==""))}
                      team1Name: "${R}"
                      team2Name: "${W}"
                  }
              ) {
                isSuccessful
                errorMessage
              }
          }`,variables:fe.input})}).then(s=>s.json()).then(s=>{s.data.createEvent.isSuccessful===!1?L(s.data.createEvent.errorMessage):(Te(),T("/match-queues"))}).catch(s=>{L(s.message),console.log(s)})},ye=()=>e.jsxs(a,{className:t.sectionFirst,children:[e.jsx(o,{className:t.fieldTitle,children:"City Name"}),e.jsx(Oe,{className:t.fieldTitleIcon}),e.jsx(k,{className:t.selectInput,children:e.jsx(b,{id:"demo-simple-select-autowidth",value:f,onChange:pe,style:{width:"100%"},children:M==null?void 0:M.map((s,c)=>e.jsx(j,{value:s.cityId,style:{width:"100%"},children:s.cityName},c))})})]}),Ne=()=>e.jsxs(a,{className:t.sectionSecond,children:[e.jsx(o,{className:t.fieldTitle,children:"Turf Name"}),e.jsx(Ge,{className:t.fieldTitleIcon}),e.jsx(k,{className:t.selectInput,children:e.jsx(b,{id:"demo-simple-select-autowidth",value:g,onChange:xe,style:{width:"100%"},children:A==null?void 0:A.map((s,c)=>e.jsx(j,{value:s.sportsVenueId,style:{width:"100%"},onClick:()=>w(s.googleMapsLink),children:s.displayName},c))})})]}),Ce=()=>e.jsxs(a,{className:t.sectionThird,children:[e.jsx(o,{className:t.fieldTitle,children:"Google Map Link"}),e.jsx(Re,{className:t.fieldTitleIcon}),e.jsx(x,{fullWidth:!0,value:K,onChange:s=>w(s.target.value),placeholder:"G-Map Link",id:"fullWidth"})]}),Se=()=>e.jsxs(r,{className:d?t.portraitSectionThird:t.sectionThird,children:[e.jsx(a,{className:d?t.portaitDateTimePicker:t.dateTimePicker,children:e.jsxs(r,{className:t.startTimePicker,children:[e.jsxs(a,{children:[e.jsx(o,{className:t.fieldTitle,children:"Start Time"}),e.jsx(J,{className:t.fieldTitleIcon})]}),e.jsx("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>ae(s.target.value)})]})}),e.jsx(a,{className:d?t.portaitDateTimePicker:t.dateTimePicker,children:e.jsxs(r,{className:t.startEndPicker,children:[e.jsxs(a,{children:[e.jsx(o,{className:t.fieldTitle,children:"End Time"}),e.jsx(J,{className:t.fieldTitleIcon})]}),e.jsx("input",{type:"datetime-local",id:"birthdaytime",name:"birthdaytime",className:t.selectStartTimeInput,onChange:s=>ie(s.target.value)})]})})]}),_e=()=>e.jsxs(r,{className:d?t.portraitSectionChargesPlayers:t.sectionThird,children:[e.jsxs(r,{className:t.startEndPicker,flex:1,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Payment Methods"})}),e.jsxs("div",{className:t.paymentMethods,children:[e.jsxs("div",{className:t.flexBox,children:[e.jsx("input",{type:"checkbox",id:"razorpay",checked:N.includes("razorpay"),onChange:()=>B("razorpay")}),e.jsx("label",{htmlFor:"razorpay",children:"Razorpay"})]}),e.jsxs("div",{className:t.flexBox,children:[e.jsx("input",{type:"checkbox",id:"phonepe",checked:N.includes("phonepe"),onChange:()=>B("phonepe")}),e.jsx("label",{htmlFor:"phonepe",children:"PhonePe"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"stripe",checked:N.includes("stripe"),onChange:()=>B("stripe")}),e.jsx("label",{htmlFor:"stripe",children:"Stripe"})]})]})]}),e.jsxs(r,{className:d?t.portraitDateTimePicker:t.dateTimePicker,children:[e.jsxs(r,{className:t.startTimePicker,flex:1,marginRight:2,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Event Charges"})}),e.jsx(x,{InputProps:{startAdornment:e.jsx(Ve,{position:"start",children:G==="INR"?e.jsx(Ue,{}):G==="USD"?e.jsx($e,{}):null})},fullWidth:!0,value:y,onChange:s=>{Q(s.target.value),re(s.target.value)},placeholder:"Amount",id:"fullWidth",type:"number"})]}),e.jsxs(r,{className:t.startEndPicker,flex:1,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Total Players"})}),e.jsx(x,{fullWidth:!0,value:u,onChange:s=>ee(s.target.value),placeholder:"Count",id:"fullWidth",type:"number"})]})]})]}),z=s=>e.jsx(a,{children:e.jsxs(r,{className:t.startEndPicker,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:s==="testGame"?"Test Game":"Team Division"})}),e.jsx(Je,{className:t.switchBtn,checked:s==="testGame"?E:p,onChange:()=>{s==="testGame"?ne(!E):oe(!p)},color:"default",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4ce95a"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4ce95a"}}})]})}),ve=()=>{const s=["Black","White","Red","Blue","Yellow","Orange","Green","Light Purple","Purple","Bibs","No Bibs"],c=n=>{const m=n.target.value;m===_?I.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):ce(m)},l=n=>{const m=n.target.value;m===S?I.fire({title:"Invalid Selection",text:"Team 1 and Team 2 colors cannot be the same!",icon:"warning"}):le(m)};return e.jsxs(r,{className:t.sectionThird,children:[e.jsx(a,{className:t.dateTimePicker,children:e.jsxs(r,{className:t.startTimePicker,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Team 1"})}),e.jsx(k,{fullWidth:!0,children:e.jsxs(b,{value:S,onChange:c,displayEmpty:!0,inputProps:{"aria-label":"Team 1 Color"},children:[e.jsx(j,{value:"",disabled:!0,children:"Select Team 1 Color"}),s.map(n=>e.jsx(j,{value:n,children:n},n))]})})]})}),e.jsx(a,{className:t.dateTimePicker,children:e.jsxs(r,{className:t.startEndPicker,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Team 2"})}),e.jsx(k,{fullWidth:!0,children:e.jsxs(b,{value:_,onChange:l,displayEmpty:!0,inputProps:{"aria-label":"Team 2 Color"},children:[e.jsx(j,{value:"",disabled:!0,children:"Select Team 2 Color"}),s.map(n=>e.jsx(j,{value:n,children:n},n))]})})]})})]})},Pe=()=>e.jsxs(r,{className:t.sectionThird,children:[e.jsx(a,{className:t.dateTimePicker,children:e.jsxs(r,{className:t.startTimePicker,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Team 1"})}),e.jsx(x,{fullWidth:!0,value:R,onChange:s=>me(s.target.value),placeholder:"Name",id:"team1Name"})]})}),e.jsx(a,{className:t.dateTimePicker,children:e.jsxs(r,{className:t.startEndPicker,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Team 2"})}),e.jsx(x,{fullWidth:!0,value:W,onChange:s=>he(s.target.value),placeholder:"Name",id:"team2Name"})]})})]}),Ie=()=>e.jsx(a,{className:t.sectionFourth,children:e.jsx(qe,{variant:"contained",color:"success",className:t.createButton,onClick:ge,children:"Add Game"})});return e.jsxs(e.Fragment,{children:[e.jsx(Le,{title:"Add Game"}),v.login.isAdmin&&v.login.isLoggedIn?e.jsx(e.Fragment,{children:e.jsx(ze,{in:!0,style:{transitionDelay:"300ms"},children:e.jsxs(r,{className:d?t.portraitContainer:t.container,children:[e.jsx(Fe,{label:"admin mode",color:"primary",variant:"outlined",className:t.adminModeTag}),e.jsxs(a,{children:[e.jsx(o,{variant:"h3",className:t.title,children:"Add Game"}),e.jsx(a,{className:t.divider})]}),e.jsxs(r,{className:t.formSection,children:[ye(),Ne(),Ce(),Se(),_e(),e.jsxs(r,{className:t.sectionThird,children:[e.jsx(a,{className:t.dateTimePicker,children:e.jsxs(r,{className:t.startTimePicker,children:[e.jsx(a,{children:e.jsx(o,{className:t.fieldTitle,children:"Game Credits"})}),e.jsx(x,{fullWidth:!0,value:O,disabled:!0,placeholder:"Credits",id:"fullWidth",type:"number"})]})}),z("testGame"),z("teamDivision")]}),p&&ve(),p&&Pe(),e.jsx("br",{}),Ie()]})]})})}):e.jsx(e.Fragment,{})]})}export{$t as default};
